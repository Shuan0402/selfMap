function UI(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in t)){const o=Object.getOwnPropertyDescriptor(i,s);o&&Object.defineProperty(t,s,o.get?o:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var BI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function py(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var my={exports:{}},Ph={},gy={exports:{}},Te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hl=Symbol.for("react.element"),jI=Symbol.for("react.portal"),WI=Symbol.for("react.fragment"),HI=Symbol.for("react.strict_mode"),$I=Symbol.for("react.profiler"),qI=Symbol.for("react.provider"),ZI=Symbol.for("react.context"),KI=Symbol.for("react.forward_ref"),GI=Symbol.for("react.suspense"),QI=Symbol.for("react.memo"),YI=Symbol.for("react.lazy"),Ng=Symbol.iterator;function XI(t){return t===null||typeof t!="object"?null:(t=Ng&&t[Ng]||t["@@iterator"],typeof t=="function"?t:null)}var _y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},vy=Object.assign,yy={};function Fo(t,e,n){this.props=t,this.context=e,this.refs=yy,this.updater=n||_y}Fo.prototype.isReactComponent={};Fo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Fo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function wy(){}wy.prototype=Fo.prototype;function wp(t,e,n){this.props=t,this.context=e,this.refs=yy,this.updater=n||_y}var Ep=wp.prototype=new wy;Ep.constructor=wp;vy(Ep,Fo.prototype);Ep.isPureReactComponent=!0;var Mg=Array.isArray,Ey=Object.prototype.hasOwnProperty,Tp={current:null},Ty={key:!0,ref:!0,__self:!0,__source:!0};function Iy(t,e,n){var i,s={},o=null,l=null;if(e!=null)for(i in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(o=""+e.key),e)Ey.call(e,i)&&!Ty.hasOwnProperty(i)&&(s[i]=e[i]);var h=arguments.length-2;if(h===1)s.children=n;else if(1<h){for(var d=Array(h),m=0;m<h;m++)d[m]=arguments[m+2];s.children=d}if(t&&t.defaultProps)for(i in h=t.defaultProps,h)s[i]===void 0&&(s[i]=h[i]);return{$$typeof:Hl,type:t,key:o,ref:l,props:s,_owner:Tp.current}}function JI(t,e){return{$$typeof:Hl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ip(t){return typeof t=="object"&&t!==null&&t.$$typeof===Hl}function eP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Dg=/\/+/g;function fd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?eP(""+t.key):e.toString(36)}function pc(t,e,n,i,s){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case Hl:case jI:l=!0}}if(l)return l=t,s=s(l),t=i===""?"."+fd(l,0):i,Mg(s)?(n="",t!=null&&(n=t.replace(Dg,"$&/")+"/"),pc(s,e,n,"",function(m){return m})):s!=null&&(Ip(s)&&(s=JI(s,n+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(Dg,"$&/")+"/")+t)),e.push(s)),1;if(l=0,i=i===""?".":i+":",Mg(t))for(var h=0;h<t.length;h++){o=t[h];var d=i+fd(o,h);l+=pc(o,e,n,d,s)}else if(d=XI(t),typeof d=="function")for(t=d.call(t),h=0;!(o=t.next()).done;)o=o.value,d=i+fd(o,h++),l+=pc(o,e,n,d,s);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function $u(t,e,n){if(t==null)return t;var i=[],s=0;return pc(t,i,"","",function(o){return e.call(n,o,s++)}),i}function tP(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Wt={current:null},mc={transition:null},nP={ReactCurrentDispatcher:Wt,ReactCurrentBatchConfig:mc,ReactCurrentOwner:Tp};function Py(){throw Error("act(...) is not supported in production builds of React.")}Te.Children={map:$u,forEach:function(t,e,n){$u(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return $u(t,function(){e++}),e},toArray:function(t){return $u(t,function(e){return e})||[]},only:function(t){if(!Ip(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Te.Component=Fo;Te.Fragment=WI;Te.Profiler=$I;Te.PureComponent=wp;Te.StrictMode=HI;Te.Suspense=GI;Te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nP;Te.act=Py;Te.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=vy({},t.props),s=t.key,o=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,l=Tp.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var h=t.type.defaultProps;for(d in e)Ey.call(e,d)&&!Ty.hasOwnProperty(d)&&(i[d]=e[d]===void 0&&h!==void 0?h[d]:e[d])}var d=arguments.length-2;if(d===1)i.children=n;else if(1<d){h=Array(d);for(var m=0;m<d;m++)h[m]=arguments[m+2];i.children=h}return{$$typeof:Hl,type:t.type,key:s,ref:o,props:i,_owner:l}};Te.createContext=function(t){return t={$$typeof:ZI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:qI,_context:t},t.Consumer=t};Te.createElement=Iy;Te.createFactory=function(t){var e=Iy.bind(null,t);return e.type=t,e};Te.createRef=function(){return{current:null}};Te.forwardRef=function(t){return{$$typeof:KI,render:t}};Te.isValidElement=Ip;Te.lazy=function(t){return{$$typeof:YI,_payload:{_status:-1,_result:t},_init:tP}};Te.memo=function(t,e){return{$$typeof:QI,type:t,compare:e===void 0?null:e}};Te.startTransition=function(t){var e=mc.transition;mc.transition={};try{t()}finally{mc.transition=e}};Te.unstable_act=Py;Te.useCallback=function(t,e){return Wt.current.useCallback(t,e)};Te.useContext=function(t){return Wt.current.useContext(t)};Te.useDebugValue=function(){};Te.useDeferredValue=function(t){return Wt.current.useDeferredValue(t)};Te.useEffect=function(t,e){return Wt.current.useEffect(t,e)};Te.useId=function(){return Wt.current.useId()};Te.useImperativeHandle=function(t,e,n){return Wt.current.useImperativeHandle(t,e,n)};Te.useInsertionEffect=function(t,e){return Wt.current.useInsertionEffect(t,e)};Te.useLayoutEffect=function(t,e){return Wt.current.useLayoutEffect(t,e)};Te.useMemo=function(t,e){return Wt.current.useMemo(t,e)};Te.useReducer=function(t,e,n){return Wt.current.useReducer(t,e,n)};Te.useRef=function(t){return Wt.current.useRef(t)};Te.useState=function(t){return Wt.current.useState(t)};Te.useSyncExternalStore=function(t,e,n){return Wt.current.useSyncExternalStore(t,e,n)};Te.useTransition=function(){return Wt.current.useTransition()};Te.version="18.3.1";gy.exports=Te;var $=gy.exports;const Dc=py($),iP=UI({__proto__:null,default:Dc},[$]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rP=$,sP=Symbol.for("react.element"),oP=Symbol.for("react.fragment"),aP=Object.prototype.hasOwnProperty,lP=rP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,uP={key:!0,ref:!0,__self:!0,__source:!0};function Sy(t,e,n){var i,s={},o=null,l=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(l=e.ref);for(i in e)aP.call(e,i)&&!uP.hasOwnProperty(i)&&(s[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:sP,type:t,key:o,ref:l,props:s,_owner:lP.current}}Ph.Fragment=oP;Ph.jsx=Sy;Ph.jsxs=Sy;my.exports=Ph;var re=my.exports,Ay={exports:{}},an={},Cy={exports:{}},Ry={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,ue){var Y=H.length;H.push(ue);e:for(;0<Y;){var he=Y-1>>>1,ve=H[he];if(0<s(ve,ue))H[he]=ue,H[Y]=ve,Y=he;else break e}}function n(H){return H.length===0?null:H[0]}function i(H){if(H.length===0)return null;var ue=H[0],Y=H.pop();if(Y!==ue){H[0]=Y;e:for(var he=0,ve=H.length,Ie=ve>>>1;he<Ie;){var Le=2*(he+1)-1,ye=H[Le],pe=Le+1,ht=H[pe];if(0>s(ye,Y))pe<ve&&0>s(ht,ye)?(H[he]=ht,H[pe]=Y,he=pe):(H[he]=ye,H[Le]=Y,he=Le);else if(pe<ve&&0>s(ht,Y))H[he]=ht,H[pe]=Y,he=pe;else break e}}return ue}function s(H,ue){var Y=H.sortIndex-ue.sortIndex;return Y!==0?Y:H.id-ue.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,h=l.now();t.unstable_now=function(){return l.now()-h}}var d=[],m=[],v=1,y=null,T=3,N=!1,D=!1,b=!1,U=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(H){for(var ue=n(m);ue!==null;){if(ue.callback===null)i(m);else if(ue.startTime<=H)i(m),ue.sortIndex=ue.expirationTime,e(d,ue);else break;ue=n(m)}}function W(H){if(b=!1,k(H),!D)if(n(d)!==null)D=!0,ct(G);else{var ue=n(m);ue!==null&&Ft(W,ue.startTime-H)}}function G(H,ue){D=!1,b&&(b=!1,A(I),I=-1),N=!0;var Y=T;try{for(k(ue),y=n(d);y!==null&&(!(y.expirationTime>ue)||H&&!M());){var he=y.callback;if(typeof he=="function"){y.callback=null,T=y.priorityLevel;var ve=he(y.expirationTime<=ue);ue=t.unstable_now(),typeof ve=="function"?y.callback=ve:y===n(d)&&i(d),k(ue)}else i(d);y=n(d)}if(y!==null)var Ie=!0;else{var Le=n(m);Le!==null&&Ft(W,Le.startTime-ue),Ie=!1}return Ie}finally{y=null,T=Y,N=!1}}var X=!1,C=null,I=-1,S=5,x=-1;function M(){return!(t.unstable_now()-x<S)}function V(){if(C!==null){var H=t.unstable_now();x=H;var ue=!0;try{ue=C(!0,H)}finally{ue?O():(X=!1,C=null)}}else X=!1}var O;if(typeof P=="function")O=function(){P(V)};else if(typeof MessageChannel<"u"){var Ye=new MessageChannel,ti=Ye.port2;Ye.port1.onmessage=V,O=function(){ti.postMessage(null)}}else O=function(){U(V,0)};function ct(H){C=H,X||(X=!0,O())}function Ft(H,ue){I=U(function(){H(t.unstable_now())},ue)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){D||N||(D=!0,ct(G))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return T},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(H){switch(T){case 1:case 2:case 3:var ue=3;break;default:ue=T}var Y=T;T=ue;try{return H()}finally{T=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,ue){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var Y=T;T=H;try{return ue()}finally{T=Y}},t.unstable_scheduleCallback=function(H,ue,Y){var he=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?he+Y:he):Y=he,H){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=Y+ve,H={id:v++,callback:ue,priorityLevel:H,startTime:Y,expirationTime:ve,sortIndex:-1},Y>he?(H.sortIndex=Y,e(m,H),n(d)===null&&H===n(m)&&(b?(A(I),I=-1):b=!0,Ft(W,Y-he))):(H.sortIndex=ve,e(d,H),D||N||(D=!0,ct(G))),H},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(H){var ue=T;return function(){var Y=T;T=ue;try{return H.apply(this,arguments)}finally{T=Y}}}})(Ry);Cy.exports=Ry;var cP=Cy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hP=$,on=cP;function Q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ky=new Set,fl={};function hs(t,e){Io(t,e),Io(t+"Capture",e)}function Io(t,e){for(fl[t]=e,t=0;t<e.length;t++)ky.add(e[t])}var Pi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yd=Object.prototype.hasOwnProperty,dP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,bg={},Vg={};function fP(t){return Yd.call(Vg,t)?!0:Yd.call(bg,t)?!1:dP.test(t)?Vg[t]=!0:(bg[t]=!0,!1)}function pP(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function mP(t,e,n,i){if(e===null||typeof e>"u"||pP(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ht(t,e,n,i,s,o,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=l}var Ct={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ct[t]=new Ht(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ct[e]=new Ht(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ct[t]=new Ht(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ct[t]=new Ht(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ct[t]=new Ht(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ct[t]=new Ht(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ct[t]=new Ht(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ct[t]=new Ht(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ct[t]=new Ht(t,5,!1,t.toLowerCase(),null,!1,!1)});var Pp=/[\-:]([a-z])/g;function Sp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Pp,Sp);Ct[e]=new Ht(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Pp,Sp);Ct[e]=new Ht(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Pp,Sp);Ct[e]=new Ht(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ct[t]=new Ht(t,1,!1,t.toLowerCase(),null,!1,!1)});Ct.xlinkHref=new Ht("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ct[t]=new Ht(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ap(t,e,n,i){var s=Ct.hasOwnProperty(e)?Ct[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(mP(e,n,s,i)&&(n=null),i||s===null?fP(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,i=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Oi=hP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,qu=Symbol.for("react.element"),Js=Symbol.for("react.portal"),eo=Symbol.for("react.fragment"),Cp=Symbol.for("react.strict_mode"),Xd=Symbol.for("react.profiler"),xy=Symbol.for("react.provider"),Ly=Symbol.for("react.context"),Rp=Symbol.for("react.forward_ref"),Jd=Symbol.for("react.suspense"),ef=Symbol.for("react.suspense_list"),kp=Symbol.for("react.memo"),Zi=Symbol.for("react.lazy"),Oy=Symbol.for("react.offscreen"),Fg=Symbol.iterator;function La(t){return t===null||typeof t!="object"?null:(t=Fg&&t[Fg]||t["@@iterator"],typeof t=="function"?t:null)}var Ge=Object.assign,pd;function Ua(t){if(pd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);pd=e&&e[1]||""}return`
`+pd+t}var md=!1;function gd(t,e){if(!t||md)return"";md=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(m){var i=m}Reflect.construct(t,[],e)}else{try{e.call()}catch(m){i=m}t.call(e.prototype)}else{try{throw Error()}catch(m){i=m}t()}}catch(m){if(m&&i&&typeof m.stack=="string"){for(var s=m.stack.split(`
`),o=i.stack.split(`
`),l=s.length-1,h=o.length-1;1<=l&&0<=h&&s[l]!==o[h];)h--;for(;1<=l&&0<=h;l--,h--)if(s[l]!==o[h]){if(l!==1||h!==1)do if(l--,h--,0>h||s[l]!==o[h]){var d=`
`+s[l].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=l&&0<=h);break}}}finally{md=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ua(t):""}function gP(t){switch(t.tag){case 5:return Ua(t.type);case 16:return Ua("Lazy");case 13:return Ua("Suspense");case 19:return Ua("SuspenseList");case 0:case 2:case 15:return t=gd(t.type,!1),t;case 11:return t=gd(t.type.render,!1),t;case 1:return t=gd(t.type,!0),t;default:return""}}function tf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case eo:return"Fragment";case Js:return"Portal";case Xd:return"Profiler";case Cp:return"StrictMode";case Jd:return"Suspense";case ef:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Ly:return(t.displayName||"Context")+".Consumer";case xy:return(t._context.displayName||"Context")+".Provider";case Rp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case kp:return e=t.displayName||null,e!==null?e:tf(t.type)||"Memo";case Zi:e=t._payload,t=t._init;try{return tf(t(e))}catch{}}return null}function _P(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return tf(e);case 8:return e===Cp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function vr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ny(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function vP(t){var e=Ny(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(l){i=""+l,o.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(l){i=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Zu(t){t._valueTracker||(t._valueTracker=vP(t))}function My(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=Ny(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function bc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function nf(t,e){var n=e.checked;return Ge({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function zg(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=vr(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Dy(t,e){e=e.checked,e!=null&&Ap(t,"checked",e,!1)}function rf(t,e){Dy(t,e);var n=vr(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?sf(t,e.type,n):e.hasOwnProperty("defaultValue")&&sf(t,e.type,vr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ug(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function sf(t,e,n){(e!=="number"||bc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ba=Array.isArray;function fo(t,e,n,i){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&i&&(t[n].defaultSelected=!0)}else{for(n=""+vr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,i&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function of(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Q(91));return Ge({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Bg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Q(92));if(Ba(n)){if(1<n.length)throw Error(Q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:vr(n)}}function by(t,e){var n=vr(e.value),i=vr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function jg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Vy(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function af(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Vy(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ku,Fy=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ku=Ku||document.createElement("div"),Ku.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ku.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function pl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ya={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},yP=["Webkit","ms","Moz","O"];Object.keys(Ya).forEach(function(t){yP.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ya[e]=Ya[t]})});function zy(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ya.hasOwnProperty(t)&&Ya[t]?(""+e).trim():e+"px"}function Uy(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,s=zy(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,s):t[n]=s}}var wP=Ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function lf(t,e){if(e){if(wP[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Q(62))}}function uf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cf=null;function xp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var hf=null,po=null,mo=null;function Wg(t){if(t=Zl(t)){if(typeof hf!="function")throw Error(Q(280));var e=t.stateNode;e&&(e=kh(e),hf(t.stateNode,t.type,e))}}function By(t){po?mo?mo.push(t):mo=[t]:po=t}function jy(){if(po){var t=po,e=mo;if(mo=po=null,Wg(t),e)for(t=0;t<e.length;t++)Wg(e[t])}}function Wy(t,e){return t(e)}function Hy(){}var _d=!1;function $y(t,e,n){if(_d)return t(e,n);_d=!0;try{return Wy(t,e,n)}finally{_d=!1,(po!==null||mo!==null)&&(Hy(),jy())}}function ml(t,e){var n=t.stateNode;if(n===null)return null;var i=kh(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Q(231,e,typeof n));return n}var df=!1;if(Pi)try{var Oa={};Object.defineProperty(Oa,"passive",{get:function(){df=!0}}),window.addEventListener("test",Oa,Oa),window.removeEventListener("test",Oa,Oa)}catch{df=!1}function EP(t,e,n,i,s,o,l,h,d){var m=Array.prototype.slice.call(arguments,3);try{e.apply(n,m)}catch(v){this.onError(v)}}var Xa=!1,Vc=null,Fc=!1,ff=null,TP={onError:function(t){Xa=!0,Vc=t}};function IP(t,e,n,i,s,o,l,h,d){Xa=!1,Vc=null,EP.apply(TP,arguments)}function PP(t,e,n,i,s,o,l,h,d){if(IP.apply(this,arguments),Xa){if(Xa){var m=Vc;Xa=!1,Vc=null}else throw Error(Q(198));Fc||(Fc=!0,ff=m)}}function ds(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function qy(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Hg(t){if(ds(t)!==t)throw Error(Q(188))}function SP(t){var e=t.alternate;if(!e){if(e=ds(t),e===null)throw Error(Q(188));return e!==t?null:t}for(var n=t,i=e;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return Hg(s),t;if(o===i)return Hg(s),e;o=o.sibling}throw Error(Q(188))}if(n.return!==i.return)n=s,i=o;else{for(var l=!1,h=s.child;h;){if(h===n){l=!0,n=s,i=o;break}if(h===i){l=!0,i=s,n=o;break}h=h.sibling}if(!l){for(h=o.child;h;){if(h===n){l=!0,n=o,i=s;break}if(h===i){l=!0,i=o,n=s;break}h=h.sibling}if(!l)throw Error(Q(189))}}if(n.alternate!==i)throw Error(Q(190))}if(n.tag!==3)throw Error(Q(188));return n.stateNode.current===n?t:e}function Zy(t){return t=SP(t),t!==null?Ky(t):null}function Ky(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Ky(t);if(e!==null)return e;t=t.sibling}return null}var Gy=on.unstable_scheduleCallback,$g=on.unstable_cancelCallback,AP=on.unstable_shouldYield,CP=on.unstable_requestPaint,nt=on.unstable_now,RP=on.unstable_getCurrentPriorityLevel,Lp=on.unstable_ImmediatePriority,Qy=on.unstable_UserBlockingPriority,zc=on.unstable_NormalPriority,kP=on.unstable_LowPriority,Yy=on.unstable_IdlePriority,Sh=null,Kn=null;function xP(t){if(Kn&&typeof Kn.onCommitFiberRoot=="function")try{Kn.onCommitFiberRoot(Sh,t,void 0,(t.current.flags&128)===128)}catch{}}var Mn=Math.clz32?Math.clz32:NP,LP=Math.log,OP=Math.LN2;function NP(t){return t>>>=0,t===0?32:31-(LP(t)/OP|0)|0}var Gu=64,Qu=4194304;function ja(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Uc(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,s=t.suspendedLanes,o=t.pingedLanes,l=n&268435455;if(l!==0){var h=l&~s;h!==0?i=ja(h):(o&=l,o!==0&&(i=ja(o)))}else l=n&~s,l!==0?i=ja(l):o!==0&&(i=ja(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Mn(e),s=1<<n,i|=t[n],e&=~s;return i}function MP(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function DP(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,o=t.pendingLanes;0<o;){var l=31-Mn(o),h=1<<l,d=s[l];d===-1?(!(h&n)||h&i)&&(s[l]=MP(h,e)):d<=e&&(t.expiredLanes|=h),o&=~h}}function pf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Xy(){var t=Gu;return Gu<<=1,!(Gu&4194240)&&(Gu=64),t}function vd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function $l(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Mn(e),t[e]=n}function bP(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Mn(n),o=1<<s;e[s]=0,i[s]=-1,t[s]=-1,n&=~o}}function Op(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Mn(n),s=1<<i;s&e|t[i]&e&&(t[i]|=e),n&=~s}}var Ne=0;function Jy(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ew,Np,tw,nw,iw,mf=!1,Yu=[],sr=null,or=null,ar=null,gl=new Map,_l=new Map,Gi=[],VP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qg(t,e){switch(t){case"focusin":case"focusout":sr=null;break;case"dragenter":case"dragleave":or=null;break;case"mouseover":case"mouseout":ar=null;break;case"pointerover":case"pointerout":gl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":_l.delete(e.pointerId)}}function Na(t,e,n,i,s,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[s]},e!==null&&(e=Zl(e),e!==null&&Np(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function FP(t,e,n,i,s){switch(e){case"focusin":return sr=Na(sr,t,e,n,i,s),!0;case"dragenter":return or=Na(or,t,e,n,i,s),!0;case"mouseover":return ar=Na(ar,t,e,n,i,s),!0;case"pointerover":var o=s.pointerId;return gl.set(o,Na(gl.get(o)||null,t,e,n,i,s)),!0;case"gotpointercapture":return o=s.pointerId,_l.set(o,Na(_l.get(o)||null,t,e,n,i,s)),!0}return!1}function rw(t){var e=qr(t.target);if(e!==null){var n=ds(e);if(n!==null){if(e=n.tag,e===13){if(e=qy(n),e!==null){t.blockedOn=e,iw(t.priority,function(){tw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function gc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=gf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);cf=i,n.target.dispatchEvent(i),cf=null}else return e=Zl(n),e!==null&&Np(e),t.blockedOn=n,!1;e.shift()}return!0}function Zg(t,e,n){gc(t)&&n.delete(e)}function zP(){mf=!1,sr!==null&&gc(sr)&&(sr=null),or!==null&&gc(or)&&(or=null),ar!==null&&gc(ar)&&(ar=null),gl.forEach(Zg),_l.forEach(Zg)}function Ma(t,e){t.blockedOn===e&&(t.blockedOn=null,mf||(mf=!0,on.unstable_scheduleCallback(on.unstable_NormalPriority,zP)))}function vl(t){function e(s){return Ma(s,t)}if(0<Yu.length){Ma(Yu[0],t);for(var n=1;n<Yu.length;n++){var i=Yu[n];i.blockedOn===t&&(i.blockedOn=null)}}for(sr!==null&&Ma(sr,t),or!==null&&Ma(or,t),ar!==null&&Ma(ar,t),gl.forEach(e),_l.forEach(e),n=0;n<Gi.length;n++)i=Gi[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Gi.length&&(n=Gi[0],n.blockedOn===null);)rw(n),n.blockedOn===null&&Gi.shift()}var go=Oi.ReactCurrentBatchConfig,Bc=!0;function UP(t,e,n,i){var s=Ne,o=go.transition;go.transition=null;try{Ne=1,Mp(t,e,n,i)}finally{Ne=s,go.transition=o}}function BP(t,e,n,i){var s=Ne,o=go.transition;go.transition=null;try{Ne=4,Mp(t,e,n,i)}finally{Ne=s,go.transition=o}}function Mp(t,e,n,i){if(Bc){var s=gf(t,e,n,i);if(s===null)Rd(t,e,i,jc,n),qg(t,i);else if(FP(s,t,e,n,i))i.stopPropagation();else if(qg(t,i),e&4&&-1<VP.indexOf(t)){for(;s!==null;){var o=Zl(s);if(o!==null&&ew(o),o=gf(t,e,n,i),o===null&&Rd(t,e,i,jc,n),o===s)break;s=o}s!==null&&i.stopPropagation()}else Rd(t,e,i,null,n)}}var jc=null;function gf(t,e,n,i){if(jc=null,t=xp(i),t=qr(t),t!==null)if(e=ds(t),e===null)t=null;else if(n=e.tag,n===13){if(t=qy(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return jc=t,null}function sw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(RP()){case Lp:return 1;case Qy:return 4;case zc:case kP:return 16;case Yy:return 536870912;default:return 16}default:return 16}}var tr=null,Dp=null,_c=null;function ow(){if(_c)return _c;var t,e=Dp,n=e.length,i,s="value"in tr?tr.value:tr.textContent,o=s.length;for(t=0;t<n&&e[t]===s[t];t++);var l=n-t;for(i=1;i<=l&&e[n-i]===s[o-i];i++);return _c=s.slice(t,1<i?1-i:void 0)}function vc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Xu(){return!0}function Kg(){return!1}function ln(t){function e(n,i,s,o,l){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var h in t)t.hasOwnProperty(h)&&(n=t[h],this[h]=n?n(o):o[h]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Xu:Kg,this.isPropagationStopped=Kg,this}return Ge(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Xu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Xu)},persist:function(){},isPersistent:Xu}),e}var zo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bp=ln(zo),ql=Ge({},zo,{view:0,detail:0}),jP=ln(ql),yd,wd,Da,Ah=Ge({},ql,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Da&&(Da&&t.type==="mousemove"?(yd=t.screenX-Da.screenX,wd=t.screenY-Da.screenY):wd=yd=0,Da=t),yd)},movementY:function(t){return"movementY"in t?t.movementY:wd}}),Gg=ln(Ah),WP=Ge({},Ah,{dataTransfer:0}),HP=ln(WP),$P=Ge({},ql,{relatedTarget:0}),Ed=ln($P),qP=Ge({},zo,{animationName:0,elapsedTime:0,pseudoElement:0}),ZP=ln(qP),KP=Ge({},zo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),GP=ln(KP),QP=Ge({},zo,{data:0}),Qg=ln(QP),YP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},XP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},JP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function eS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=JP[t])?!!e[t]:!1}function Vp(){return eS}var tS=Ge({},ql,{key:function(t){if(t.key){var e=YP[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=vc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?XP[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vp,charCode:function(t){return t.type==="keypress"?vc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?vc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),nS=ln(tS),iS=Ge({},Ah,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yg=ln(iS),rS=Ge({},ql,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vp}),sS=ln(rS),oS=Ge({},zo,{propertyName:0,elapsedTime:0,pseudoElement:0}),aS=ln(oS),lS=Ge({},Ah,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),uS=ln(lS),cS=[9,13,27,32],Fp=Pi&&"CompositionEvent"in window,Ja=null;Pi&&"documentMode"in document&&(Ja=document.documentMode);var hS=Pi&&"TextEvent"in window&&!Ja,aw=Pi&&(!Fp||Ja&&8<Ja&&11>=Ja),Xg=" ",Jg=!1;function lw(t,e){switch(t){case"keyup":return cS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function uw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var to=!1;function dS(t,e){switch(t){case"compositionend":return uw(e);case"keypress":return e.which!==32?null:(Jg=!0,Xg);case"textInput":return t=e.data,t===Xg&&Jg?null:t;default:return null}}function fS(t,e){if(to)return t==="compositionend"||!Fp&&lw(t,e)?(t=ow(),_c=Dp=tr=null,to=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return aw&&e.locale!=="ko"?null:e.data;default:return null}}var pS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function e_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!pS[t.type]:e==="textarea"}function cw(t,e,n,i){By(i),e=Wc(e,"onChange"),0<e.length&&(n=new bp("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var el=null,yl=null;function mS(t){Ew(t,0)}function Ch(t){var e=ro(t);if(My(e))return t}function gS(t,e){if(t==="change")return e}var hw=!1;if(Pi){var Td;if(Pi){var Id="oninput"in document;if(!Id){var t_=document.createElement("div");t_.setAttribute("oninput","return;"),Id=typeof t_.oninput=="function"}Td=Id}else Td=!1;hw=Td&&(!document.documentMode||9<document.documentMode)}function n_(){el&&(el.detachEvent("onpropertychange",dw),yl=el=null)}function dw(t){if(t.propertyName==="value"&&Ch(yl)){var e=[];cw(e,yl,t,xp(t)),$y(mS,e)}}function _S(t,e,n){t==="focusin"?(n_(),el=e,yl=n,el.attachEvent("onpropertychange",dw)):t==="focusout"&&n_()}function vS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ch(yl)}function yS(t,e){if(t==="click")return Ch(e)}function wS(t,e){if(t==="input"||t==="change")return Ch(e)}function ES(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var bn=typeof Object.is=="function"?Object.is:ES;function wl(t,e){if(bn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!Yd.call(e,s)||!bn(t[s],e[s]))return!1}return!0}function i_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function r_(t,e){var n=i_(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=i_(n)}}function fw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?fw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function pw(){for(var t=window,e=bc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=bc(t.document)}return e}function zp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function TS(t){var e=pw(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&fw(n.ownerDocument.documentElement,n)){if(i!==null&&zp(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,o=Math.min(i.start,s);i=i.end===void 0?o:Math.min(i.end,s),!t.extend&&o>i&&(s=i,i=o,o=s),s=r_(n,o);var l=r_(n,i);s&&l&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var IS=Pi&&"documentMode"in document&&11>=document.documentMode,no=null,_f=null,tl=null,vf=!1;function s_(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;vf||no==null||no!==bc(i)||(i=no,"selectionStart"in i&&zp(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),tl&&wl(tl,i)||(tl=i,i=Wc(_f,"onSelect"),0<i.length&&(e=new bp("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=no)))}function Ju(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var io={animationend:Ju("Animation","AnimationEnd"),animationiteration:Ju("Animation","AnimationIteration"),animationstart:Ju("Animation","AnimationStart"),transitionend:Ju("Transition","TransitionEnd")},Pd={},mw={};Pi&&(mw=document.createElement("div").style,"AnimationEvent"in window||(delete io.animationend.animation,delete io.animationiteration.animation,delete io.animationstart.animation),"TransitionEvent"in window||delete io.transitionend.transition);function Rh(t){if(Pd[t])return Pd[t];if(!io[t])return t;var e=io[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in mw)return Pd[t]=e[n];return t}var gw=Rh("animationend"),_w=Rh("animationiteration"),vw=Rh("animationstart"),yw=Rh("transitionend"),ww=new Map,o_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ir(t,e){ww.set(t,e),hs(e,[t])}for(var Sd=0;Sd<o_.length;Sd++){var Ad=o_[Sd],PS=Ad.toLowerCase(),SS=Ad[0].toUpperCase()+Ad.slice(1);Ir(PS,"on"+SS)}Ir(gw,"onAnimationEnd");Ir(_w,"onAnimationIteration");Ir(vw,"onAnimationStart");Ir("dblclick","onDoubleClick");Ir("focusin","onFocus");Ir("focusout","onBlur");Ir(yw,"onTransitionEnd");Io("onMouseEnter",["mouseout","mouseover"]);Io("onMouseLeave",["mouseout","mouseover"]);Io("onPointerEnter",["pointerout","pointerover"]);Io("onPointerLeave",["pointerout","pointerover"]);hs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));hs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));hs("onBeforeInput",["compositionend","keypress","textInput","paste"]);hs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));hs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));hs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AS=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wa));function a_(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,PP(i,e,void 0,t),t.currentTarget=null}function Ew(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],s=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var l=i.length-1;0<=l;l--){var h=i[l],d=h.instance,m=h.currentTarget;if(h=h.listener,d!==o&&s.isPropagationStopped())break e;a_(s,h,m),o=d}else for(l=0;l<i.length;l++){if(h=i[l],d=h.instance,m=h.currentTarget,h=h.listener,d!==o&&s.isPropagationStopped())break e;a_(s,h,m),o=d}}}if(Fc)throw t=ff,Fc=!1,ff=null,t}function ze(t,e){var n=e[If];n===void 0&&(n=e[If]=new Set);var i=t+"__bubble";n.has(i)||(Tw(e,t,2,!1),n.add(i))}function Cd(t,e,n){var i=0;e&&(i|=4),Tw(n,t,i,e)}var ec="_reactListening"+Math.random().toString(36).slice(2);function El(t){if(!t[ec]){t[ec]=!0,ky.forEach(function(n){n!=="selectionchange"&&(AS.has(n)||Cd(n,!1,t),Cd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ec]||(e[ec]=!0,Cd("selectionchange",!1,e))}}function Tw(t,e,n,i){switch(sw(e)){case 1:var s=UP;break;case 4:s=BP;break;default:s=Mp}n=s.bind(null,e,n,t),s=void 0,!df||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Rd(t,e,n,i,s){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var l=i.tag;if(l===3||l===4){var h=i.stateNode.containerInfo;if(h===s||h.nodeType===8&&h.parentNode===s)break;if(l===4)for(l=i.return;l!==null;){var d=l.tag;if((d===3||d===4)&&(d=l.stateNode.containerInfo,d===s||d.nodeType===8&&d.parentNode===s))return;l=l.return}for(;h!==null;){if(l=qr(h),l===null)return;if(d=l.tag,d===5||d===6){i=o=l;continue e}h=h.parentNode}}i=i.return}$y(function(){var m=o,v=xp(n),y=[];e:{var T=ww.get(t);if(T!==void 0){var N=bp,D=t;switch(t){case"keypress":if(vc(n)===0)break e;case"keydown":case"keyup":N=nS;break;case"focusin":D="focus",N=Ed;break;case"focusout":D="blur",N=Ed;break;case"beforeblur":case"afterblur":N=Ed;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":N=Gg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":N=HP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":N=sS;break;case gw:case _w:case vw:N=ZP;break;case yw:N=aS;break;case"scroll":N=jP;break;case"wheel":N=uS;break;case"copy":case"cut":case"paste":N=GP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":N=Yg}var b=(e&4)!==0,U=!b&&t==="scroll",A=b?T!==null?T+"Capture":null:T;b=[];for(var P=m,k;P!==null;){k=P;var W=k.stateNode;if(k.tag===5&&W!==null&&(k=W,A!==null&&(W=ml(P,A),W!=null&&b.push(Tl(P,W,k)))),U)break;P=P.return}0<b.length&&(T=new N(T,D,null,n,v),y.push({event:T,listeners:b}))}}if(!(e&7)){e:{if(T=t==="mouseover"||t==="pointerover",N=t==="mouseout"||t==="pointerout",T&&n!==cf&&(D=n.relatedTarget||n.fromElement)&&(qr(D)||D[Si]))break e;if((N||T)&&(T=v.window===v?v:(T=v.ownerDocument)?T.defaultView||T.parentWindow:window,N?(D=n.relatedTarget||n.toElement,N=m,D=D?qr(D):null,D!==null&&(U=ds(D),D!==U||D.tag!==5&&D.tag!==6)&&(D=null)):(N=null,D=m),N!==D)){if(b=Gg,W="onMouseLeave",A="onMouseEnter",P="mouse",(t==="pointerout"||t==="pointerover")&&(b=Yg,W="onPointerLeave",A="onPointerEnter",P="pointer"),U=N==null?T:ro(N),k=D==null?T:ro(D),T=new b(W,P+"leave",N,n,v),T.target=U,T.relatedTarget=k,W=null,qr(v)===m&&(b=new b(A,P+"enter",D,n,v),b.target=k,b.relatedTarget=U,W=b),U=W,N&&D)t:{for(b=N,A=D,P=0,k=b;k;k=Gs(k))P++;for(k=0,W=A;W;W=Gs(W))k++;for(;0<P-k;)b=Gs(b),P--;for(;0<k-P;)A=Gs(A),k--;for(;P--;){if(b===A||A!==null&&b===A.alternate)break t;b=Gs(b),A=Gs(A)}b=null}else b=null;N!==null&&l_(y,T,N,b,!1),D!==null&&U!==null&&l_(y,U,D,b,!0)}}e:{if(T=m?ro(m):window,N=T.nodeName&&T.nodeName.toLowerCase(),N==="select"||N==="input"&&T.type==="file")var G=gS;else if(e_(T))if(hw)G=wS;else{G=vS;var X=_S}else(N=T.nodeName)&&N.toLowerCase()==="input"&&(T.type==="checkbox"||T.type==="radio")&&(G=yS);if(G&&(G=G(t,m))){cw(y,G,n,v);break e}X&&X(t,T,m),t==="focusout"&&(X=T._wrapperState)&&X.controlled&&T.type==="number"&&sf(T,"number",T.value)}switch(X=m?ro(m):window,t){case"focusin":(e_(X)||X.contentEditable==="true")&&(no=X,_f=m,tl=null);break;case"focusout":tl=_f=no=null;break;case"mousedown":vf=!0;break;case"contextmenu":case"mouseup":case"dragend":vf=!1,s_(y,n,v);break;case"selectionchange":if(IS)break;case"keydown":case"keyup":s_(y,n,v)}var C;if(Fp)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else to?lw(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(aw&&n.locale!=="ko"&&(to||I!=="onCompositionStart"?I==="onCompositionEnd"&&to&&(C=ow()):(tr=v,Dp="value"in tr?tr.value:tr.textContent,to=!0)),X=Wc(m,I),0<X.length&&(I=new Qg(I,t,null,n,v),y.push({event:I,listeners:X}),C?I.data=C:(C=uw(n),C!==null&&(I.data=C)))),(C=hS?dS(t,n):fS(t,n))&&(m=Wc(m,"onBeforeInput"),0<m.length&&(v=new Qg("onBeforeInput","beforeinput",null,n,v),y.push({event:v,listeners:m}),v.data=C))}Ew(y,e)})}function Tl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Wc(t,e){for(var n=e+"Capture",i=[];t!==null;){var s=t,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=ml(t,n),o!=null&&i.unshift(Tl(t,o,s)),o=ml(t,e),o!=null&&i.push(Tl(t,o,s))),t=t.return}return i}function Gs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function l_(t,e,n,i,s){for(var o=e._reactName,l=[];n!==null&&n!==i;){var h=n,d=h.alternate,m=h.stateNode;if(d!==null&&d===i)break;h.tag===5&&m!==null&&(h=m,s?(d=ml(n,o),d!=null&&l.unshift(Tl(n,d,h))):s||(d=ml(n,o),d!=null&&l.push(Tl(n,d,h)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var CS=/\r\n?/g,RS=/\u0000|\uFFFD/g;function u_(t){return(typeof t=="string"?t:""+t).replace(CS,`
`).replace(RS,"")}function tc(t,e,n){if(e=u_(e),u_(t)!==e&&n)throw Error(Q(425))}function Hc(){}var yf=null,wf=null;function Ef(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Tf=typeof setTimeout=="function"?setTimeout:void 0,kS=typeof clearTimeout=="function"?clearTimeout:void 0,c_=typeof Promise=="function"?Promise:void 0,xS=typeof queueMicrotask=="function"?queueMicrotask:typeof c_<"u"?function(t){return c_.resolve(null).then(t).catch(LS)}:Tf;function LS(t){setTimeout(function(){throw t})}function kd(t,e){var n=e,i=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(i===0){t.removeChild(s),vl(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=s}while(n);vl(e)}function lr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function h_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Uo=Math.random().toString(36).slice(2),qn="__reactFiber$"+Uo,Il="__reactProps$"+Uo,Si="__reactContainer$"+Uo,If="__reactEvents$"+Uo,OS="__reactListeners$"+Uo,NS="__reactHandles$"+Uo;function qr(t){var e=t[qn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Si]||n[qn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=h_(t);t!==null;){if(n=t[qn])return n;t=h_(t)}return e}t=n,n=t.parentNode}return null}function Zl(t){return t=t[qn]||t[Si],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ro(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Q(33))}function kh(t){return t[Il]||null}var Pf=[],so=-1;function Pr(t){return{current:t}}function Be(t){0>so||(t.current=Pf[so],Pf[so]=null,so--)}function Fe(t,e){so++,Pf[so]=t.current,t.current=e}var yr={},Dt=Pr(yr),Gt=Pr(!1),es=yr;function Po(t,e){var n=t.type.contextTypes;if(!n)return yr;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Qt(t){return t=t.childContextTypes,t!=null}function $c(){Be(Gt),Be(Dt)}function d_(t,e,n){if(Dt.current!==yr)throw Error(Q(168));Fe(Dt,e),Fe(Gt,n)}function Iw(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(Q(108,_P(t)||"Unknown",s));return Ge({},n,i)}function qc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||yr,es=Dt.current,Fe(Dt,t),Fe(Gt,Gt.current),!0}function f_(t,e,n){var i=t.stateNode;if(!i)throw Error(Q(169));n?(t=Iw(t,e,es),i.__reactInternalMemoizedMergedChildContext=t,Be(Gt),Be(Dt),Fe(Dt,t)):Be(Gt),Fe(Gt,n)}var mi=null,xh=!1,xd=!1;function Pw(t){mi===null?mi=[t]:mi.push(t)}function MS(t){xh=!0,Pw(t)}function Sr(){if(!xd&&mi!==null){xd=!0;var t=0,e=Ne;try{var n=mi;for(Ne=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}mi=null,xh=!1}catch(s){throw mi!==null&&(mi=mi.slice(t+1)),Gy(Lp,Sr),s}finally{Ne=e,xd=!1}}return null}var oo=[],ao=0,Zc=null,Kc=0,_n=[],vn=0,ts=null,gi=1,_i="";function Wr(t,e){oo[ao++]=Kc,oo[ao++]=Zc,Zc=t,Kc=e}function Sw(t,e,n){_n[vn++]=gi,_n[vn++]=_i,_n[vn++]=ts,ts=t;var i=gi;t=_i;var s=32-Mn(i)-1;i&=~(1<<s),n+=1;var o=32-Mn(e)+s;if(30<o){var l=s-s%5;o=(i&(1<<l)-1).toString(32),i>>=l,s-=l,gi=1<<32-Mn(e)+s|n<<s|i,_i=o+t}else gi=1<<o|n<<s|i,_i=t}function Up(t){t.return!==null&&(Wr(t,1),Sw(t,1,0))}function Bp(t){for(;t===Zc;)Zc=oo[--ao],oo[ao]=null,Kc=oo[--ao],oo[ao]=null;for(;t===ts;)ts=_n[--vn],_n[vn]=null,_i=_n[--vn],_n[vn]=null,gi=_n[--vn],_n[vn]=null}var rn=null,nn=null,He=!1,On=null;function Aw(t,e){var n=wn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function p_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,rn=t,nn=lr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,rn=t,nn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ts!==null?{id:gi,overflow:_i}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=wn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,rn=t,nn=null,!0):!1;default:return!1}}function Sf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Af(t){if(He){var e=nn;if(e){var n=e;if(!p_(t,e)){if(Sf(t))throw Error(Q(418));e=lr(n.nextSibling);var i=rn;e&&p_(t,e)?Aw(i,n):(t.flags=t.flags&-4097|2,He=!1,rn=t)}}else{if(Sf(t))throw Error(Q(418));t.flags=t.flags&-4097|2,He=!1,rn=t}}}function m_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;rn=t}function nc(t){if(t!==rn)return!1;if(!He)return m_(t),He=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ef(t.type,t.memoizedProps)),e&&(e=nn)){if(Sf(t))throw Cw(),Error(Q(418));for(;e;)Aw(t,e),e=lr(e.nextSibling)}if(m_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){nn=lr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}nn=null}}else nn=rn?lr(t.stateNode.nextSibling):null;return!0}function Cw(){for(var t=nn;t;)t=lr(t.nextSibling)}function So(){nn=rn=null,He=!1}function jp(t){On===null?On=[t]:On.push(t)}var DS=Oi.ReactCurrentBatchConfig;function ba(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Q(309));var i=n.stateNode}if(!i)throw Error(Q(147,t));var s=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(l){var h=s.refs;l===null?delete h[o]:h[o]=l},e._stringRef=o,e)}if(typeof t!="string")throw Error(Q(284));if(!n._owner)throw Error(Q(290,t))}return t}function ic(t,e){throw t=Object.prototype.toString.call(e),Error(Q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function g_(t){var e=t._init;return e(t._payload)}function Rw(t){function e(A,P){if(t){var k=A.deletions;k===null?(A.deletions=[P],A.flags|=16):k.push(P)}}function n(A,P){if(!t)return null;for(;P!==null;)e(A,P),P=P.sibling;return null}function i(A,P){for(A=new Map;P!==null;)P.key!==null?A.set(P.key,P):A.set(P.index,P),P=P.sibling;return A}function s(A,P){return A=dr(A,P),A.index=0,A.sibling=null,A}function o(A,P,k){return A.index=k,t?(k=A.alternate,k!==null?(k=k.index,k<P?(A.flags|=2,P):k):(A.flags|=2,P)):(A.flags|=1048576,P)}function l(A){return t&&A.alternate===null&&(A.flags|=2),A}function h(A,P,k,W){return P===null||P.tag!==6?(P=Vd(k,A.mode,W),P.return=A,P):(P=s(P,k),P.return=A,P)}function d(A,P,k,W){var G=k.type;return G===eo?v(A,P,k.props.children,W,k.key):P!==null&&(P.elementType===G||typeof G=="object"&&G!==null&&G.$$typeof===Zi&&g_(G)===P.type)?(W=s(P,k.props),W.ref=ba(A,P,k),W.return=A,W):(W=Sc(k.type,k.key,k.props,null,A.mode,W),W.ref=ba(A,P,k),W.return=A,W)}function m(A,P,k,W){return P===null||P.tag!==4||P.stateNode.containerInfo!==k.containerInfo||P.stateNode.implementation!==k.implementation?(P=Fd(k,A.mode,W),P.return=A,P):(P=s(P,k.children||[]),P.return=A,P)}function v(A,P,k,W,G){return P===null||P.tag!==7?(P=Yr(k,A.mode,W,G),P.return=A,P):(P=s(P,k),P.return=A,P)}function y(A,P,k){if(typeof P=="string"&&P!==""||typeof P=="number")return P=Vd(""+P,A.mode,k),P.return=A,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case qu:return k=Sc(P.type,P.key,P.props,null,A.mode,k),k.ref=ba(A,null,P),k.return=A,k;case Js:return P=Fd(P,A.mode,k),P.return=A,P;case Zi:var W=P._init;return y(A,W(P._payload),k)}if(Ba(P)||La(P))return P=Yr(P,A.mode,k,null),P.return=A,P;ic(A,P)}return null}function T(A,P,k,W){var G=P!==null?P.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return G!==null?null:h(A,P,""+k,W);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case qu:return k.key===G?d(A,P,k,W):null;case Js:return k.key===G?m(A,P,k,W):null;case Zi:return G=k._init,T(A,P,G(k._payload),W)}if(Ba(k)||La(k))return G!==null?null:v(A,P,k,W,null);ic(A,k)}return null}function N(A,P,k,W,G){if(typeof W=="string"&&W!==""||typeof W=="number")return A=A.get(k)||null,h(P,A,""+W,G);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case qu:return A=A.get(W.key===null?k:W.key)||null,d(P,A,W,G);case Js:return A=A.get(W.key===null?k:W.key)||null,m(P,A,W,G);case Zi:var X=W._init;return N(A,P,k,X(W._payload),G)}if(Ba(W)||La(W))return A=A.get(k)||null,v(P,A,W,G,null);ic(P,W)}return null}function D(A,P,k,W){for(var G=null,X=null,C=P,I=P=0,S=null;C!==null&&I<k.length;I++){C.index>I?(S=C,C=null):S=C.sibling;var x=T(A,C,k[I],W);if(x===null){C===null&&(C=S);break}t&&C&&x.alternate===null&&e(A,C),P=o(x,P,I),X===null?G=x:X.sibling=x,X=x,C=S}if(I===k.length)return n(A,C),He&&Wr(A,I),G;if(C===null){for(;I<k.length;I++)C=y(A,k[I],W),C!==null&&(P=o(C,P,I),X===null?G=C:X.sibling=C,X=C);return He&&Wr(A,I),G}for(C=i(A,C);I<k.length;I++)S=N(C,A,I,k[I],W),S!==null&&(t&&S.alternate!==null&&C.delete(S.key===null?I:S.key),P=o(S,P,I),X===null?G=S:X.sibling=S,X=S);return t&&C.forEach(function(M){return e(A,M)}),He&&Wr(A,I),G}function b(A,P,k,W){var G=La(k);if(typeof G!="function")throw Error(Q(150));if(k=G.call(k),k==null)throw Error(Q(151));for(var X=G=null,C=P,I=P=0,S=null,x=k.next();C!==null&&!x.done;I++,x=k.next()){C.index>I?(S=C,C=null):S=C.sibling;var M=T(A,C,x.value,W);if(M===null){C===null&&(C=S);break}t&&C&&M.alternate===null&&e(A,C),P=o(M,P,I),X===null?G=M:X.sibling=M,X=M,C=S}if(x.done)return n(A,C),He&&Wr(A,I),G;if(C===null){for(;!x.done;I++,x=k.next())x=y(A,x.value,W),x!==null&&(P=o(x,P,I),X===null?G=x:X.sibling=x,X=x);return He&&Wr(A,I),G}for(C=i(A,C);!x.done;I++,x=k.next())x=N(C,A,I,x.value,W),x!==null&&(t&&x.alternate!==null&&C.delete(x.key===null?I:x.key),P=o(x,P,I),X===null?G=x:X.sibling=x,X=x);return t&&C.forEach(function(V){return e(A,V)}),He&&Wr(A,I),G}function U(A,P,k,W){if(typeof k=="object"&&k!==null&&k.type===eo&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case qu:e:{for(var G=k.key,X=P;X!==null;){if(X.key===G){if(G=k.type,G===eo){if(X.tag===7){n(A,X.sibling),P=s(X,k.props.children),P.return=A,A=P;break e}}else if(X.elementType===G||typeof G=="object"&&G!==null&&G.$$typeof===Zi&&g_(G)===X.type){n(A,X.sibling),P=s(X,k.props),P.ref=ba(A,X,k),P.return=A,A=P;break e}n(A,X);break}else e(A,X);X=X.sibling}k.type===eo?(P=Yr(k.props.children,A.mode,W,k.key),P.return=A,A=P):(W=Sc(k.type,k.key,k.props,null,A.mode,W),W.ref=ba(A,P,k),W.return=A,A=W)}return l(A);case Js:e:{for(X=k.key;P!==null;){if(P.key===X)if(P.tag===4&&P.stateNode.containerInfo===k.containerInfo&&P.stateNode.implementation===k.implementation){n(A,P.sibling),P=s(P,k.children||[]),P.return=A,A=P;break e}else{n(A,P);break}else e(A,P);P=P.sibling}P=Fd(k,A.mode,W),P.return=A,A=P}return l(A);case Zi:return X=k._init,U(A,P,X(k._payload),W)}if(Ba(k))return D(A,P,k,W);if(La(k))return b(A,P,k,W);ic(A,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,P!==null&&P.tag===6?(n(A,P.sibling),P=s(P,k),P.return=A,A=P):(n(A,P),P=Vd(k,A.mode,W),P.return=A,A=P),l(A)):n(A,P)}return U}var Ao=Rw(!0),kw=Rw(!1),Gc=Pr(null),Qc=null,lo=null,Wp=null;function Hp(){Wp=lo=Qc=null}function $p(t){var e=Gc.current;Be(Gc),t._currentValue=e}function Cf(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function _o(t,e){Qc=t,Wp=lo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Kt=!0),t.firstContext=null)}function Tn(t){var e=t._currentValue;if(Wp!==t)if(t={context:t,memoizedValue:e,next:null},lo===null){if(Qc===null)throw Error(Q(308));lo=t,Qc.dependencies={lanes:0,firstContext:t}}else lo=lo.next=t;return e}var Zr=null;function qp(t){Zr===null?Zr=[t]:Zr.push(t)}function xw(t,e,n,i){var s=e.interleaved;return s===null?(n.next=n,qp(e)):(n.next=s.next,s.next=n),e.interleaved=n,Ai(t,i)}function Ai(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ki=!1;function Zp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Lw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ei(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ur(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,ke&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,Ai(t,n)}return s=i.interleaved,s===null?(e.next=e,qp(i)):(e.next=s.next,s.next=e),i.interleaved=e,Ai(t,n)}function yc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Op(t,n)}}function __(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=l:o=o.next=l,n=n.next}while(n!==null);o===null?s=o=e:o=o.next=e}else s=o=e;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Yc(t,e,n,i){var s=t.updateQueue;Ki=!1;var o=s.firstBaseUpdate,l=s.lastBaseUpdate,h=s.shared.pending;if(h!==null){s.shared.pending=null;var d=h,m=d.next;d.next=null,l===null?o=m:l.next=m,l=d;var v=t.alternate;v!==null&&(v=v.updateQueue,h=v.lastBaseUpdate,h!==l&&(h===null?v.firstBaseUpdate=m:h.next=m,v.lastBaseUpdate=d))}if(o!==null){var y=s.baseState;l=0,v=m=d=null,h=o;do{var T=h.lane,N=h.eventTime;if((i&T)===T){v!==null&&(v=v.next={eventTime:N,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var D=t,b=h;switch(T=e,N=n,b.tag){case 1:if(D=b.payload,typeof D=="function"){y=D.call(N,y,T);break e}y=D;break e;case 3:D.flags=D.flags&-65537|128;case 0:if(D=b.payload,T=typeof D=="function"?D.call(N,y,T):D,T==null)break e;y=Ge({},y,T);break e;case 2:Ki=!0}}h.callback!==null&&h.lane!==0&&(t.flags|=64,T=s.effects,T===null?s.effects=[h]:T.push(h))}else N={eventTime:N,lane:T,tag:h.tag,payload:h.payload,callback:h.callback,next:null},v===null?(m=v=N,d=y):v=v.next=N,l|=T;if(h=h.next,h===null){if(h=s.shared.pending,h===null)break;T=h,h=T.next,T.next=null,s.lastBaseUpdate=T,s.shared.pending=null}}while(!0);if(v===null&&(d=y),s.baseState=d,s.firstBaseUpdate=m,s.lastBaseUpdate=v,e=s.shared.interleaved,e!==null){s=e;do l|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);is|=l,t.lanes=l,t.memoizedState=y}}function v_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],s=i.callback;if(s!==null){if(i.callback=null,i=n,typeof s!="function")throw Error(Q(191,s));s.call(i)}}}var Kl={},Gn=Pr(Kl),Pl=Pr(Kl),Sl=Pr(Kl);function Kr(t){if(t===Kl)throw Error(Q(174));return t}function Kp(t,e){switch(Fe(Sl,e),Fe(Pl,t),Fe(Gn,Kl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:af(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=af(e,t)}Be(Gn),Fe(Gn,e)}function Co(){Be(Gn),Be(Pl),Be(Sl)}function Ow(t){Kr(Sl.current);var e=Kr(Gn.current),n=af(e,t.type);e!==n&&(Fe(Pl,t),Fe(Gn,n))}function Gp(t){Pl.current===t&&(Be(Gn),Be(Pl))}var Ze=Pr(0);function Xc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ld=[];function Qp(){for(var t=0;t<Ld.length;t++)Ld[t]._workInProgressVersionPrimary=null;Ld.length=0}var wc=Oi.ReactCurrentDispatcher,Od=Oi.ReactCurrentBatchConfig,ns=0,Ke=null,dt=null,yt=null,Jc=!1,nl=!1,Al=0,bS=0;function kt(){throw Error(Q(321))}function Yp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!bn(t[n],e[n]))return!1;return!0}function Xp(t,e,n,i,s,o){if(ns=o,Ke=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,wc.current=t===null||t.memoizedState===null?US:BS,t=n(i,s),nl){o=0;do{if(nl=!1,Al=0,25<=o)throw Error(Q(301));o+=1,yt=dt=null,e.updateQueue=null,wc.current=jS,t=n(i,s)}while(nl)}if(wc.current=eh,e=dt!==null&&dt.next!==null,ns=0,yt=dt=Ke=null,Jc=!1,e)throw Error(Q(300));return t}function Jp(){var t=Al!==0;return Al=0,t}function $n(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yt===null?Ke.memoizedState=yt=t:yt=yt.next=t,yt}function In(){if(dt===null){var t=Ke.alternate;t=t!==null?t.memoizedState:null}else t=dt.next;var e=yt===null?Ke.memoizedState:yt.next;if(e!==null)yt=e,dt=t;else{if(t===null)throw Error(Q(310));dt=t,t={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},yt===null?Ke.memoizedState=yt=t:yt=yt.next=t}return yt}function Cl(t,e){return typeof e=="function"?e(t):e}function Nd(t){var e=In(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var i=dt,s=i.baseQueue,o=n.pending;if(o!==null){if(s!==null){var l=s.next;s.next=o.next,o.next=l}i.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,i=i.baseState;var h=l=null,d=null,m=o;do{var v=m.lane;if((ns&v)===v)d!==null&&(d=d.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),i=m.hasEagerState?m.eagerState:t(i,m.action);else{var y={lane:v,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};d===null?(h=d=y,l=i):d=d.next=y,Ke.lanes|=v,is|=v}m=m.next}while(m!==null&&m!==o);d===null?l=i:d.next=h,bn(i,e.memoizedState)||(Kt=!0),e.memoizedState=i,e.baseState=l,e.baseQueue=d,n.lastRenderedState=i}if(t=n.interleaved,t!==null){s=t;do o=s.lane,Ke.lanes|=o,is|=o,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Md(t){var e=In(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var i=n.dispatch,s=n.pending,o=e.memoizedState;if(s!==null){n.pending=null;var l=s=s.next;do o=t(o,l.action),l=l.next;while(l!==s);bn(o,e.memoizedState)||(Kt=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function Nw(){}function Mw(t,e){var n=Ke,i=In(),s=e(),o=!bn(i.memoizedState,s);if(o&&(i.memoizedState=s,Kt=!0),i=i.queue,em(Vw.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||yt!==null&&yt.memoizedState.tag&1){if(n.flags|=2048,Rl(9,bw.bind(null,n,i,s,e),void 0,null),wt===null)throw Error(Q(349));ns&30||Dw(n,e,s)}return s}function Dw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ke.updateQueue,e===null?(e={lastEffect:null,stores:null},Ke.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function bw(t,e,n,i){e.value=n,e.getSnapshot=i,Fw(e)&&zw(t)}function Vw(t,e,n){return n(function(){Fw(e)&&zw(t)})}function Fw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!bn(t,n)}catch{return!0}}function zw(t){var e=Ai(t,1);e!==null&&Dn(e,t,1,-1)}function y_(t){var e=$n();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Cl,lastRenderedState:t},e.queue=t,t=t.dispatch=zS.bind(null,Ke,t),[e.memoizedState,t]}function Rl(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Ke.updateQueue,e===null?(e={lastEffect:null,stores:null},Ke.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function Uw(){return In().memoizedState}function Ec(t,e,n,i){var s=$n();Ke.flags|=t,s.memoizedState=Rl(1|e,n,void 0,i===void 0?null:i)}function Lh(t,e,n,i){var s=In();i=i===void 0?null:i;var o=void 0;if(dt!==null){var l=dt.memoizedState;if(o=l.destroy,i!==null&&Yp(i,l.deps)){s.memoizedState=Rl(e,n,o,i);return}}Ke.flags|=t,s.memoizedState=Rl(1|e,n,o,i)}function w_(t,e){return Ec(8390656,8,t,e)}function em(t,e){return Lh(2048,8,t,e)}function Bw(t,e){return Lh(4,2,t,e)}function jw(t,e){return Lh(4,4,t,e)}function Ww(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Hw(t,e,n){return n=n!=null?n.concat([t]):null,Lh(4,4,Ww.bind(null,e,t),n)}function tm(){}function $w(t,e){var n=In();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Yp(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function qw(t,e){var n=In();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Yp(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function Zw(t,e,n){return ns&21?(bn(n,e)||(n=Xy(),Ke.lanes|=n,is|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Kt=!0),t.memoizedState=n)}function VS(t,e){var n=Ne;Ne=n!==0&&4>n?n:4,t(!0);var i=Od.transition;Od.transition={};try{t(!1),e()}finally{Ne=n,Od.transition=i}}function Kw(){return In().memoizedState}function FS(t,e,n){var i=hr(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Gw(t))Qw(e,n);else if(n=xw(t,e,n,i),n!==null){var s=jt();Dn(n,t,i,s),Yw(n,e,i)}}function zS(t,e,n){var i=hr(t),s={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Gw(t))Qw(e,s);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var l=e.lastRenderedState,h=o(l,n);if(s.hasEagerState=!0,s.eagerState=h,bn(h,l)){var d=e.interleaved;d===null?(s.next=s,qp(e)):(s.next=d.next,d.next=s),e.interleaved=s;return}}catch{}finally{}n=xw(t,e,s,i),n!==null&&(s=jt(),Dn(n,t,i,s),Yw(n,e,i))}}function Gw(t){var e=t.alternate;return t===Ke||e!==null&&e===Ke}function Qw(t,e){nl=Jc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Yw(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Op(t,n)}}var eh={readContext:Tn,useCallback:kt,useContext:kt,useEffect:kt,useImperativeHandle:kt,useInsertionEffect:kt,useLayoutEffect:kt,useMemo:kt,useReducer:kt,useRef:kt,useState:kt,useDebugValue:kt,useDeferredValue:kt,useTransition:kt,useMutableSource:kt,useSyncExternalStore:kt,useId:kt,unstable_isNewReconciler:!1},US={readContext:Tn,useCallback:function(t,e){return $n().memoizedState=[t,e===void 0?null:e],t},useContext:Tn,useEffect:w_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ec(4194308,4,Ww.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ec(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ec(4,2,t,e)},useMemo:function(t,e){var n=$n();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=$n();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=FS.bind(null,Ke,t),[i.memoizedState,t]},useRef:function(t){var e=$n();return t={current:t},e.memoizedState=t},useState:y_,useDebugValue:tm,useDeferredValue:function(t){return $n().memoizedState=t},useTransition:function(){var t=y_(!1),e=t[0];return t=VS.bind(null,t[1]),$n().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Ke,s=$n();if(He){if(n===void 0)throw Error(Q(407));n=n()}else{if(n=e(),wt===null)throw Error(Q(349));ns&30||Dw(i,e,n)}s.memoizedState=n;var o={value:n,getSnapshot:e};return s.queue=o,w_(Vw.bind(null,i,o,t),[t]),i.flags|=2048,Rl(9,bw.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=$n(),e=wt.identifierPrefix;if(He){var n=_i,i=gi;n=(i&~(1<<32-Mn(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Al++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=bS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},BS={readContext:Tn,useCallback:$w,useContext:Tn,useEffect:em,useImperativeHandle:Hw,useInsertionEffect:Bw,useLayoutEffect:jw,useMemo:qw,useReducer:Nd,useRef:Uw,useState:function(){return Nd(Cl)},useDebugValue:tm,useDeferredValue:function(t){var e=In();return Zw(e,dt.memoizedState,t)},useTransition:function(){var t=Nd(Cl)[0],e=In().memoizedState;return[t,e]},useMutableSource:Nw,useSyncExternalStore:Mw,useId:Kw,unstable_isNewReconciler:!1},jS={readContext:Tn,useCallback:$w,useContext:Tn,useEffect:em,useImperativeHandle:Hw,useInsertionEffect:Bw,useLayoutEffect:jw,useMemo:qw,useReducer:Md,useRef:Uw,useState:function(){return Md(Cl)},useDebugValue:tm,useDeferredValue:function(t){var e=In();return dt===null?e.memoizedState=t:Zw(e,dt.memoizedState,t)},useTransition:function(){var t=Md(Cl)[0],e=In().memoizedState;return[t,e]},useMutableSource:Nw,useSyncExternalStore:Mw,useId:Kw,unstable_isNewReconciler:!1};function xn(t,e){if(t&&t.defaultProps){e=Ge({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Rf(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Ge({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Oh={isMounted:function(t){return(t=t._reactInternals)?ds(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=jt(),s=hr(t),o=Ei(i,s);o.payload=e,n!=null&&(o.callback=n),e=ur(t,o,s),e!==null&&(Dn(e,t,s,i),yc(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=jt(),s=hr(t),o=Ei(i,s);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=ur(t,o,s),e!==null&&(Dn(e,t,s,i),yc(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=jt(),i=hr(t),s=Ei(n,i);s.tag=2,e!=null&&(s.callback=e),e=ur(t,s,i),e!==null&&(Dn(e,t,i,n),yc(e,t,i))}};function E_(t,e,n,i,s,o,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,l):e.prototype&&e.prototype.isPureReactComponent?!wl(n,i)||!wl(s,o):!0}function Xw(t,e,n){var i=!1,s=yr,o=e.contextType;return typeof o=="object"&&o!==null?o=Tn(o):(s=Qt(e)?es:Dt.current,i=e.contextTypes,o=(i=i!=null)?Po(t,s):yr),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Oh,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=o),e}function T_(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Oh.enqueueReplaceState(e,e.state,null)}function kf(t,e,n,i){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Zp(t);var o=e.contextType;typeof o=="object"&&o!==null?s.context=Tn(o):(o=Qt(e)?es:Dt.current,s.context=Po(t,o)),s.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Rf(t,e,o,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Oh.enqueueReplaceState(s,s.state,null),Yc(t,n,s,i),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ro(t,e){try{var n="",i=e;do n+=gP(i),i=i.return;while(i);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:s,digest:null}}function Dd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function xf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var WS=typeof WeakMap=="function"?WeakMap:Map;function Jw(t,e,n){n=Ei(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){nh||(nh=!0,Uf=i),xf(t,e)},n}function eE(t,e,n){n=Ei(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;n.payload=function(){return i(s)},n.callback=function(){xf(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){xf(t,e),typeof i!="function"&&(cr===null?cr=new Set([this]):cr.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function I_(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new WS;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(n)||(s.add(n),t=iA.bind(null,t,e,n),e.then(t,t))}function P_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function S_(t,e,n,i,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ei(-1,1),e.tag=2,ur(n,e,1))),n.lanes|=1),t)}var HS=Oi.ReactCurrentOwner,Kt=!1;function Bt(t,e,n,i){e.child=t===null?kw(e,null,n,i):Ao(e,t.child,n,i)}function A_(t,e,n,i,s){n=n.render;var o=e.ref;return _o(e,s),i=Xp(t,e,n,i,o,s),n=Jp(),t!==null&&!Kt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ci(t,e,s)):(He&&n&&Up(e),e.flags|=1,Bt(t,e,i,s),e.child)}function C_(t,e,n,i,s){if(t===null){var o=n.type;return typeof o=="function"&&!um(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,tE(t,e,o,i,s)):(t=Sc(n.type,null,i,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&s)){var l=o.memoizedProps;if(n=n.compare,n=n!==null?n:wl,n(l,i)&&t.ref===e.ref)return Ci(t,e,s)}return e.flags|=1,t=dr(o,i),t.ref=e.ref,t.return=e,e.child=t}function tE(t,e,n,i,s){if(t!==null){var o=t.memoizedProps;if(wl(o,i)&&t.ref===e.ref)if(Kt=!1,e.pendingProps=i=o,(t.lanes&s)!==0)t.flags&131072&&(Kt=!0);else return e.lanes=t.lanes,Ci(t,e,s)}return Lf(t,e,n,i,s)}function nE(t,e,n){var i=e.pendingProps,s=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fe(co,tn),tn|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Fe(co,tn),tn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,Fe(co,tn),tn|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,Fe(co,tn),tn|=i;return Bt(t,e,s,n),e.child}function iE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Lf(t,e,n,i,s){var o=Qt(n)?es:Dt.current;return o=Po(e,o),_o(e,s),n=Xp(t,e,n,i,o,s),i=Jp(),t!==null&&!Kt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ci(t,e,s)):(He&&i&&Up(e),e.flags|=1,Bt(t,e,n,s),e.child)}function R_(t,e,n,i,s){if(Qt(n)){var o=!0;qc(e)}else o=!1;if(_o(e,s),e.stateNode===null)Tc(t,e),Xw(e,n,i),kf(e,n,i,s),i=!0;else if(t===null){var l=e.stateNode,h=e.memoizedProps;l.props=h;var d=l.context,m=n.contextType;typeof m=="object"&&m!==null?m=Tn(m):(m=Qt(n)?es:Dt.current,m=Po(e,m));var v=n.getDerivedStateFromProps,y=typeof v=="function"||typeof l.getSnapshotBeforeUpdate=="function";y||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(h!==i||d!==m)&&T_(e,l,i,m),Ki=!1;var T=e.memoizedState;l.state=T,Yc(e,i,l,s),d=e.memoizedState,h!==i||T!==d||Gt.current||Ki?(typeof v=="function"&&(Rf(e,n,v,i),d=e.memoizedState),(h=Ki||E_(e,n,h,i,T,d,m))?(y||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=d),l.props=i,l.state=d,l.context=m,i=h):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{l=e.stateNode,Lw(t,e),h=e.memoizedProps,m=e.type===e.elementType?h:xn(e.type,h),l.props=m,y=e.pendingProps,T=l.context,d=n.contextType,typeof d=="object"&&d!==null?d=Tn(d):(d=Qt(n)?es:Dt.current,d=Po(e,d));var N=n.getDerivedStateFromProps;(v=typeof N=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(h!==y||T!==d)&&T_(e,l,i,d),Ki=!1,T=e.memoizedState,l.state=T,Yc(e,i,l,s);var D=e.memoizedState;h!==y||T!==D||Gt.current||Ki?(typeof N=="function"&&(Rf(e,n,N,i),D=e.memoizedState),(m=Ki||E_(e,n,m,i,T,D,d)||!1)?(v||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(i,D,d),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(i,D,d)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||h===t.memoizedProps&&T===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&T===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=D),l.props=i,l.state=D,l.context=d,i=m):(typeof l.componentDidUpdate!="function"||h===t.memoizedProps&&T===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&T===t.memoizedState||(e.flags|=1024),i=!1)}return Of(t,e,n,i,o,s)}function Of(t,e,n,i,s,o){iE(t,e);var l=(e.flags&128)!==0;if(!i&&!l)return s&&f_(e,n,!1),Ci(t,e,o);i=e.stateNode,HS.current=e;var h=l&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&l?(e.child=Ao(e,t.child,null,o),e.child=Ao(e,null,h,o)):Bt(t,e,h,o),e.memoizedState=i.state,s&&f_(e,n,!0),e.child}function rE(t){var e=t.stateNode;e.pendingContext?d_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&d_(t,e.context,!1),Kp(t,e.containerInfo)}function k_(t,e,n,i,s){return So(),jp(s),e.flags|=256,Bt(t,e,n,i),e.child}var Nf={dehydrated:null,treeContext:null,retryLane:0};function Mf(t){return{baseLanes:t,cachePool:null,transitions:null}}function sE(t,e,n){var i=e.pendingProps,s=Ze.current,o=!1,l=(e.flags&128)!==0,h;if((h=l)||(h=t!==null&&t.memoizedState===null?!1:(s&2)!==0),h?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Fe(Ze,s&1),t===null)return Af(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=i.children,t=i.fallback,o?(i=e.mode,o=e.child,l={mode:"hidden",children:l},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=Dh(l,i,0,null),t=Yr(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Mf(n),e.memoizedState=Nf,t):nm(e,l));if(s=t.memoizedState,s!==null&&(h=s.dehydrated,h!==null))return $S(t,e,l,i,h,s,n);if(o){o=i.fallback,l=e.mode,s=t.child,h=s.sibling;var d={mode:"hidden",children:i.children};return!(l&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=d,e.deletions=null):(i=dr(s,d),i.subtreeFlags=s.subtreeFlags&14680064),h!==null?o=dr(h,o):(o=Yr(o,l,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,l=t.child.memoizedState,l=l===null?Mf(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=t.childLanes&~n,e.memoizedState=Nf,i}return o=t.child,t=o.sibling,i=dr(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function nm(t,e){return e=Dh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function rc(t,e,n,i){return i!==null&&jp(i),Ao(e,t.child,null,n),t=nm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function $S(t,e,n,i,s,o,l){if(n)return e.flags&256?(e.flags&=-257,i=Dd(Error(Q(422))),rc(t,e,l,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,s=e.mode,i=Dh({mode:"visible",children:i.children},s,0,null),o=Yr(o,s,l,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&Ao(e,t.child,null,l),e.child.memoizedState=Mf(l),e.memoizedState=Nf,o);if(!(e.mode&1))return rc(t,e,l,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var h=i.dgst;return i=h,o=Error(Q(419)),i=Dd(o,i,void 0),rc(t,e,l,i)}if(h=(l&t.childLanes)!==0,Kt||h){if(i=wt,i!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|l)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,Ai(t,s),Dn(i,t,s,-1))}return lm(),i=Dd(Error(Q(421))),rc(t,e,l,i)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=rA.bind(null,t),s._reactRetry=e,null):(t=o.treeContext,nn=lr(s.nextSibling),rn=e,He=!0,On=null,t!==null&&(_n[vn++]=gi,_n[vn++]=_i,_n[vn++]=ts,gi=t.id,_i=t.overflow,ts=e),e=nm(e,i.children),e.flags|=4096,e)}function x_(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Cf(t.return,e,n)}function bd(t,e,n,i,s){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=s)}function oE(t,e,n){var i=e.pendingProps,s=i.revealOrder,o=i.tail;if(Bt(t,e,i.children,n),i=Ze.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&x_(t,n,e);else if(t.tag===19)x_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Fe(Ze,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Xc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),bd(e,!1,s,n,o);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Xc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}bd(e,!0,n,null,o);break;case"together":bd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Tc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ci(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),is|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Q(153));if(e.child!==null){for(t=e.child,n=dr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=dr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function qS(t,e,n){switch(e.tag){case 3:rE(e),So();break;case 5:Ow(e);break;case 1:Qt(e.type)&&qc(e);break;case 4:Kp(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;Fe(Gc,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Fe(Ze,Ze.current&1),e.flags|=128,null):n&e.child.childLanes?sE(t,e,n):(Fe(Ze,Ze.current&1),t=Ci(t,e,n),t!==null?t.sibling:null);Fe(Ze,Ze.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return oE(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Fe(Ze,Ze.current),i)break;return null;case 22:case 23:return e.lanes=0,nE(t,e,n)}return Ci(t,e,n)}var aE,Df,lE,uE;aE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Df=function(){};lE=function(t,e,n,i){var s=t.memoizedProps;if(s!==i){t=e.stateNode,Kr(Gn.current);var o=null;switch(n){case"input":s=nf(t,s),i=nf(t,i),o=[];break;case"select":s=Ge({},s,{value:void 0}),i=Ge({},i,{value:void 0}),o=[];break;case"textarea":s=of(t,s),i=of(t,i),o=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Hc)}lf(n,i);var l;n=null;for(m in s)if(!i.hasOwnProperty(m)&&s.hasOwnProperty(m)&&s[m]!=null)if(m==="style"){var h=s[m];for(l in h)h.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(fl.hasOwnProperty(m)?o||(o=[]):(o=o||[]).push(m,null));for(m in i){var d=i[m];if(h=s!=null?s[m]:void 0,i.hasOwnProperty(m)&&d!==h&&(d!=null||h!=null))if(m==="style")if(h){for(l in h)!h.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in d)d.hasOwnProperty(l)&&h[l]!==d[l]&&(n||(n={}),n[l]=d[l])}else n||(o||(o=[]),o.push(m,n)),n=d;else m==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,h=h?h.__html:void 0,d!=null&&h!==d&&(o=o||[]).push(m,d)):m==="children"?typeof d!="string"&&typeof d!="number"||(o=o||[]).push(m,""+d):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(fl.hasOwnProperty(m)?(d!=null&&m==="onScroll"&&ze("scroll",t),o||h===d||(o=[])):(o=o||[]).push(m,d))}n&&(o=o||[]).push("style",n);var m=o;(e.updateQueue=m)&&(e.flags|=4)}};uE=function(t,e,n,i){n!==i&&(e.flags|=4)};function Va(t,e){if(!He)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function xt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function ZS(t,e,n){var i=e.pendingProps;switch(Bp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(e),null;case 1:return Qt(e.type)&&$c(),xt(e),null;case 3:return i=e.stateNode,Co(),Be(Gt),Be(Dt),Qp(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(nc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,On!==null&&(Wf(On),On=null))),Df(t,e),xt(e),null;case 5:Gp(e);var s=Kr(Sl.current);if(n=e.type,t!==null&&e.stateNode!=null)lE(t,e,n,i,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Q(166));return xt(e),null}if(t=Kr(Gn.current),nc(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[qn]=e,i[Il]=o,t=(e.mode&1)!==0,n){case"dialog":ze("cancel",i),ze("close",i);break;case"iframe":case"object":case"embed":ze("load",i);break;case"video":case"audio":for(s=0;s<Wa.length;s++)ze(Wa[s],i);break;case"source":ze("error",i);break;case"img":case"image":case"link":ze("error",i),ze("load",i);break;case"details":ze("toggle",i);break;case"input":zg(i,o),ze("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},ze("invalid",i);break;case"textarea":Bg(i,o),ze("invalid",i)}lf(n,o),s=null;for(var l in o)if(o.hasOwnProperty(l)){var h=o[l];l==="children"?typeof h=="string"?i.textContent!==h&&(o.suppressHydrationWarning!==!0&&tc(i.textContent,h,t),s=["children",h]):typeof h=="number"&&i.textContent!==""+h&&(o.suppressHydrationWarning!==!0&&tc(i.textContent,h,t),s=["children",""+h]):fl.hasOwnProperty(l)&&h!=null&&l==="onScroll"&&ze("scroll",i)}switch(n){case"input":Zu(i),Ug(i,o,!0);break;case"textarea":Zu(i),jg(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=Hc)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Vy(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=l.createElement(n,{is:i.is}):(t=l.createElement(n),n==="select"&&(l=t,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):t=l.createElementNS(t,n),t[qn]=e,t[Il]=i,aE(t,e,!1,!1),e.stateNode=t;e:{switch(l=uf(n,i),n){case"dialog":ze("cancel",t),ze("close",t),s=i;break;case"iframe":case"object":case"embed":ze("load",t),s=i;break;case"video":case"audio":for(s=0;s<Wa.length;s++)ze(Wa[s],t);s=i;break;case"source":ze("error",t),s=i;break;case"img":case"image":case"link":ze("error",t),ze("load",t),s=i;break;case"details":ze("toggle",t),s=i;break;case"input":zg(t,i),s=nf(t,i),ze("invalid",t);break;case"option":s=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},s=Ge({},i,{value:void 0}),ze("invalid",t);break;case"textarea":Bg(t,i),s=of(t,i),ze("invalid",t);break;default:s=i}lf(n,s),h=s;for(o in h)if(h.hasOwnProperty(o)){var d=h[o];o==="style"?Uy(t,d):o==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&Fy(t,d)):o==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&pl(t,d):typeof d=="number"&&pl(t,""+d):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(fl.hasOwnProperty(o)?d!=null&&o==="onScroll"&&ze("scroll",t):d!=null&&Ap(t,o,d,l))}switch(n){case"input":Zu(t),Ug(t,i,!1);break;case"textarea":Zu(t),jg(t);break;case"option":i.value!=null&&t.setAttribute("value",""+vr(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?fo(t,!!i.multiple,o,!1):i.defaultValue!=null&&fo(t,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Hc)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return xt(e),null;case 6:if(t&&e.stateNode!=null)uE(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Q(166));if(n=Kr(Sl.current),Kr(Gn.current),nc(e)){if(i=e.stateNode,n=e.memoizedProps,i[qn]=e,(o=i.nodeValue!==n)&&(t=rn,t!==null))switch(t.tag){case 3:tc(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&tc(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[qn]=e,e.stateNode=i}return xt(e),null;case 13:if(Be(Ze),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(He&&nn!==null&&e.mode&1&&!(e.flags&128))Cw(),So(),e.flags|=98560,o=!1;else if(o=nc(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(Q(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Q(317));o[qn]=e}else So(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;xt(e),o=!1}else On!==null&&(Wf(On),On=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Ze.current&1?ft===0&&(ft=3):lm())),e.updateQueue!==null&&(e.flags|=4),xt(e),null);case 4:return Co(),Df(t,e),t===null&&El(e.stateNode.containerInfo),xt(e),null;case 10:return $p(e.type._context),xt(e),null;case 17:return Qt(e.type)&&$c(),xt(e),null;case 19:if(Be(Ze),o=e.memoizedState,o===null)return xt(e),null;if(i=(e.flags&128)!==0,l=o.rendering,l===null)if(i)Va(o,!1);else{if(ft!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=Xc(t),l!==null){for(e.flags|=128,Va(o,!1),i=l.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,t=l.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Fe(Ze,Ze.current&1|2),e.child}t=t.sibling}o.tail!==null&&nt()>ko&&(e.flags|=128,i=!0,Va(o,!1),e.lanes=4194304)}else{if(!i)if(t=Xc(l),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Va(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!He)return xt(e),null}else 2*nt()-o.renderingStartTime>ko&&n!==1073741824&&(e.flags|=128,i=!0,Va(o,!1),e.lanes=4194304);o.isBackwards?(l.sibling=e.child,e.child=l):(n=o.last,n!==null?n.sibling=l:e.child=l,o.last=l)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=nt(),e.sibling=null,n=Ze.current,Fe(Ze,i?n&1|2:n&1),e):(xt(e),null);case 22:case 23:return am(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?tn&1073741824&&(xt(e),e.subtreeFlags&6&&(e.flags|=8192)):xt(e),null;case 24:return null;case 25:return null}throw Error(Q(156,e.tag))}function KS(t,e){switch(Bp(e),e.tag){case 1:return Qt(e.type)&&$c(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Co(),Be(Gt),Be(Dt),Qp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Gp(e),null;case 13:if(Be(Ze),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Q(340));So()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Be(Ze),null;case 4:return Co(),null;case 10:return $p(e.type._context),null;case 22:case 23:return am(),null;case 24:return null;default:return null}}var sc=!1,Nt=!1,GS=typeof WeakSet=="function"?WeakSet:Set,te=null;function uo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Je(t,e,i)}else n.current=null}function bf(t,e,n){try{n()}catch(i){Je(t,e,i)}}var L_=!1;function QS(t,e){if(yf=Bc,t=pw(),zp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var l=0,h=-1,d=-1,m=0,v=0,y=t,T=null;t:for(;;){for(var N;y!==n||s!==0&&y.nodeType!==3||(h=l+s),y!==o||i!==0&&y.nodeType!==3||(d=l+i),y.nodeType===3&&(l+=y.nodeValue.length),(N=y.firstChild)!==null;)T=y,y=N;for(;;){if(y===t)break t;if(T===n&&++m===s&&(h=l),T===o&&++v===i&&(d=l),(N=y.nextSibling)!==null)break;y=T,T=y.parentNode}y=N}n=h===-1||d===-1?null:{start:h,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(wf={focusedElem:t,selectionRange:n},Bc=!1,te=e;te!==null;)if(e=te,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,te=t;else for(;te!==null;){e=te;try{var D=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(D!==null){var b=D.memoizedProps,U=D.memoizedState,A=e.stateNode,P=A.getSnapshotBeforeUpdate(e.elementType===e.type?b:xn(e.type,b),U);A.__reactInternalSnapshotBeforeUpdate=P}break;case 3:var k=e.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Q(163))}}catch(W){Je(e,e.return,W)}if(t=e.sibling,t!==null){t.return=e.return,te=t;break}te=e.return}return D=L_,L_=!1,D}function il(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&t)===t){var o=s.destroy;s.destroy=void 0,o!==void 0&&bf(e,n,o)}s=s.next}while(s!==i)}}function Nh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Vf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function cE(t){var e=t.alternate;e!==null&&(t.alternate=null,cE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[qn],delete e[Il],delete e[If],delete e[OS],delete e[NS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function hE(t){return t.tag===5||t.tag===3||t.tag===4}function O_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||hE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ff(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Hc));else if(i!==4&&(t=t.child,t!==null))for(Ff(t,e,n),t=t.sibling;t!==null;)Ff(t,e,n),t=t.sibling}function zf(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(zf(t,e,n),t=t.sibling;t!==null;)zf(t,e,n),t=t.sibling}var Tt=null,Ln=!1;function $i(t,e,n){for(n=n.child;n!==null;)dE(t,e,n),n=n.sibling}function dE(t,e,n){if(Kn&&typeof Kn.onCommitFiberUnmount=="function")try{Kn.onCommitFiberUnmount(Sh,n)}catch{}switch(n.tag){case 5:Nt||uo(n,e);case 6:var i=Tt,s=Ln;Tt=null,$i(t,e,n),Tt=i,Ln=s,Tt!==null&&(Ln?(t=Tt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Tt.removeChild(n.stateNode));break;case 18:Tt!==null&&(Ln?(t=Tt,n=n.stateNode,t.nodeType===8?kd(t.parentNode,n):t.nodeType===1&&kd(t,n),vl(t)):kd(Tt,n.stateNode));break;case 4:i=Tt,s=Ln,Tt=n.stateNode.containerInfo,Ln=!0,$i(t,e,n),Tt=i,Ln=s;break;case 0:case 11:case 14:case 15:if(!Nt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var o=s,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&bf(n,e,l),s=s.next}while(s!==i)}$i(t,e,n);break;case 1:if(!Nt&&(uo(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(h){Je(n,e,h)}$i(t,e,n);break;case 21:$i(t,e,n);break;case 22:n.mode&1?(Nt=(i=Nt)||n.memoizedState!==null,$i(t,e,n),Nt=i):$i(t,e,n);break;default:$i(t,e,n)}}function N_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new GS),e.forEach(function(i){var s=sA.bind(null,t,i);n.has(i)||(n.add(i),i.then(s,s))})}}function kn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i];try{var o=t,l=e,h=l;e:for(;h!==null;){switch(h.tag){case 5:Tt=h.stateNode,Ln=!1;break e;case 3:Tt=h.stateNode.containerInfo,Ln=!0;break e;case 4:Tt=h.stateNode.containerInfo,Ln=!0;break e}h=h.return}if(Tt===null)throw Error(Q(160));dE(o,l,s),Tt=null,Ln=!1;var d=s.alternate;d!==null&&(d.return=null),s.return=null}catch(m){Je(s,e,m)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)fE(e,t),e=e.sibling}function fE(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(kn(e,t),Hn(t),i&4){try{il(3,t,t.return),Nh(3,t)}catch(b){Je(t,t.return,b)}try{il(5,t,t.return)}catch(b){Je(t,t.return,b)}}break;case 1:kn(e,t),Hn(t),i&512&&n!==null&&uo(n,n.return);break;case 5:if(kn(e,t),Hn(t),i&512&&n!==null&&uo(n,n.return),t.flags&32){var s=t.stateNode;try{pl(s,"")}catch(b){Je(t,t.return,b)}}if(i&4&&(s=t.stateNode,s!=null)){var o=t.memoizedProps,l=n!==null?n.memoizedProps:o,h=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{h==="input"&&o.type==="radio"&&o.name!=null&&Dy(s,o),uf(h,l);var m=uf(h,o);for(l=0;l<d.length;l+=2){var v=d[l],y=d[l+1];v==="style"?Uy(s,y):v==="dangerouslySetInnerHTML"?Fy(s,y):v==="children"?pl(s,y):Ap(s,v,y,m)}switch(h){case"input":rf(s,o);break;case"textarea":by(s,o);break;case"select":var T=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var N=o.value;N!=null?fo(s,!!o.multiple,N,!1):T!==!!o.multiple&&(o.defaultValue!=null?fo(s,!!o.multiple,o.defaultValue,!0):fo(s,!!o.multiple,o.multiple?[]:"",!1))}s[Il]=o}catch(b){Je(t,t.return,b)}}break;case 6:if(kn(e,t),Hn(t),i&4){if(t.stateNode===null)throw Error(Q(162));s=t.stateNode,o=t.memoizedProps;try{s.nodeValue=o}catch(b){Je(t,t.return,b)}}break;case 3:if(kn(e,t),Hn(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{vl(e.containerInfo)}catch(b){Je(t,t.return,b)}break;case 4:kn(e,t),Hn(t);break;case 13:kn(e,t),Hn(t),s=t.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(sm=nt())),i&4&&N_(t);break;case 22:if(v=n!==null&&n.memoizedState!==null,t.mode&1?(Nt=(m=Nt)||v,kn(e,t),Nt=m):kn(e,t),Hn(t),i&8192){if(m=t.memoizedState!==null,(t.stateNode.isHidden=m)&&!v&&t.mode&1)for(te=t,v=t.child;v!==null;){for(y=te=v;te!==null;){switch(T=te,N=T.child,T.tag){case 0:case 11:case 14:case 15:il(4,T,T.return);break;case 1:uo(T,T.return);var D=T.stateNode;if(typeof D.componentWillUnmount=="function"){i=T,n=T.return;try{e=i,D.props=e.memoizedProps,D.state=e.memoizedState,D.componentWillUnmount()}catch(b){Je(i,n,b)}}break;case 5:uo(T,T.return);break;case 22:if(T.memoizedState!==null){D_(y);continue}}N!==null?(N.return=T,te=N):D_(y)}v=v.sibling}e:for(v=null,y=t;;){if(y.tag===5){if(v===null){v=y;try{s=y.stateNode,m?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(h=y.stateNode,d=y.memoizedProps.style,l=d!=null&&d.hasOwnProperty("display")?d.display:null,h.style.display=zy("display",l))}catch(b){Je(t,t.return,b)}}}else if(y.tag===6){if(v===null)try{y.stateNode.nodeValue=m?"":y.memoizedProps}catch(b){Je(t,t.return,b)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===t)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===t)break e;for(;y.sibling===null;){if(y.return===null||y.return===t)break e;v===y&&(v=null),y=y.return}v===y&&(v=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:kn(e,t),Hn(t),i&4&&N_(t);break;case 21:break;default:kn(e,t),Hn(t)}}function Hn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(hE(n)){var i=n;break e}n=n.return}throw Error(Q(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(pl(s,""),i.flags&=-33);var o=O_(t);zf(t,o,s);break;case 3:case 4:var l=i.stateNode.containerInfo,h=O_(t);Ff(t,h,l);break;default:throw Error(Q(161))}}catch(d){Je(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function YS(t,e,n){te=t,pE(t)}function pE(t,e,n){for(var i=(t.mode&1)!==0;te!==null;){var s=te,o=s.child;if(s.tag===22&&i){var l=s.memoizedState!==null||sc;if(!l){var h=s.alternate,d=h!==null&&h.memoizedState!==null||Nt;h=sc;var m=Nt;if(sc=l,(Nt=d)&&!m)for(te=s;te!==null;)l=te,d=l.child,l.tag===22&&l.memoizedState!==null?b_(s):d!==null?(d.return=l,te=d):b_(s);for(;o!==null;)te=o,pE(o),o=o.sibling;te=s,sc=h,Nt=m}M_(t)}else s.subtreeFlags&8772&&o!==null?(o.return=s,te=o):M_(t)}}function M_(t){for(;te!==null;){var e=te;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Nt||Nh(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Nt)if(n===null)i.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:xn(e.type,n.memoizedProps);i.componentDidUpdate(s,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&v_(e,o,i);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}v_(e,l,n)}break;case 5:var h=e.stateNode;if(n===null&&e.flags&4){n=h;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var m=e.alternate;if(m!==null){var v=m.memoizedState;if(v!==null){var y=v.dehydrated;y!==null&&vl(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Q(163))}Nt||e.flags&512&&Vf(e)}catch(T){Je(e,e.return,T)}}if(e===t){te=null;break}if(n=e.sibling,n!==null){n.return=e.return,te=n;break}te=e.return}}function D_(t){for(;te!==null;){var e=te;if(e===t){te=null;break}var n=e.sibling;if(n!==null){n.return=e.return,te=n;break}te=e.return}}function b_(t){for(;te!==null;){var e=te;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Nh(4,e)}catch(d){Je(e,n,d)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(d){Je(e,s,d)}}var o=e.return;try{Vf(e)}catch(d){Je(e,o,d)}break;case 5:var l=e.return;try{Vf(e)}catch(d){Je(e,l,d)}}}catch(d){Je(e,e.return,d)}if(e===t){te=null;break}var h=e.sibling;if(h!==null){h.return=e.return,te=h;break}te=e.return}}var XS=Math.ceil,th=Oi.ReactCurrentDispatcher,im=Oi.ReactCurrentOwner,En=Oi.ReactCurrentBatchConfig,ke=0,wt=null,at=null,St=0,tn=0,co=Pr(0),ft=0,kl=null,is=0,Mh=0,rm=0,rl=null,Zt=null,sm=0,ko=1/0,pi=null,nh=!1,Uf=null,cr=null,oc=!1,nr=null,ih=0,sl=0,Bf=null,Ic=-1,Pc=0;function jt(){return ke&6?nt():Ic!==-1?Ic:Ic=nt()}function hr(t){return t.mode&1?ke&2&&St!==0?St&-St:DS.transition!==null?(Pc===0&&(Pc=Xy()),Pc):(t=Ne,t!==0||(t=window.event,t=t===void 0?16:sw(t.type)),t):1}function Dn(t,e,n,i){if(50<sl)throw sl=0,Bf=null,Error(Q(185));$l(t,n,i),(!(ke&2)||t!==wt)&&(t===wt&&(!(ke&2)&&(Mh|=n),ft===4&&Qi(t,St)),Yt(t,i),n===1&&ke===0&&!(e.mode&1)&&(ko=nt()+500,xh&&Sr()))}function Yt(t,e){var n=t.callbackNode;DP(t,e);var i=Uc(t,t===wt?St:0);if(i===0)n!==null&&$g(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&$g(n),e===1)t.tag===0?MS(V_.bind(null,t)):Pw(V_.bind(null,t)),xS(function(){!(ke&6)&&Sr()}),n=null;else{switch(Jy(i)){case 1:n=Lp;break;case 4:n=Qy;break;case 16:n=zc;break;case 536870912:n=Yy;break;default:n=zc}n=TE(n,mE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function mE(t,e){if(Ic=-1,Pc=0,ke&6)throw Error(Q(327));var n=t.callbackNode;if(vo()&&t.callbackNode!==n)return null;var i=Uc(t,t===wt?St:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=rh(t,i);else{e=i;var s=ke;ke|=2;var o=_E();(wt!==t||St!==e)&&(pi=null,ko=nt()+500,Qr(t,e));do try{tA();break}catch(h){gE(t,h)}while(!0);Hp(),th.current=o,ke=s,at!==null?e=0:(wt=null,St=0,e=ft)}if(e!==0){if(e===2&&(s=pf(t),s!==0&&(i=s,e=jf(t,s))),e===1)throw n=kl,Qr(t,0),Qi(t,i),Yt(t,nt()),n;if(e===6)Qi(t,i);else{if(s=t.current.alternate,!(i&30)&&!JS(s)&&(e=rh(t,i),e===2&&(o=pf(t),o!==0&&(i=o,e=jf(t,o))),e===1))throw n=kl,Qr(t,0),Qi(t,i),Yt(t,nt()),n;switch(t.finishedWork=s,t.finishedLanes=i,e){case 0:case 1:throw Error(Q(345));case 2:Hr(t,Zt,pi);break;case 3:if(Qi(t,i),(i&130023424)===i&&(e=sm+500-nt(),10<e)){if(Uc(t,0)!==0)break;if(s=t.suspendedLanes,(s&i)!==i){jt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Tf(Hr.bind(null,t,Zt,pi),e);break}Hr(t,Zt,pi);break;case 4:if(Qi(t,i),(i&4194240)===i)break;for(e=t.eventTimes,s=-1;0<i;){var l=31-Mn(i);o=1<<l,l=e[l],l>s&&(s=l),i&=~o}if(i=s,i=nt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*XS(i/1960))-i,10<i){t.timeoutHandle=Tf(Hr.bind(null,t,Zt,pi),i);break}Hr(t,Zt,pi);break;case 5:Hr(t,Zt,pi);break;default:throw Error(Q(329))}}}return Yt(t,nt()),t.callbackNode===n?mE.bind(null,t):null}function jf(t,e){var n=rl;return t.current.memoizedState.isDehydrated&&(Qr(t,e).flags|=256),t=rh(t,e),t!==2&&(e=Zt,Zt=n,e!==null&&Wf(e)),t}function Wf(t){Zt===null?Zt=t:Zt.push.apply(Zt,t)}function JS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var s=n[i],o=s.getSnapshot;s=s.value;try{if(!bn(o(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Qi(t,e){for(e&=~rm,e&=~Mh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Mn(e),i=1<<n;t[n]=-1,e&=~i}}function V_(t){if(ke&6)throw Error(Q(327));vo();var e=Uc(t,0);if(!(e&1))return Yt(t,nt()),null;var n=rh(t,e);if(t.tag!==0&&n===2){var i=pf(t);i!==0&&(e=i,n=jf(t,i))}if(n===1)throw n=kl,Qr(t,0),Qi(t,e),Yt(t,nt()),n;if(n===6)throw Error(Q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Hr(t,Zt,pi),Yt(t,nt()),null}function om(t,e){var n=ke;ke|=1;try{return t(e)}finally{ke=n,ke===0&&(ko=nt()+500,xh&&Sr())}}function rs(t){nr!==null&&nr.tag===0&&!(ke&6)&&vo();var e=ke;ke|=1;var n=En.transition,i=Ne;try{if(En.transition=null,Ne=1,t)return t()}finally{Ne=i,En.transition=n,ke=e,!(ke&6)&&Sr()}}function am(){tn=co.current,Be(co)}function Qr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,kS(n)),at!==null)for(n=at.return;n!==null;){var i=n;switch(Bp(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&$c();break;case 3:Co(),Be(Gt),Be(Dt),Qp();break;case 5:Gp(i);break;case 4:Co();break;case 13:Be(Ze);break;case 19:Be(Ze);break;case 10:$p(i.type._context);break;case 22:case 23:am()}n=n.return}if(wt=t,at=t=dr(t.current,null),St=tn=e,ft=0,kl=null,rm=Mh=is=0,Zt=rl=null,Zr!==null){for(e=0;e<Zr.length;e++)if(n=Zr[e],i=n.interleaved,i!==null){n.interleaved=null;var s=i.next,o=n.pending;if(o!==null){var l=o.next;o.next=s,i.next=l}n.pending=i}Zr=null}return t}function gE(t,e){do{var n=at;try{if(Hp(),wc.current=eh,Jc){for(var i=Ke.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Jc=!1}if(ns=0,yt=dt=Ke=null,nl=!1,Al=0,im.current=null,n===null||n.return===null){ft=1,kl=e,at=null;break}e:{var o=t,l=n.return,h=n,d=e;if(e=St,h.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var m=d,v=h,y=v.tag;if(!(v.mode&1)&&(y===0||y===11||y===15)){var T=v.alternate;T?(v.updateQueue=T.updateQueue,v.memoizedState=T.memoizedState,v.lanes=T.lanes):(v.updateQueue=null,v.memoizedState=null)}var N=P_(l);if(N!==null){N.flags&=-257,S_(N,l,h,o,e),N.mode&1&&I_(o,m,e),e=N,d=m;var D=e.updateQueue;if(D===null){var b=new Set;b.add(d),e.updateQueue=b}else D.add(d);break e}else{if(!(e&1)){I_(o,m,e),lm();break e}d=Error(Q(426))}}else if(He&&h.mode&1){var U=P_(l);if(U!==null){!(U.flags&65536)&&(U.flags|=256),S_(U,l,h,o,e),jp(Ro(d,h));break e}}o=d=Ro(d,h),ft!==4&&(ft=2),rl===null?rl=[o]:rl.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var A=Jw(o,d,e);__(o,A);break e;case 1:h=d;var P=o.type,k=o.stateNode;if(!(o.flags&128)&&(typeof P.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(cr===null||!cr.has(k)))){o.flags|=65536,e&=-e,o.lanes|=e;var W=eE(o,h,e);__(o,W);break e}}o=o.return}while(o!==null)}yE(n)}catch(G){e=G,at===n&&n!==null&&(at=n=n.return);continue}break}while(!0)}function _E(){var t=th.current;return th.current=eh,t===null?eh:t}function lm(){(ft===0||ft===3||ft===2)&&(ft=4),wt===null||!(is&268435455)&&!(Mh&268435455)||Qi(wt,St)}function rh(t,e){var n=ke;ke|=2;var i=_E();(wt!==t||St!==e)&&(pi=null,Qr(t,e));do try{eA();break}catch(s){gE(t,s)}while(!0);if(Hp(),ke=n,th.current=i,at!==null)throw Error(Q(261));return wt=null,St=0,ft}function eA(){for(;at!==null;)vE(at)}function tA(){for(;at!==null&&!AP();)vE(at)}function vE(t){var e=EE(t.alternate,t,tn);t.memoizedProps=t.pendingProps,e===null?yE(t):at=e,im.current=null}function yE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=KS(n,e),n!==null){n.flags&=32767,at=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ft=6,at=null;return}}else if(n=ZS(n,e,tn),n!==null){at=n;return}if(e=e.sibling,e!==null){at=e;return}at=e=t}while(e!==null);ft===0&&(ft=5)}function Hr(t,e,n){var i=Ne,s=En.transition;try{En.transition=null,Ne=1,nA(t,e,n,i)}finally{En.transition=s,Ne=i}return null}function nA(t,e,n,i){do vo();while(nr!==null);if(ke&6)throw Error(Q(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Q(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(bP(t,o),t===wt&&(at=wt=null,St=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||oc||(oc=!0,TE(zc,function(){return vo(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=En.transition,En.transition=null;var l=Ne;Ne=1;var h=ke;ke|=4,im.current=null,QS(t,n),fE(n,t),TS(wf),Bc=!!yf,wf=yf=null,t.current=n,YS(n),CP(),ke=h,Ne=l,En.transition=o}else t.current=n;if(oc&&(oc=!1,nr=t,ih=s),o=t.pendingLanes,o===0&&(cr=null),xP(n.stateNode),Yt(t,nt()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],i(s.value,{componentStack:s.stack,digest:s.digest});if(nh)throw nh=!1,t=Uf,Uf=null,t;return ih&1&&t.tag!==0&&vo(),o=t.pendingLanes,o&1?t===Bf?sl++:(sl=0,Bf=t):sl=0,Sr(),null}function vo(){if(nr!==null){var t=Jy(ih),e=En.transition,n=Ne;try{if(En.transition=null,Ne=16>t?16:t,nr===null)var i=!1;else{if(t=nr,nr=null,ih=0,ke&6)throw Error(Q(331));var s=ke;for(ke|=4,te=t.current;te!==null;){var o=te,l=o.child;if(te.flags&16){var h=o.deletions;if(h!==null){for(var d=0;d<h.length;d++){var m=h[d];for(te=m;te!==null;){var v=te;switch(v.tag){case 0:case 11:case 15:il(8,v,o)}var y=v.child;if(y!==null)y.return=v,te=y;else for(;te!==null;){v=te;var T=v.sibling,N=v.return;if(cE(v),v===m){te=null;break}if(T!==null){T.return=N,te=T;break}te=N}}}var D=o.alternate;if(D!==null){var b=D.child;if(b!==null){D.child=null;do{var U=b.sibling;b.sibling=null,b=U}while(b!==null)}}te=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,te=l;else e:for(;te!==null;){if(o=te,o.flags&2048)switch(o.tag){case 0:case 11:case 15:il(9,o,o.return)}var A=o.sibling;if(A!==null){A.return=o.return,te=A;break e}te=o.return}}var P=t.current;for(te=P;te!==null;){l=te;var k=l.child;if(l.subtreeFlags&2064&&k!==null)k.return=l,te=k;else e:for(l=P;te!==null;){if(h=te,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:Nh(9,h)}}catch(G){Je(h,h.return,G)}if(h===l){te=null;break e}var W=h.sibling;if(W!==null){W.return=h.return,te=W;break e}te=h.return}}if(ke=s,Sr(),Kn&&typeof Kn.onPostCommitFiberRoot=="function")try{Kn.onPostCommitFiberRoot(Sh,t)}catch{}i=!0}return i}finally{Ne=n,En.transition=e}}return!1}function F_(t,e,n){e=Ro(n,e),e=Jw(t,e,1),t=ur(t,e,1),e=jt(),t!==null&&($l(t,1,e),Yt(t,e))}function Je(t,e,n){if(t.tag===3)F_(t,t,n);else for(;e!==null;){if(e.tag===3){F_(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(cr===null||!cr.has(i))){t=Ro(n,t),t=eE(e,t,1),e=ur(e,t,1),t=jt(),e!==null&&($l(e,1,t),Yt(e,t));break}}e=e.return}}function iA(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=jt(),t.pingedLanes|=t.suspendedLanes&n,wt===t&&(St&n)===n&&(ft===4||ft===3&&(St&130023424)===St&&500>nt()-sm?Qr(t,0):rm|=n),Yt(t,e)}function wE(t,e){e===0&&(t.mode&1?(e=Qu,Qu<<=1,!(Qu&130023424)&&(Qu=4194304)):e=1);var n=jt();t=Ai(t,e),t!==null&&($l(t,e,n),Yt(t,n))}function rA(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),wE(t,n)}function sA(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(Q(314))}i!==null&&i.delete(e),wE(t,n)}var EE;EE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Gt.current)Kt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Kt=!1,qS(t,e,n);Kt=!!(t.flags&131072)}else Kt=!1,He&&e.flags&1048576&&Sw(e,Kc,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Tc(t,e),t=e.pendingProps;var s=Po(e,Dt.current);_o(e,n),s=Xp(null,e,i,t,s,n);var o=Jp();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Qt(i)?(o=!0,qc(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Zp(e),s.updater=Oh,e.stateNode=s,s._reactInternals=e,kf(e,i,t,n),e=Of(null,e,i,!0,o,n)):(e.tag=0,He&&o&&Up(e),Bt(null,e,s,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Tc(t,e),t=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=aA(i),t=xn(i,t),s){case 0:e=Lf(null,e,i,t,n);break e;case 1:e=R_(null,e,i,t,n);break e;case 11:e=A_(null,e,i,t,n);break e;case 14:e=C_(null,e,i,xn(i.type,t),n);break e}throw Error(Q(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:xn(i,s),Lf(t,e,i,s,n);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:xn(i,s),R_(t,e,i,s,n);case 3:e:{if(rE(e),t===null)throw Error(Q(387));i=e.pendingProps,o=e.memoizedState,s=o.element,Lw(t,e),Yc(e,i,null,n);var l=e.memoizedState;if(i=l.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=Ro(Error(Q(423)),e),e=k_(t,e,i,n,s);break e}else if(i!==s){s=Ro(Error(Q(424)),e),e=k_(t,e,i,n,s);break e}else for(nn=lr(e.stateNode.containerInfo.firstChild),rn=e,He=!0,On=null,n=kw(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(So(),i===s){e=Ci(t,e,n);break e}Bt(t,e,i,n)}e=e.child}return e;case 5:return Ow(e),t===null&&Af(e),i=e.type,s=e.pendingProps,o=t!==null?t.memoizedProps:null,l=s.children,Ef(i,s)?l=null:o!==null&&Ef(i,o)&&(e.flags|=32),iE(t,e),Bt(t,e,l,n),e.child;case 6:return t===null&&Af(e),null;case 13:return sE(t,e,n);case 4:return Kp(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Ao(e,null,i,n):Bt(t,e,i,n),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:xn(i,s),A_(t,e,i,s,n);case 7:return Bt(t,e,e.pendingProps,n),e.child;case 8:return Bt(t,e,e.pendingProps.children,n),e.child;case 12:return Bt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,o=e.memoizedProps,l=s.value,Fe(Gc,i._currentValue),i._currentValue=l,o!==null)if(bn(o.value,l)){if(o.children===s.children&&!Gt.current){e=Ci(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var h=o.dependencies;if(h!==null){l=o.child;for(var d=h.firstContext;d!==null;){if(d.context===i){if(o.tag===1){d=Ei(-1,n&-n),d.tag=2;var m=o.updateQueue;if(m!==null){m=m.shared;var v=m.pending;v===null?d.next=d:(d.next=v.next,v.next=d),m.pending=d}}o.lanes|=n,d=o.alternate,d!==null&&(d.lanes|=n),Cf(o.return,n,e),h.lanes|=n;break}d=d.next}}else if(o.tag===10)l=o.type===e.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(Q(341));l.lanes|=n,h=l.alternate,h!==null&&(h.lanes|=n),Cf(l,n,e),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===e){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}Bt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,_o(e,n),s=Tn(s),i=i(s),e.flags|=1,Bt(t,e,i,n),e.child;case 14:return i=e.type,s=xn(i,e.pendingProps),s=xn(i.type,s),C_(t,e,i,s,n);case 15:return tE(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:xn(i,s),Tc(t,e),e.tag=1,Qt(i)?(t=!0,qc(e)):t=!1,_o(e,n),Xw(e,i,s),kf(e,i,s,n),Of(null,e,i,!0,t,n);case 19:return oE(t,e,n);case 22:return nE(t,e,n)}throw Error(Q(156,e.tag))};function TE(t,e){return Gy(t,e)}function oA(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wn(t,e,n,i){return new oA(t,e,n,i)}function um(t){return t=t.prototype,!(!t||!t.isReactComponent)}function aA(t){if(typeof t=="function")return um(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Rp)return 11;if(t===kp)return 14}return 2}function dr(t,e){var n=t.alternate;return n===null?(n=wn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Sc(t,e,n,i,s,o){var l=2;if(i=t,typeof t=="function")um(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case eo:return Yr(n.children,s,o,e);case Cp:l=8,s|=8;break;case Xd:return t=wn(12,n,e,s|2),t.elementType=Xd,t.lanes=o,t;case Jd:return t=wn(13,n,e,s),t.elementType=Jd,t.lanes=o,t;case ef:return t=wn(19,n,e,s),t.elementType=ef,t.lanes=o,t;case Oy:return Dh(n,s,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case xy:l=10;break e;case Ly:l=9;break e;case Rp:l=11;break e;case kp:l=14;break e;case Zi:l=16,i=null;break e}throw Error(Q(130,t==null?t:typeof t,""))}return e=wn(l,n,e,s),e.elementType=t,e.type=i,e.lanes=o,e}function Yr(t,e,n,i){return t=wn(7,t,i,e),t.lanes=n,t}function Dh(t,e,n,i){return t=wn(22,t,i,e),t.elementType=Oy,t.lanes=n,t.stateNode={isHidden:!1},t}function Vd(t,e,n){return t=wn(6,t,null,e),t.lanes=n,t}function Fd(t,e,n){return e=wn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function lA(t,e,n,i,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vd(0),this.expirationTimes=vd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vd(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function cm(t,e,n,i,s,o,l,h,d){return t=new lA(t,e,n,h,d),e===1?(e=1,o===!0&&(e|=8)):e=0,o=wn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zp(o),t}function uA(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Js,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function IE(t){if(!t)return yr;t=t._reactInternals;e:{if(ds(t)!==t||t.tag!==1)throw Error(Q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Qt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Q(171))}if(t.tag===1){var n=t.type;if(Qt(n))return Iw(t,n,e)}return e}function PE(t,e,n,i,s,o,l,h,d){return t=cm(n,i,!0,t,s,o,l,h,d),t.context=IE(null),n=t.current,i=jt(),s=hr(n),o=Ei(i,s),o.callback=e??null,ur(n,o,s),t.current.lanes=s,$l(t,s,i),Yt(t,i),t}function bh(t,e,n,i){var s=e.current,o=jt(),l=hr(s);return n=IE(n),e.context===null?e.context=n:e.pendingContext=n,e=Ei(o,l),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=ur(s,e,l),t!==null&&(Dn(t,s,l,o),yc(t,s,l)),l}function sh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function z_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function hm(t,e){z_(t,e),(t=t.alternate)&&z_(t,e)}function cA(){return null}var SE=typeof reportError=="function"?reportError:function(t){console.error(t)};function dm(t){this._internalRoot=t}Vh.prototype.render=dm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Q(409));bh(t,e,null,null)};Vh.prototype.unmount=dm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;rs(function(){bh(null,t,null,null)}),e[Si]=null}};function Vh(t){this._internalRoot=t}Vh.prototype.unstable_scheduleHydration=function(t){if(t){var e=nw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Gi.length&&e!==0&&e<Gi[n].priority;n++);Gi.splice(n,0,t),n===0&&rw(t)}};function fm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Fh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function U_(){}function hA(t,e,n,i,s){if(s){if(typeof i=="function"){var o=i;i=function(){var m=sh(l);o.call(m)}}var l=PE(e,i,t,0,null,!1,!1,"",U_);return t._reactRootContainer=l,t[Si]=l.current,El(t.nodeType===8?t.parentNode:t),rs(),l}for(;s=t.lastChild;)t.removeChild(s);if(typeof i=="function"){var h=i;i=function(){var m=sh(d);h.call(m)}}var d=cm(t,0,!1,null,null,!1,!1,"",U_);return t._reactRootContainer=d,t[Si]=d.current,El(t.nodeType===8?t.parentNode:t),rs(function(){bh(e,d,n,i)}),d}function zh(t,e,n,i,s){var o=n._reactRootContainer;if(o){var l=o;if(typeof s=="function"){var h=s;s=function(){var d=sh(l);h.call(d)}}bh(e,l,t,s)}else l=hA(n,e,t,s,i);return sh(l)}ew=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ja(e.pendingLanes);n!==0&&(Op(e,n|1),Yt(e,nt()),!(ke&6)&&(ko=nt()+500,Sr()))}break;case 13:rs(function(){var i=Ai(t,1);if(i!==null){var s=jt();Dn(i,t,1,s)}}),hm(t,1)}};Np=function(t){if(t.tag===13){var e=Ai(t,134217728);if(e!==null){var n=jt();Dn(e,t,134217728,n)}hm(t,134217728)}};tw=function(t){if(t.tag===13){var e=hr(t),n=Ai(t,e);if(n!==null){var i=jt();Dn(n,t,e,i)}hm(t,e)}};nw=function(){return Ne};iw=function(t,e){var n=Ne;try{return Ne=t,e()}finally{Ne=n}};hf=function(t,e,n){switch(e){case"input":if(rf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var s=kh(i);if(!s)throw Error(Q(90));My(i),rf(i,s)}}}break;case"textarea":by(t,n);break;case"select":e=n.value,e!=null&&fo(t,!!n.multiple,e,!1)}};Wy=om;Hy=rs;var dA={usingClientEntryPoint:!1,Events:[Zl,ro,kh,By,jy,om]},Fa={findFiberByHostInstance:qr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},fA={bundleType:Fa.bundleType,version:Fa.version,rendererPackageName:Fa.rendererPackageName,rendererConfig:Fa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Oi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Zy(t),t===null?null:t.stateNode},findFiberByHostInstance:Fa.findFiberByHostInstance||cA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ac=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ac.isDisabled&&ac.supportsFiber)try{Sh=ac.inject(fA),Kn=ac}catch{}}an.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dA;an.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fm(e))throw Error(Q(200));return uA(t,e,null,n)};an.createRoot=function(t,e){if(!fm(t))throw Error(Q(299));var n=!1,i="",s=SE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=cm(t,1,!1,null,null,n,!1,i,s),t[Si]=e.current,El(t.nodeType===8?t.parentNode:t),new dm(e)};an.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Q(188)):(t=Object.keys(t).join(","),Error(Q(268,t)));return t=Zy(e),t=t===null?null:t.stateNode,t};an.flushSync=function(t){return rs(t)};an.hydrate=function(t,e,n){if(!Fh(e))throw Error(Q(200));return zh(null,t,e,!0,n)};an.hydrateRoot=function(t,e,n){if(!fm(t))throw Error(Q(405));var i=n!=null&&n.hydratedSources||null,s=!1,o="",l=SE;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=PE(e,null,t,1,n??null,s,!1,o,l),t[Si]=e.current,El(t),i)for(t=0;t<i.length;t++)n=i[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Vh(e)};an.render=function(t,e,n){if(!Fh(e))throw Error(Q(200));return zh(null,t,e,!1,n)};an.unmountComponentAtNode=function(t){if(!Fh(t))throw Error(Q(40));return t._reactRootContainer?(rs(function(){zh(null,null,t,!1,function(){t._reactRootContainer=null,t[Si]=null})}),!0):!1};an.unstable_batchedUpdates=om;an.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Fh(n))throw Error(Q(200));if(t==null||t._reactInternals===void 0)throw Error(Q(38));return zh(t,e,n,!1,i)};an.version="18.3.1-next-f1338f8080-20240426";function AE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(AE)}catch(t){console.error(t)}}AE(),Ay.exports=an;var CE=Ay.exports,RE,B_=CE;RE=B_.createRoot,B_.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xl(){return xl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},xl.apply(this,arguments)}var ir;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ir||(ir={}));const j_="popstate";function pA(t){t===void 0&&(t={});function e(i,s){let{pathname:o,search:l,hash:h}=i.location;return Hf("",{pathname:o,search:l,hash:h},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){return typeof s=="string"?s:oh(s)}return gA(e,n,null,t)}function ut(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function kE(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function mA(){return Math.random().toString(36).substr(2,8)}function W_(t,e){return{usr:t.state,key:t.key,idx:e}}function Hf(t,e,n,i){return n===void 0&&(n=null),xl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Bo(e):e,{state:n,key:e&&e.key||i||mA()})}function oh(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Bo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function gA(t,e,n,i){i===void 0&&(i={});let{window:s=document.defaultView,v5Compat:o=!1}=i,l=s.history,h=ir.Pop,d=null,m=v();m==null&&(m=0,l.replaceState(xl({},l.state,{idx:m}),""));function v(){return(l.state||{idx:null}).idx}function y(){h=ir.Pop;let U=v(),A=U==null?null:U-m;m=U,d&&d({action:h,location:b.location,delta:A})}function T(U,A){h=ir.Push;let P=Hf(b.location,U,A);m=v()+1;let k=W_(P,m),W=b.createHref(P);try{l.pushState(k,"",W)}catch(G){if(G instanceof DOMException&&G.name==="DataCloneError")throw G;s.location.assign(W)}o&&d&&d({action:h,location:b.location,delta:1})}function N(U,A){h=ir.Replace;let P=Hf(b.location,U,A);m=v();let k=W_(P,m),W=b.createHref(P);l.replaceState(k,"",W),o&&d&&d({action:h,location:b.location,delta:0})}function D(U){let A=s.location.origin!=="null"?s.location.origin:s.location.href,P=typeof U=="string"?U:oh(U);return P=P.replace(/ $/,"%20"),ut(A,"No window.location.(origin|href) available to create URL for href: "+P),new URL(P,A)}let b={get action(){return h},get location(){return t(s,l)},listen(U){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(j_,y),d=U,()=>{s.removeEventListener(j_,y),d=null}},createHref(U){return e(s,U)},createURL:D,encodeLocation(U){let A=D(U);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:T,replace:N,go(U){return l.go(U)}};return b}var H_;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(H_||(H_={}));function _A(t,e,n){return n===void 0&&(n="/"),vA(t,e,n)}function vA(t,e,n,i){let s=typeof e=="string"?Bo(e):e,o=pm(s.pathname||"/",n);if(o==null)return null;let l=xE(t);yA(l);let h=null;for(let d=0;h==null&&d<l.length;++d){let m=LA(o);h=RA(l[d],m)}return h}function xE(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let s=(o,l,h)=>{let d={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};d.relativePath.startsWith("/")&&(ut(d.relativePath.startsWith(i),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(i.length));let m=fr([i,d.relativePath]),v=n.concat(d);o.children&&o.children.length>0&&(ut(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),xE(o.children,e,v,m)),!(o.path==null&&!o.index)&&e.push({path:m,score:AA(m,o.index),routesMeta:v})};return t.forEach((o,l)=>{var h;if(o.path===""||!((h=o.path)!=null&&h.includes("?")))s(o,l);else for(let d of LE(o.path))s(o,l,d)}),e}function LE(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(i.length===0)return s?[o,""]:[o];let l=LE(i.join("/")),h=[];return h.push(...l.map(d=>d===""?o:[o,d].join("/"))),s&&h.push(...l),h.map(d=>t.startsWith("/")&&d===""?"/":d)}function yA(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:CA(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const wA=/^:[\w-]+$/,EA=3,TA=2,IA=1,PA=10,SA=-2,$_=t=>t==="*";function AA(t,e){let n=t.split("/"),i=n.length;return n.some($_)&&(i+=SA),e&&(i+=TA),n.filter(s=>!$_(s)).reduce((s,o)=>s+(wA.test(o)?EA:o===""?IA:PA),i)}function CA(t,e){return t.length===e.length&&t.slice(0,-1).every((i,s)=>i===e[s])?t[t.length-1]-e[e.length-1]:0}function RA(t,e,n){let{routesMeta:i}=t,s={},o="/",l=[];for(let h=0;h<i.length;++h){let d=i[h],m=h===i.length-1,v=o==="/"?e:e.slice(o.length)||"/",y=kA({path:d.relativePath,caseSensitive:d.caseSensitive,end:m},v),T=d.route;if(!y)return null;Object.assign(s,y.params),l.push({params:s,pathname:fr([o,y.pathname]),pathnameBase:DA(fr([o,y.pathnameBase])),route:T}),y.pathnameBase!=="/"&&(o=fr([o,y.pathnameBase]))}return l}function kA(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=xA(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let o=s[0],l=o.replace(/(.)\/+$/,"$1"),h=s.slice(1);return{params:i.reduce((m,v,y)=>{let{paramName:T,isOptional:N}=v;if(T==="*"){let b=h[y]||"";l=o.slice(0,o.length-b.length).replace(/(.)\/+$/,"$1")}const D=h[y];return N&&!D?m[T]=void 0:m[T]=(D||"").replace(/%2F/g,"/"),m},{}),pathname:o,pathnameBase:l,pattern:t}}function xA(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),kE(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,h,d)=>(i.push({paramName:h,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function LA(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return kE(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function pm(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function OA(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:s=""}=typeof t=="string"?Bo(t):t;return{pathname:n?n.startsWith("/")?n:NA(n,e):e,search:bA(i),hash:VA(s)}}function NA(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function zd(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function MA(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function OE(t,e){let n=MA(t);return e?n.map((i,s)=>s===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function NE(t,e,n,i){i===void 0&&(i=!1);let s;typeof t=="string"?s=Bo(t):(s=xl({},t),ut(!s.pathname||!s.pathname.includes("?"),zd("?","pathname","search",s)),ut(!s.pathname||!s.pathname.includes("#"),zd("#","pathname","hash",s)),ut(!s.search||!s.search.includes("#"),zd("#","search","hash",s)));let o=t===""||s.pathname==="",l=o?"/":s.pathname,h;if(l==null)h=n;else{let y=e.length-1;if(!i&&l.startsWith("..")){let T=l.split("/");for(;T[0]==="..";)T.shift(),y-=1;s.pathname=T.join("/")}h=y>=0?e[y]:"/"}let d=OA(s,h),m=l&&l!=="/"&&l.endsWith("/"),v=(o||l===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(m||v)&&(d.pathname+="/"),d}const fr=t=>t.join("/").replace(/\/\/+/g,"/"),DA=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),bA=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,VA=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function FA(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const ME=["post","put","patch","delete"];new Set(ME);const zA=["get",...ME];new Set(zA);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ll(){return Ll=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ll.apply(this,arguments)}const mm=$.createContext(null),UA=$.createContext(null),fs=$.createContext(null),Uh=$.createContext(null),Ar=$.createContext({outlet:null,matches:[],isDataRoute:!1}),DE=$.createContext(null);function BA(t,e){let{relative:n}=e===void 0?{}:e;Gl()||ut(!1);let{basename:i,navigator:s}=$.useContext(fs),{hash:o,pathname:l,search:h}=VE(t,{relative:n}),d=l;return i!=="/"&&(d=l==="/"?i:fr([i,l])),s.createHref({pathname:d,search:h,hash:o})}function Gl(){return $.useContext(Uh)!=null}function Bh(){return Gl()||ut(!1),$.useContext(Uh).location}function bE(t){$.useContext(fs).static||$.useLayoutEffect(t)}function gm(){let{isDataRoute:t}=$.useContext(Ar);return t?tC():jA()}function jA(){Gl()||ut(!1);let t=$.useContext(mm),{basename:e,future:n,navigator:i}=$.useContext(fs),{matches:s}=$.useContext(Ar),{pathname:o}=Bh(),l=JSON.stringify(OE(s,n.v7_relativeSplatPath)),h=$.useRef(!1);return bE(()=>{h.current=!0}),$.useCallback(function(m,v){if(v===void 0&&(v={}),!h.current)return;if(typeof m=="number"){i.go(m);return}let y=NE(m,JSON.parse(l),o,v.relative==="path");t==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:fr([e,y.pathname])),(v.replace?i.replace:i.push)(y,v.state,v)},[e,i,l,o,t])}function WA(){let{matches:t}=$.useContext(Ar),e=t[t.length-1];return e?e.params:{}}function VE(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=$.useContext(fs),{matches:s}=$.useContext(Ar),{pathname:o}=Bh(),l=JSON.stringify(OE(s,i.v7_relativeSplatPath));return $.useMemo(()=>NE(t,JSON.parse(l),o,n==="path"),[t,l,o,n])}function HA(t,e){return $A(t,e)}function $A(t,e,n,i){Gl()||ut(!1);let{navigator:s}=$.useContext(fs),{matches:o}=$.useContext(Ar),l=o[o.length-1],h=l?l.params:{};l&&l.pathname;let d=l?l.pathnameBase:"/";l&&l.route;let m=Bh(),v;if(e){var y;let U=typeof e=="string"?Bo(e):e;d==="/"||(y=U.pathname)!=null&&y.startsWith(d)||ut(!1),v=U}else v=m;let T=v.pathname||"/",N=T;if(d!=="/"){let U=d.replace(/^\//,"").split("/");N="/"+T.replace(/^\//,"").split("/").slice(U.length).join("/")}let D=_A(t,{pathname:N}),b=QA(D&&D.map(U=>Object.assign({},U,{params:Object.assign({},h,U.params),pathname:fr([d,s.encodeLocation?s.encodeLocation(U.pathname).pathname:U.pathname]),pathnameBase:U.pathnameBase==="/"?d:fr([d,s.encodeLocation?s.encodeLocation(U.pathnameBase).pathname:U.pathnameBase])})),o,n,i);return e&&b?$.createElement(Uh.Provider,{value:{location:Ll({pathname:"/",search:"",hash:"",state:null,key:"default"},v),navigationType:ir.Pop}},b):b}function qA(){let t=eC(),e=FA(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return $.createElement($.Fragment,null,$.createElement("h2",null,"Unexpected Application Error!"),$.createElement("h3",{style:{fontStyle:"italic"}},e),n?$.createElement("pre",{style:s},n):null,null)}const ZA=$.createElement(qA,null);class KA extends $.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?$.createElement(Ar.Provider,{value:this.props.routeContext},$.createElement(DE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function GA(t){let{routeContext:e,match:n,children:i}=t,s=$.useContext(mm);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),$.createElement(Ar.Provider,{value:e},i)}function QA(t,e,n,i){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=i)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let l=t,h=(s=n)==null?void 0:s.errors;if(h!=null){let v=l.findIndex(y=>y.route.id&&(h==null?void 0:h[y.route.id])!==void 0);v>=0||ut(!1),l=l.slice(0,Math.min(l.length,v+1))}let d=!1,m=-1;if(n&&i&&i.v7_partialHydration)for(let v=0;v<l.length;v++){let y=l[v];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(m=v),y.route.id){let{loaderData:T,errors:N}=n,D=y.route.loader&&T[y.route.id]===void 0&&(!N||N[y.route.id]===void 0);if(y.route.lazy||D){d=!0,m>=0?l=l.slice(0,m+1):l=[l[0]];break}}}return l.reduceRight((v,y,T)=>{let N,D=!1,b=null,U=null;n&&(N=h&&y.route.id?h[y.route.id]:void 0,b=y.route.errorElement||ZA,d&&(m<0&&T===0?(nC("route-fallback"),D=!0,U=null):m===T&&(D=!0,U=y.route.hydrateFallbackElement||null)));let A=e.concat(l.slice(0,T+1)),P=()=>{let k;return N?k=b:D?k=U:y.route.Component?k=$.createElement(y.route.Component,null):y.route.element?k=y.route.element:k=v,$.createElement(GA,{match:y,routeContext:{outlet:v,matches:A,isDataRoute:n!=null},children:k})};return n&&(y.route.ErrorBoundary||y.route.errorElement||T===0)?$.createElement(KA,{location:n.location,revalidation:n.revalidation,component:b,error:N,children:P(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):P()},null)}var FE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(FE||{}),zE=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(zE||{});function YA(t){let e=$.useContext(mm);return e||ut(!1),e}function XA(t){let e=$.useContext(UA);return e||ut(!1),e}function JA(t){let e=$.useContext(Ar);return e||ut(!1),e}function UE(t){let e=JA(),n=e.matches[e.matches.length-1];return n.route.id||ut(!1),n.route.id}function eC(){var t;let e=$.useContext(DE),n=XA(),i=UE();return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function tC(){let{router:t}=YA(FE.UseNavigateStable),e=UE(zE.UseNavigateStable),n=$.useRef(!1);return bE(()=>{n.current=!0}),$.useCallback(function(s,o){o===void 0&&(o={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Ll({fromRouteId:e},o)))},[t,e])}const q_={};function nC(t,e,n){q_[t]||(q_[t]=!0)}function iC(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Ha(t){ut(!1)}function rC(t){let{basename:e="/",children:n=null,location:i,navigationType:s=ir.Pop,navigator:o,static:l=!1,future:h}=t;Gl()&&ut(!1);let d=e.replace(/^\/*/,"/"),m=$.useMemo(()=>({basename:d,navigator:o,static:l,future:Ll({v7_relativeSplatPath:!1},h)}),[d,h,o,l]);typeof i=="string"&&(i=Bo(i));let{pathname:v="/",search:y="",hash:T="",state:N=null,key:D="default"}=i,b=$.useMemo(()=>{let U=pm(v,d);return U==null?null:{location:{pathname:U,search:y,hash:T,state:N,key:D},navigationType:s}},[d,v,y,T,N,D,s]);return b==null?null:$.createElement(fs.Provider,{value:m},$.createElement(Uh.Provider,{children:n,value:b}))}function sC(t){let{children:e,location:n}=t;return HA($f(e),n)}new Promise(()=>{});function $f(t,e){e===void 0&&(e=[]);let n=[];return $.Children.forEach(t,(i,s)=>{if(!$.isValidElement(i))return;let o=[...e,s];if(i.type===$.Fragment){n.push.apply(n,$f(i.props.children,o));return}i.type!==Ha&&ut(!1),!i.props.index||!i.props.children||ut(!1);let l={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(l.children=$f(i.props.children,o)),n.push(l)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qf(){return qf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},qf.apply(this,arguments)}function oC(t,e){if(t==null)return{};var n={},i=Object.keys(t),s,o;for(o=0;o<i.length;o++)s=i[o],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function aC(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function lC(t,e){return t.button===0&&(!e||e==="_self")&&!aC(t)}const uC=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],cC="6";try{window.__reactRouterVersion=cC}catch{}const hC="startTransition",Z_=iP[hC];function dC(t){let{basename:e,children:n,future:i,window:s}=t,o=$.useRef();o.current==null&&(o.current=pA({window:s,v5Compat:!0}));let l=o.current,[h,d]=$.useState({action:l.action,location:l.location}),{v7_startTransition:m}=i||{},v=$.useCallback(y=>{m&&Z_?Z_(()=>d(y)):d(y)},[d,m]);return $.useLayoutEffect(()=>l.listen(v),[l,v]),$.useEffect(()=>iC(i),[i]),$.createElement(rC,{basename:e,children:n,location:h.location,navigationType:h.action,navigator:l,future:i})}const fC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",pC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,BE=$.forwardRef(function(e,n){let{onClick:i,relative:s,reloadDocument:o,replace:l,state:h,target:d,to:m,preventScrollReset:v,viewTransition:y}=e,T=oC(e,uC),{basename:N}=$.useContext(fs),D,b=!1;if(typeof m=="string"&&pC.test(m)&&(D=m,fC))try{let k=new URL(window.location.href),W=m.startsWith("//")?new URL(k.protocol+m):new URL(m),G=pm(W.pathname,N);W.origin===k.origin&&G!=null?m=G+W.search+W.hash:b=!0}catch{}let U=BA(m,{relative:s}),A=mC(m,{replace:l,state:h,target:d,preventScrollReset:v,relative:s,viewTransition:y});function P(k){i&&i(k),k.defaultPrevented||A(k)}return $.createElement("a",qf({},T,{href:D||U,onClick:b||o?i:P,ref:n,target:d}))});var K_;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(K_||(K_={}));var G_;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(G_||(G_={}));function mC(t,e){let{target:n,replace:i,state:s,preventScrollReset:o,relative:l,viewTransition:h}=e===void 0?{}:e,d=gm(),m=Bh(),v=VE(t,{relative:l});return $.useCallback(y=>{if(lC(y,n)){y.preventDefault();let T=i!==void 0?i:oh(m)===oh(v);d(t,{replace:T,state:s,preventScrollReset:o,relative:l,viewTransition:h})}},[m,d,v,i,s,n,t,o,l,h])}function jE(t,e){const n=$.useRef(e);$.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const gC=1;function _C(t){return Object.freeze({__version:gC,map:t})}function vC(t,e){return Object.freeze({...t,...e})}const WE=$.createContext(null),HE=WE.Provider;function $E(){const t=$.useContext(WE);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function yC(t){function e(n,i){const{instance:s,context:o}=t(n).current;return $.useImperativeHandle(i,()=>s),n.children==null?null:Dc.createElement(HE,{value:o},n.children)}return $.forwardRef(e)}function wC(t){function e(n,i){const[s,o]=$.useState(!1),{instance:l}=t(n,o).current;$.useImperativeHandle(i,()=>l),$.useEffect(function(){s&&l.update()},[l,s,n.children]);const h=l._contentNode;return h?CE.createPortal(n.children,h):null}return $.forwardRef(e)}function EC(t){function e(n,i){const{instance:s}=t(n).current;return $.useImperativeHandle(i,()=>s),null}return $.forwardRef(e)}function qE(t,e){const n=$.useRef();$.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function _m(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function TC(t,e){return function(i,s){const o=$E(),l=t(_m(i,o),o);return jE(o.map,i.attribution),qE(l.current,i.eventHandlers),e(l.current,o,i,s),l}}var Zf={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(BI,function(n){var i="1.9.4";function s(r){var a,c,f,g;for(c=1,f=arguments.length;c<f;c++){g=arguments[c];for(a in g)r[a]=g[a]}return r}var o=Object.create||function(){function r(){}return function(a){return r.prototype=a,new r}}();function l(r,a){var c=Array.prototype.slice;if(r.bind)return r.bind.apply(r,c.call(arguments,1));var f=c.call(arguments,2);return function(){return r.apply(a,f.length?f.concat(c.call(arguments)):arguments)}}var h=0;function d(r){return"_leaflet_id"in r||(r._leaflet_id=++h),r._leaflet_id}function m(r,a,c){var f,g,w,R;return R=function(){f=!1,g&&(w.apply(c,g),g=!1)},w=function(){f?g=arguments:(r.apply(c,arguments),setTimeout(R,a),f=!0)},w}function v(r,a,c){var f=a[1],g=a[0],w=f-g;return r===f&&c?r:((r-g)%w+w)%w+g}function y(){return!1}function T(r,a){if(a===!1)return r;var c=Math.pow(10,a===void 0?6:a);return Math.round(r*c)/c}function N(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function D(r){return N(r).split(/\s+/)}function b(r,a){Object.prototype.hasOwnProperty.call(r,"options")||(r.options=r.options?o(r.options):{});for(var c in a)r.options[c]=a[c];return r.options}function U(r,a,c){var f=[];for(var g in r)f.push(encodeURIComponent(c?g.toUpperCase():g)+"="+encodeURIComponent(r[g]));return(!a||a.indexOf("?")===-1?"?":"&")+f.join("&")}var A=/\{ *([\w_ -]+) *\}/g;function P(r,a){return r.replace(A,function(c,f){var g=a[f];if(g===void 0)throw new Error("No value provided for variable "+c);return typeof g=="function"&&(g=g(a)),g})}var k=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"};function W(r,a){for(var c=0;c<r.length;c++)if(r[c]===a)return c;return-1}var G="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function X(r){return window["webkit"+r]||window["moz"+r]||window["ms"+r]}var C=0;function I(r){var a=+new Date,c=Math.max(0,16-(a-C));return C=a+c,window.setTimeout(r,c)}var S=window.requestAnimationFrame||X("RequestAnimationFrame")||I,x=window.cancelAnimationFrame||X("CancelAnimationFrame")||X("CancelRequestAnimationFrame")||function(r){window.clearTimeout(r)};function M(r,a,c){if(c&&S===I)r.call(a);else return S.call(window,l(r,a))}function V(r){r&&x.call(window,r)}var O={__proto__:null,extend:s,create:o,bind:l,get lastId(){return h},stamp:d,throttle:m,wrapNum:v,falseFn:y,formatNum:T,trim:N,splitWords:D,setOptions:b,getParamString:U,template:P,isArray:k,indexOf:W,emptyImageUrl:G,requestFn:S,cancelFn:x,requestAnimFrame:M,cancelAnimFrame:V};function Ye(){}Ye.extend=function(r){var a=function(){b(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},c=a.__super__=this.prototype,f=o(c);f.constructor=a,a.prototype=f;for(var g in this)Object.prototype.hasOwnProperty.call(this,g)&&g!=="prototype"&&g!=="__super__"&&(a[g]=this[g]);return r.statics&&s(a,r.statics),r.includes&&(ti(r.includes),s.apply(null,[f].concat(r.includes))),s(f,r),delete f.statics,delete f.includes,f.options&&(f.options=c.options?o(c.options):{},s(f.options,r.options)),f._initHooks=[],f.callInitHooks=function(){if(!this._initHooksCalled){c.callInitHooks&&c.callInitHooks.call(this),this._initHooksCalled=!0;for(var w=0,R=f._initHooks.length;w<R;w++)f._initHooks[w].call(this)}},a},Ye.include=function(r){var a=this.prototype.options;return s(this.prototype,r),r.options&&(this.prototype.options=a,this.mergeOptions(r.options)),this},Ye.mergeOptions=function(r){return s(this.prototype.options,r),this},Ye.addInitHook=function(r){var a=Array.prototype.slice.call(arguments,1),c=typeof r=="function"?r:function(){this[r].apply(this,a)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c),this};function ti(r){if(!(typeof L>"u"||!L||!L.Mixin)){r=k(r)?r:[r];for(var a=0;a<r.length;a++)r[a]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ct={on:function(r,a,c){if(typeof r=="object")for(var f in r)this._on(f,r[f],a);else{r=D(r);for(var g=0,w=r.length;g<w;g++)this._on(r[g],a,c)}return this},off:function(r,a,c){if(!arguments.length)delete this._events;else if(typeof r=="object")for(var f in r)this._off(f,r[f],a);else{r=D(r);for(var g=arguments.length===1,w=0,R=r.length;w<R;w++)g?this._off(r[w]):this._off(r[w],a,c)}return this},_on:function(r,a,c,f){if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}if(this._listens(r,a,c)===!1){c===this&&(c=void 0);var g={fn:a,ctx:c};f&&(g.once=!0),this._events=this._events||{},this._events[r]=this._events[r]||[],this._events[r].push(g)}},_off:function(r,a,c){var f,g,w;if(this._events&&(f=this._events[r],!!f)){if(arguments.length===1){if(this._firingCount)for(g=0,w=f.length;g<w;g++)f[g].fn=y;delete this._events[r];return}if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}var R=this._listens(r,a,c);if(R!==!1){var z=f[R];this._firingCount&&(z.fn=y,this._events[r]=f=f.slice()),f.splice(R,1)}}},fire:function(r,a,c){if(!this.listens(r,c))return this;var f=s({},a,{type:r,target:this,sourceTarget:a&&a.sourceTarget||this});if(this._events){var g=this._events[r];if(g){this._firingCount=this._firingCount+1||1;for(var w=0,R=g.length;w<R;w++){var z=g[w],B=z.fn;z.once&&this.off(r,B,z.ctx),B.call(z.ctx||this,f)}this._firingCount--}}return c&&this._propagateEvent(f),this},listens:function(r,a,c,f){typeof r!="string"&&console.warn('"string" type argument expected');var g=a;typeof a!="function"&&(f=!!a,g=void 0,c=void 0);var w=this._events&&this._events[r];if(w&&w.length&&this._listens(r,g,c)!==!1)return!0;if(f){for(var R in this._eventParents)if(this._eventParents[R].listens(r,a,c,f))return!0}return!1},_listens:function(r,a,c){if(!this._events)return!1;var f=this._events[r]||[];if(!a)return!!f.length;c===this&&(c=void 0);for(var g=0,w=f.length;g<w;g++)if(f[g].fn===a&&f[g].ctx===c)return g;return!1},once:function(r,a,c){if(typeof r=="object")for(var f in r)this._on(f,r[f],a,!0);else{r=D(r);for(var g=0,w=r.length;g<w;g++)this._on(r[g],a,c,!0)}return this},addEventParent:function(r){return this._eventParents=this._eventParents||{},this._eventParents[d(r)]=r,this},removeEventParent:function(r){return this._eventParents&&delete this._eventParents[d(r)],this},_propagateEvent:function(r){for(var a in this._eventParents)this._eventParents[a].fire(r.type,s({layer:r.target,propagatedFrom:r.target},r),!0)}};ct.addEventListener=ct.on,ct.removeEventListener=ct.clearAllEventListeners=ct.off,ct.addOneTimeEventListener=ct.once,ct.fireEvent=ct.fire,ct.hasEventListeners=ct.listens;var Ft=Ye.extend(ct);function H(r,a,c){this.x=c?Math.round(r):r,this.y=c?Math.round(a):a}var ue=Math.trunc||function(r){return r>0?Math.floor(r):Math.ceil(r)};H.prototype={clone:function(){return new H(this.x,this.y)},add:function(r){return this.clone()._add(Y(r))},_add:function(r){return this.x+=r.x,this.y+=r.y,this},subtract:function(r){return this.clone()._subtract(Y(r))},_subtract:function(r){return this.x-=r.x,this.y-=r.y,this},divideBy:function(r){return this.clone()._divideBy(r)},_divideBy:function(r){return this.x/=r,this.y/=r,this},multiplyBy:function(r){return this.clone()._multiplyBy(r)},_multiplyBy:function(r){return this.x*=r,this.y*=r,this},scaleBy:function(r){return new H(this.x*r.x,this.y*r.y)},unscaleBy:function(r){return new H(this.x/r.x,this.y/r.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ue(this.x),this.y=ue(this.y),this},distanceTo:function(r){r=Y(r);var a=r.x-this.x,c=r.y-this.y;return Math.sqrt(a*a+c*c)},equals:function(r){return r=Y(r),r.x===this.x&&r.y===this.y},contains:function(r){return r=Y(r),Math.abs(r.x)<=Math.abs(this.x)&&Math.abs(r.y)<=Math.abs(this.y)},toString:function(){return"Point("+T(this.x)+", "+T(this.y)+")"}};function Y(r,a,c){return r instanceof H?r:k(r)?new H(r[0],r[1]):r==null?r:typeof r=="object"&&"x"in r&&"y"in r?new H(r.x,r.y):new H(r,a,c)}function he(r,a){if(r)for(var c=a?[r,a]:r,f=0,g=c.length;f<g;f++)this.extend(c[f])}he.prototype={extend:function(r){var a,c;if(!r)return this;if(r instanceof H||typeof r[0]=="number"||"x"in r)a=c=Y(r);else if(r=ve(r),a=r.min,c=r.max,!a||!c)return this;return!this.min&&!this.max?(this.min=a.clone(),this.max=c.clone()):(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(c.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(c.y,this.max.y)),this},getCenter:function(r){return Y((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,r)},getBottomLeft:function(){return Y(this.min.x,this.max.y)},getTopRight:function(){return Y(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(r){var a,c;return typeof r[0]=="number"||r instanceof H?r=Y(r):r=ve(r),r instanceof he?(a=r.min,c=r.max):a=c=r,a.x>=this.min.x&&c.x<=this.max.x&&a.y>=this.min.y&&c.y<=this.max.y},intersects:function(r){r=ve(r);var a=this.min,c=this.max,f=r.min,g=r.max,w=g.x>=a.x&&f.x<=c.x,R=g.y>=a.y&&f.y<=c.y;return w&&R},overlaps:function(r){r=ve(r);var a=this.min,c=this.max,f=r.min,g=r.max,w=g.x>a.x&&f.x<c.x,R=g.y>a.y&&f.y<c.y;return w&&R},isValid:function(){return!!(this.min&&this.max)},pad:function(r){var a=this.min,c=this.max,f=Math.abs(a.x-c.x)*r,g=Math.abs(a.y-c.y)*r;return ve(Y(a.x-f,a.y-g),Y(c.x+f,c.y+g))},equals:function(r){return r?(r=ve(r),this.min.equals(r.getTopLeft())&&this.max.equals(r.getBottomRight())):!1}};function ve(r,a){return!r||r instanceof he?r:new he(r,a)}function Ie(r,a){if(r)for(var c=a?[r,a]:r,f=0,g=c.length;f<g;f++)this.extend(c[f])}Ie.prototype={extend:function(r){var a=this._southWest,c=this._northEast,f,g;if(r instanceof ye)f=r,g=r;else if(r instanceof Ie){if(f=r._southWest,g=r._northEast,!f||!g)return this}else return r?this.extend(pe(r)||Le(r)):this;return!a&&!c?(this._southWest=new ye(f.lat,f.lng),this._northEast=new ye(g.lat,g.lng)):(a.lat=Math.min(f.lat,a.lat),a.lng=Math.min(f.lng,a.lng),c.lat=Math.max(g.lat,c.lat),c.lng=Math.max(g.lng,c.lng)),this},pad:function(r){var a=this._southWest,c=this._northEast,f=Math.abs(a.lat-c.lat)*r,g=Math.abs(a.lng-c.lng)*r;return new Ie(new ye(a.lat-f,a.lng-g),new ye(c.lat+f,c.lng+g))},getCenter:function(){return new ye((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ye(this.getNorth(),this.getWest())},getSouthEast:function(){return new ye(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(r){typeof r[0]=="number"||r instanceof ye||"lat"in r?r=pe(r):r=Le(r);var a=this._southWest,c=this._northEast,f,g;return r instanceof Ie?(f=r.getSouthWest(),g=r.getNorthEast()):f=g=r,f.lat>=a.lat&&g.lat<=c.lat&&f.lng>=a.lng&&g.lng<=c.lng},intersects:function(r){r=Le(r);var a=this._southWest,c=this._northEast,f=r.getSouthWest(),g=r.getNorthEast(),w=g.lat>=a.lat&&f.lat<=c.lat,R=g.lng>=a.lng&&f.lng<=c.lng;return w&&R},overlaps:function(r){r=Le(r);var a=this._southWest,c=this._northEast,f=r.getSouthWest(),g=r.getNorthEast(),w=g.lat>a.lat&&f.lat<c.lat,R=g.lng>a.lng&&f.lng<c.lng;return w&&R},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(r,a){return r?(r=Le(r),this._southWest.equals(r.getSouthWest(),a)&&this._northEast.equals(r.getNorthEast(),a)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Le(r,a){return r instanceof Ie?r:new Ie(r,a)}function ye(r,a,c){if(isNaN(r)||isNaN(a))throw new Error("Invalid LatLng object: ("+r+", "+a+")");this.lat=+r,this.lng=+a,c!==void 0&&(this.alt=+c)}ye.prototype={equals:function(r,a){if(!r)return!1;r=pe(r);var c=Math.max(Math.abs(this.lat-r.lat),Math.abs(this.lng-r.lng));return c<=(a===void 0?1e-9:a)},toString:function(r){return"LatLng("+T(this.lat,r)+", "+T(this.lng,r)+")"},distanceTo:function(r){return zn.distance(this,pe(r))},wrap:function(){return zn.wrapLatLng(this)},toBounds:function(r){var a=180*r/40075017,c=a/Math.cos(Math.PI/180*this.lat);return Le([this.lat-a,this.lng-c],[this.lat+a,this.lng+c])},clone:function(){return new ye(this.lat,this.lng,this.alt)}};function pe(r,a,c){return r instanceof ye?r:k(r)&&typeof r[0]!="object"?r.length===3?new ye(r[0],r[1],r[2]):r.length===2?new ye(r[0],r[1]):null:r==null?r:typeof r=="object"&&"lat"in r?new ye(r.lat,"lng"in r?r.lng:r.lon,r.alt):a===void 0?null:new ye(r,a,c)}var ht={latLngToPoint:function(r,a){var c=this.projection.project(r),f=this.scale(a);return this.transformation._transform(c,f)},pointToLatLng:function(r,a){var c=this.scale(a),f=this.transformation.untransform(r,c);return this.projection.unproject(f)},project:function(r){return this.projection.project(r)},unproject:function(r){return this.projection.unproject(r)},scale:function(r){return 256*Math.pow(2,r)},zoom:function(r){return Math.log(r/256)/Math.LN2},getProjectedBounds:function(r){if(this.infinite)return null;var a=this.projection.bounds,c=this.scale(r),f=this.transformation.transform(a.min,c),g=this.transformation.transform(a.max,c);return new he(f,g)},infinite:!1,wrapLatLng:function(r){var a=this.wrapLng?v(r.lng,this.wrapLng,!0):r.lng,c=this.wrapLat?v(r.lat,this.wrapLat,!0):r.lat,f=r.alt;return new ye(c,a,f)},wrapLatLngBounds:function(r){var a=r.getCenter(),c=this.wrapLatLng(a),f=a.lat-c.lat,g=a.lng-c.lng;if(f===0&&g===0)return r;var w=r.getSouthWest(),R=r.getNorthEast(),z=new ye(w.lat-f,w.lng-g),B=new ye(R.lat-f,R.lng-g);return new Ie(z,B)}},zn=s({},ht,{wrapLng:[-180,180],R:6371e3,distance:function(r,a){var c=Math.PI/180,f=r.lat*c,g=a.lat*c,w=Math.sin((a.lat-r.lat)*c/2),R=Math.sin((a.lng-r.lng)*c/2),z=w*w+Math.cos(f)*Math.cos(g)*R*R,B=2*Math.atan2(Math.sqrt(z),Math.sqrt(1-z));return this.R*B}}),uu=6378137,Mi={R:uu,MAX_LATITUDE:85.0511287798,project:function(r){var a=Math.PI/180,c=this.MAX_LATITUDE,f=Math.max(Math.min(c,r.lat),-c),g=Math.sin(f*a);return new H(this.R*r.lng*a,this.R*Math.log((1+g)/(1-g))/2)},unproject:function(r){var a=180/Math.PI;return new ye((2*Math.atan(Math.exp(r.y/this.R))-Math.PI/2)*a,r.x*a/this.R)},bounds:function(){var r=uu*Math.PI;return new he([-r,-r],[r,r])}()};function Di(r,a,c,f){if(k(r)){this._a=r[0],this._b=r[1],this._c=r[2],this._d=r[3];return}this._a=r,this._b=a,this._c=c,this._d=f}Di.prototype={transform:function(r,a){return this._transform(r.clone(),a)},_transform:function(r,a){return a=a||1,r.x=a*(this._a*r.x+this._b),r.y=a*(this._c*r.y+this._d),r},untransform:function(r,a){return a=a||1,new H((r.x/a-this._b)/this._a,(r.y/a-this._d)/this._c)}};function ni(r,a,c,f){return new Di(r,a,c,f)}var kr=s({},zn,{code:"EPSG:3857",projection:Mi,transformation:function(){var r=.5/(Math.PI*Mi.R);return ni(r,.5,-r,.5)}()}),Go=s({},kr,{code:"EPSG:900913"});function vs(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function Qo(r,a){var c="",f,g,w,R,z,B;for(f=0,w=r.length;f<w;f++){for(z=r[f],g=0,R=z.length;g<R;g++)B=z[g],c+=(g?"L":"M")+B.x+" "+B.y;c+=a?se.svg?"z":"x":""}return c||"M0 0"}var Yo=document.documentElement.style,ys="ActiveXObject"in window,cu=ys&&!document.addEventListener,ws="msLaunchUri"in navigator&&!("documentMode"in document),Es=un("webkit"),hu=un("android"),Ts=un("android 2")||un("android 3"),Xo=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),du=hu&&un("Google")&&Xo<537&&!("AudioNode"in window),it=!!window.opera,mt=!ws&&un("chrome"),xr=un("gecko")&&!Es&&!it&&!ys,fu=!mt&&un("safari"),Jo=un("phantom"),pu="OTransition"in Yo,Lr=navigator.platform.indexOf("Win")===0,ea=ys&&"transition"in Yo,Is="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Ts,Ps="MozPerspective"in Yo,sd=!window.L_DISABLE_3D&&(ea||Is||Ps)&&!pu&&!Jo,Or=typeof orientation<"u"||un("mobile"),ta=Or&&Es,mu=Or&&Is,na=!window.PointerEvent&&window.MSPointerEvent,bi=!!(window.PointerEvent||na),Ss="ontouchstart"in window||!!window.TouchEvent,ia=!window.L_NO_TOUCH&&(Ss||bi),ii=Or&&it,gu=Or&&xr,As=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,_u=function(){var r=!1;try{var a=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("testPassiveEventSupport",y,a),window.removeEventListener("testPassiveEventSupport",y,a)}catch{}return r}(),Nr=function(){return!!document.createElement("canvas").getContext}(),Cs=!!(document.createElementNS&&vs("svg").createSVGRect),Et=!!Cs&&function(){var r=document.createElement("div");return r.innerHTML="<svg/>",(r.firstChild&&r.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),vu=!Cs&&function(){try{var r=document.createElement("div");r.innerHTML='<v:shape adj="1"/>';var a=r.firstChild;return a.style.behavior="url(#default#VML)",a&&typeof a.adj=="object"}catch{return!1}}(),Mr=navigator.platform.indexOf("Mac")===0,Dr=navigator.platform.indexOf("Linux")===0;function un(r){return navigator.userAgent.toLowerCase().indexOf(r)>=0}var se={ie:ys,ielt9:cu,edge:ws,webkit:Es,android:hu,android23:Ts,androidStock:du,opera:it,chrome:mt,gecko:xr,safari:fu,phantom:Jo,opera12:pu,win:Lr,ie3d:ea,webkit3d:Is,gecko3d:Ps,any3d:sd,mobile:Or,mobileWebkit:ta,mobileWebkit3d:mu,msPointer:na,pointer:bi,touch:ia,touchNative:Ss,mobileOpera:ii,mobileGecko:gu,retina:As,passiveEvents:_u,canvas:Nr,svg:Cs,vml:vu,inlineSvg:Et,mac:Mr,linux:Dr},ri=se.msPointer?"MSPointerDown":"pointerdown",yu=se.msPointer?"MSPointerMove":"pointermove",wu=se.msPointer?"MSPointerUp":"pointerup",br=se.msPointer?"MSPointerCancel":"pointercancel",Rs={touchstart:ri,touchmove:yu,touchend:wu,touchcancel:br},ks={touchstart:Ls,touchmove:xs,touchend:xs,touchcancel:xs},Pn={},Sn=!1;function Eu(r,a,c){return a==="touchstart"&&Iu(),ks[a]?(c=ks[a].bind(this,c),r.addEventListener(Rs[a],c,!1),c):(console.warn("wrong event specified:",a),y)}function Tu(r,a,c){if(!Rs[a]){console.warn("wrong event specified:",a);return}r.removeEventListener(Rs[a],c,!1)}function ra(r){Pn[r.pointerId]=r}function sa(r){Pn[r.pointerId]&&(Pn[r.pointerId]=r)}function oa(r){delete Pn[r.pointerId]}function Iu(){Sn||(document.addEventListener(ri,ra,!0),document.addEventListener(yu,sa,!0),document.addEventListener(wu,oa,!0),document.addEventListener(br,oa,!0),Sn=!0)}function xs(r,a){if(a.pointerType!==(a.MSPOINTER_TYPE_MOUSE||"mouse")){a.touches=[];for(var c in Pn)a.touches.push(Pn[c]);a.changedTouches=[a],r(a)}}function Ls(r,a){a.MSPOINTER_TYPE_TOUCH&&a.pointerType===a.MSPOINTER_TYPE_TOUCH&&$e(a),xs(r,a)}function Pu(r){var a={},c,f;for(f in r)c=r[f],a[f]=c&&c.bind?c.bind(r):c;return r=a,a.type="dblclick",a.detail=2,a.isTrusted=!1,a._simulated=!0,a}var aa=200;function Vr(r,a){r.addEventListener("dblclick",a);var c=0,f;function g(w){if(w.detail!==1){f=w.detail;return}if(!(w.pointerType==="mouse"||w.sourceCapabilities&&!w.sourceCapabilities.firesTouchEvents)){var R=ya(w);if(!(R.some(function(B){return B instanceof HTMLLabelElement&&B.attributes.for})&&!R.some(function(B){return B instanceof HTMLInputElement||B instanceof HTMLSelectElement}))){var z=Date.now();z-c<=aa?(f++,f===2&&a(Pu(w))):f=1,c=z}}}return r.addEventListener("click",g),{dblclick:a,simDblclick:g}}function si(r,a){r.removeEventListener("dblclick",a.dblclick),r.removeEventListener("click",a.simDblclick)}var Fr=ai(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),zr=ai(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),la=zr==="webkitTransition"||zr==="OTransition"?zr+"End":"transitionend";function ua(r){return typeof r=="string"?document.getElementById(r):r}function Vi(r,a){var c=r.style[a]||r.currentStyle&&r.currentStyle[a];if((!c||c==="auto")&&document.defaultView){var f=document.defaultView.getComputedStyle(r,null);c=f?f[a]:null}return c==="auto"?null:c}function Pe(r,a,c){var f=document.createElement(r);return f.className=a||"",c&&c.appendChild(f),f}function Ve(r){var a=r.parentNode;a&&a.removeChild(r)}function Ur(r){for(;r.firstChild;)r.removeChild(r.firstChild)}function oi(r){var a=r.parentNode;a&&a.lastChild!==r&&a.appendChild(r)}function Fi(r){var a=r.parentNode;a&&a.firstChild!==r&&a.insertBefore(r,a.firstChild)}function ca(r,a){if(r.classList!==void 0)return r.classList.contains(a);var c=cn(r);return c.length>0&&new RegExp("(^|\\s)"+a+"(\\s|$)").test(c)}function _e(r,a){if(r.classList!==void 0)for(var c=D(a),f=0,g=c.length;f<g;f++)r.classList.add(c[f]);else if(!ca(r,a)){var w=cn(r);ha(r,(w?w+" ":"")+a)}}function je(r,a){r.classList!==void 0?r.classList.remove(a):ha(r,N((" "+cn(r)+" ").replace(" "+a+" "," ")))}function ha(r,a){r.className.baseVal===void 0?r.className=a:r.className.baseVal=a}function cn(r){return r.correspondingElement&&(r=r.correspondingElement),r.className.baseVal===void 0?r.className:r.className.baseVal}function Xe(r,a){"opacity"in r.style?r.style.opacity=a:"filter"in r.style&&Os(r,a)}function Os(r,a){var c=!1,f="DXImageTransform.Microsoft.Alpha";try{c=r.filters.item(f)}catch{if(a===1)return}a=Math.round(a*100),c?(c.Enabled=a!==100,c.Opacity=a):r.style.filter+=" progid:"+f+"(opacity="+a+")"}function ai(r){for(var a=document.documentElement.style,c=0;c<r.length;c++)if(r[c]in a)return r[c];return!1}function Un(r,a,c){var f=a||new H(0,0);r.style[Fr]=(se.ie3d?"translate("+f.x+"px,"+f.y+"px)":"translate3d("+f.x+"px,"+f.y+"px,0)")+(c?" scale("+c+")":"")}function de(r,a){r._leaflet_pos=a,se.any3d?Un(r,a):(r.style.left=a.x+"px",r.style.top=a.y+"px")}function hn(r){return r._leaflet_pos||new H(0,0)}var An,Cn,da;if("onselectstart"in document)An=function(){ae(window,"selectstart",$e)},Cn=function(){De(window,"selectstart",$e)};else{var zi=ai(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);An=function(){if(zi){var r=document.documentElement.style;da=r[zi],r[zi]="none"}},Cn=function(){zi&&(document.documentElement.style[zi]=da,da=void 0)}}function fa(){ae(window,"dragstart",$e)}function pa(){De(window,"dragstart",$e)}var Ns,ma;function li(r){for(;r.tabIndex===-1;)r=r.parentNode;r.style&&(Xt(),Ns=r,ma=r.style.outlineStyle,r.style.outlineStyle="none",ae(window,"keydown",Xt))}function Xt(){Ns&&(Ns.style.outlineStyle=ma,Ns=void 0,ma=void 0,De(window,"keydown",Xt))}function ga(r){do r=r.parentNode;while((!r.offsetWidth||!r.offsetHeight)&&r!==document.body);return r}function Ms(r){var a=r.getBoundingClientRect();return{x:a.width/r.offsetWidth||1,y:a.height/r.offsetHeight||1,boundingClientRect:a}}var Su={__proto__:null,TRANSFORM:Fr,TRANSITION:zr,TRANSITION_END:la,get:ua,getStyle:Vi,create:Pe,remove:Ve,empty:Ur,toFront:oi,toBack:Fi,hasClass:ca,addClass:_e,removeClass:je,setClass:ha,getClass:cn,setOpacity:Xe,testProp:ai,setTransform:Un,setPosition:de,getPosition:hn,get disableTextSelection(){return An},get enableTextSelection(){return Cn},disableImageDrag:fa,enableImageDrag:pa,preventOutline:li,restoreOutline:Xt,getSizedParentNode:ga,getScale:Ms};function ae(r,a,c,f){if(a&&typeof a=="object")for(var g in a)_a(r,g,a[g],c);else{a=D(a);for(var w=0,R=a.length;w<R;w++)_a(r,a[w],c,f)}return this}var dn="_leaflet_events";function De(r,a,c,f){if(arguments.length===1)Au(r),delete r[dn];else if(a&&typeof a=="object")for(var g in a)va(r,g,a[g],c);else if(a=D(a),arguments.length===2)Au(r,function(z){return W(a,z)!==-1});else for(var w=0,R=a.length;w<R;w++)va(r,a[w],c,f);return this}function Au(r,a){for(var c in r[dn]){var f=c.split(/\d/)[0];(!a||a(f))&&va(r,f,null,null,c)}}var fn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function _a(r,a,c,f){var g=a+d(c)+(f?"_"+d(f):"");if(r[dn]&&r[dn][g])return this;var w=function(z){return c.call(f||r,z||window.event)},R=w;!se.touchNative&&se.pointer&&a.indexOf("touch")===0?w=Eu(r,a,w):se.touch&&a==="dblclick"?w=Vr(r,w):"addEventListener"in r?a==="touchstart"||a==="touchmove"||a==="wheel"||a==="mousewheel"?r.addEventListener(fn[a]||a,w,se.passiveEvents?{passive:!1}:!1):a==="mouseenter"||a==="mouseleave"?(w=function(z){z=z||window.event,wa(r,z)&&R(z)},r.addEventListener(fn[a],w,!1)):r.addEventListener(a,R,!1):r.attachEvent("on"+a,w),r[dn]=r[dn]||{},r[dn][g]=w}function va(r,a,c,f,g){g=g||a+d(c)+(f?"_"+d(f):"");var w=r[dn]&&r[dn][g];if(!w)return this;!se.touchNative&&se.pointer&&a.indexOf("touch")===0?Tu(r,a,w):se.touch&&a==="dblclick"?si(r,w):"removeEventListener"in r?r.removeEventListener(fn[a]||a,w,!1):r.detachEvent("on"+a,w),r[dn][g]=null}function pn(r){return r.stopPropagation?r.stopPropagation():r.originalEvent?r.originalEvent._stopped=!0:r.cancelBubble=!0,this}function Ui(r){return _a(r,"wheel",pn),this}function Bi(r){return ae(r,"mousedown touchstart dblclick contextmenu",pn),r._leaflet_disable_click=!0,this}function $e(r){return r.preventDefault?r.preventDefault():r.returnValue=!1,this}function Jt(r){return $e(r),pn(r),this}function ya(r){if(r.composedPath)return r.composedPath();for(var a=[],c=r.target;c;)a.push(c),c=c.parentNode;return a}function Ds(r,a){if(!a)return new H(r.clientX,r.clientY);var c=Ms(a),f=c.boundingClientRect;return new H((r.clientX-f.left)/c.x-a.clientLeft,(r.clientY-f.top)/c.y-a.clientTop)}var We=se.linux&&se.chrome?window.devicePixelRatio:se.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Cu(r){return se.edge?r.wheelDeltaY/2:r.deltaY&&r.deltaMode===0?-r.deltaY/We:r.deltaY&&r.deltaMode===1?-r.deltaY*20:r.deltaY&&r.deltaMode===2?-r.deltaY*60:r.deltaX||r.deltaZ?0:r.wheelDelta?(r.wheelDeltaY||r.wheelDelta)/2:r.detail&&Math.abs(r.detail)<32765?-r.detail*20:r.detail?r.detail/-32765*60:0}function wa(r,a){var c=a.relatedTarget;if(!c)return!0;try{for(;c&&c!==r;)c=c.parentNode}catch{return!1}return c!==r}var Ru={__proto__:null,on:ae,off:De,stopPropagation:pn,disableScrollPropagation:Ui,disableClickPropagation:Bi,preventDefault:$e,stop:Jt,getPropagationPath:ya,getMousePosition:Ds,getWheelDelta:Cu,isExternalTarget:wa,addListener:ae,removeListener:De},Ea=Ft.extend({run:function(r,a,c,f){this.stop(),this._el=r,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(f||.5,.2),this._startPos=hn(r),this._offset=a.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=M(this._animate,this),this._step()},_step:function(r){var a=+new Date-this._startTime,c=this._duration*1e3;a<c?this._runFrame(this._easeOut(a/c),r):(this._runFrame(1),this._complete())},_runFrame:function(r,a){var c=this._startPos.add(this._offset.multiplyBy(r));a&&c._round(),de(this._el,c),this.fire("step")},_complete:function(){V(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(r){return 1-Math.pow(1-r,this._easeOutPower)}}),Ee=Ft.extend({options:{crs:kr,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(r,a){a=b(this,a),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(r),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),a.maxBounds&&this.setMaxBounds(a.maxBounds),a.zoom!==void 0&&(this._zoom=this._limitZoom(a.zoom)),a.center&&a.zoom!==void 0&&this.setView(pe(a.center),a.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=zr&&se.any3d&&!se.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ae(this._proxy,la,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(r,a,c){if(a=a===void 0?this._zoom:this._limitZoom(a),r=this._limitCenter(pe(r),a,this.options.maxBounds),c=c||{},this._stop(),this._loaded&&!c.reset&&c!==!0){c.animate!==void 0&&(c.zoom=s({animate:c.animate},c.zoom),c.pan=s({animate:c.animate,duration:c.duration},c.pan));var f=this._zoom!==a?this._tryAnimatedZoom&&this._tryAnimatedZoom(r,a,c.zoom):this._tryAnimatedPan(r,c.pan);if(f)return clearTimeout(this._sizeTimer),this}return this._resetView(r,a,c.pan&&c.pan.noMoveStart),this},setZoom:function(r,a){return this._loaded?this.setView(this.getCenter(),r,{zoom:a}):(this._zoom=r,this)},zoomIn:function(r,a){return r=r||(se.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+r,a)},zoomOut:function(r,a){return r=r||(se.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-r,a)},setZoomAround:function(r,a,c){var f=this.getZoomScale(a),g=this.getSize().divideBy(2),w=r instanceof H?r:this.latLngToContainerPoint(r),R=w.subtract(g).multiplyBy(1-1/f),z=this.containerPointToLatLng(g.add(R));return this.setView(z,a,{zoom:c})},_getBoundsCenterZoom:function(r,a){a=a||{},r=r.getBounds?r.getBounds():Le(r);var c=Y(a.paddingTopLeft||a.padding||[0,0]),f=Y(a.paddingBottomRight||a.padding||[0,0]),g=this.getBoundsZoom(r,!1,c.add(f));if(g=typeof a.maxZoom=="number"?Math.min(a.maxZoom,g):g,g===1/0)return{center:r.getCenter(),zoom:g};var w=f.subtract(c).divideBy(2),R=this.project(r.getSouthWest(),g),z=this.project(r.getNorthEast(),g),B=this.unproject(R.add(z).divideBy(2).add(w),g);return{center:B,zoom:g}},fitBounds:function(r,a){if(r=Le(r),!r.isValid())throw new Error("Bounds are not valid.");var c=this._getBoundsCenterZoom(r,a);return this.setView(c.center,c.zoom,a)},fitWorld:function(r){return this.fitBounds([[-90,-180],[90,180]],r)},panTo:function(r,a){return this.setView(r,this._zoom,{pan:a})},panBy:function(r,a){if(r=Y(r).round(),a=a||{},!r.x&&!r.y)return this.fire("moveend");if(a.animate!==!0&&!this.getSize().contains(r))return this._resetView(this.unproject(this.project(this.getCenter()).add(r)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ea,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),a.noMoveStart||this.fire("movestart"),a.animate!==!1){_e(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(r).round();this._panAnim.run(this._mapPane,c,a.duration||.25,a.easeLinearity)}else this._rawPanBy(r),this.fire("move").fire("moveend");return this},flyTo:function(r,a,c){if(c=c||{},c.animate===!1||!se.any3d)return this.setView(r,a,c);this._stop();var f=this.project(this.getCenter()),g=this.project(r),w=this.getSize(),R=this._zoom;r=pe(r),a=a===void 0?R:a;var z=Math.max(w.x,w.y),B=z*this.getZoomScale(R,a),Z=g.distanceTo(f)||1,ee=1.42,le=ee*ee;function we(st){var Hu=st?-1:1,bI=st?B:z,VI=B*B-z*z+Hu*le*le*Z*Z,FI=2*bI*le*Z,dd=VI/FI,Og=Math.sqrt(dd*dd+1)-dd,zI=Og<1e-9?-18:Math.log(Og);return zI}function Ut(st){return(Math.exp(st)-Math.exp(-st))/2}function _t(st){return(Math.exp(st)+Math.exp(-st))/2}function gn(st){return Ut(st)/_t(st)}var qt=we(0);function Ks(st){return z*(_t(qt)/_t(qt+ee*st))}function OI(st){return z*(_t(qt)*gn(qt+ee*st)-Ut(qt))/le}function NI(st){return 1-Math.pow(1-st,1.5)}var MI=Date.now(),xg=(we(1)-qt)/ee,DI=c.duration?1e3*c.duration:1e3*xg*.8;function Lg(){var st=(Date.now()-MI)/DI,Hu=NI(st)*xg;st<=1?(this._flyToFrame=M(Lg,this),this._move(this.unproject(f.add(g.subtract(f).multiplyBy(OI(Hu)/Z)),R),this.getScaleZoom(z/Ks(Hu),R),{flyTo:!0})):this._move(r,a)._moveEnd(!0)}return this._moveStart(!0,c.noMoveStart),Lg.call(this),this},flyToBounds:function(r,a){var c=this._getBoundsCenterZoom(r,a);return this.flyTo(c.center,c.zoom,a)},setMaxBounds:function(r){return r=Le(r),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),r.isValid()?(this.options.maxBounds=r,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(r){var a=this.options.minZoom;return this.options.minZoom=r,this._loaded&&a!==r&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(r):this},setMaxZoom:function(r){var a=this.options.maxZoom;return this.options.maxZoom=r,this._loaded&&a!==r&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(r):this},panInsideBounds:function(r,a){this._enforcingBounds=!0;var c=this.getCenter(),f=this._limitCenter(c,this._zoom,Le(r));return c.equals(f)||this.panTo(f,a),this._enforcingBounds=!1,this},panInside:function(r,a){a=a||{};var c=Y(a.paddingTopLeft||a.padding||[0,0]),f=Y(a.paddingBottomRight||a.padding||[0,0]),g=this.project(this.getCenter()),w=this.project(r),R=this.getPixelBounds(),z=ve([R.min.add(c),R.max.subtract(f)]),B=z.getSize();if(!z.contains(w)){this._enforcingBounds=!0;var Z=w.subtract(z.getCenter()),ee=z.extend(w).getSize().subtract(B);g.x+=Z.x<0?-ee.x:ee.x,g.y+=Z.y<0?-ee.y:ee.y,this.panTo(this.unproject(g),a),this._enforcingBounds=!1}return this},invalidateSize:function(r){if(!this._loaded)return this;r=s({animate:!1,pan:!0},r===!0?{animate:!0}:r);var a=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var c=this.getSize(),f=a.divideBy(2).round(),g=c.divideBy(2).round(),w=f.subtract(g);return!w.x&&!w.y?this:(r.animate&&r.pan?this.panBy(w):(r.pan&&this._rawPanBy(w),this.fire("move"),r.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:a,newSize:c}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(r){if(r=this._locateOptions=s({timeout:1e4,watch:!1},r),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var a=l(this._handleGeolocationResponse,this),c=l(this._handleGeolocationError,this);return r.watch?this._locationWatchId=navigator.geolocation.watchPosition(a,c,r):navigator.geolocation.getCurrentPosition(a,c,r),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(r){if(this._container._leaflet_id){var a=r.code,c=r.message||(a===1?"permission denied":a===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:a,message:"Geolocation error: "+c+"."})}},_handleGeolocationResponse:function(r){if(this._container._leaflet_id){var a=r.coords.latitude,c=r.coords.longitude,f=new ye(a,c),g=f.toBounds(r.coords.accuracy*2),w=this._locateOptions;if(w.setView){var R=this.getBoundsZoom(g);this.setView(f,w.maxZoom?Math.min(R,w.maxZoom):R)}var z={latlng:f,bounds:g,timestamp:r.timestamp};for(var B in r.coords)typeof r.coords[B]=="number"&&(z[B]=r.coords[B]);this.fire("locationfound",z)}},addHandler:function(r,a){if(!a)return this;var c=this[r]=new a(this);return this._handlers.push(c),this.options[r]&&c.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ve(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(V(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var r;for(r in this._layers)this._layers[r].remove();for(r in this._panes)Ve(this._panes[r]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(r,a){var c="leaflet-pane"+(r?" leaflet-"+r.replace("Pane","")+"-pane":""),f=Pe("div",c,a||this._mapPane);return r&&(this._panes[r]=f),f},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var r=this.getPixelBounds(),a=this.unproject(r.getBottomLeft()),c=this.unproject(r.getTopRight());return new Ie(a,c)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(r,a,c){r=Le(r),c=Y(c||[0,0]);var f=this.getZoom()||0,g=this.getMinZoom(),w=this.getMaxZoom(),R=r.getNorthWest(),z=r.getSouthEast(),B=this.getSize().subtract(c),Z=ve(this.project(z,f),this.project(R,f)).getSize(),ee=se.any3d?this.options.zoomSnap:1,le=B.x/Z.x,we=B.y/Z.y,Ut=a?Math.max(le,we):Math.min(le,we);return f=this.getScaleZoom(Ut,f),ee&&(f=Math.round(f/(ee/100))*(ee/100),f=a?Math.ceil(f/ee)*ee:Math.floor(f/ee)*ee),Math.max(g,Math.min(w,f))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new H(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(r,a){var c=this._getTopLeftPoint(r,a);return new he(c,c.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(r){return this.options.crs.getProjectedBounds(r===void 0?this.getZoom():r)},getPane:function(r){return typeof r=="string"?this._panes[r]:r},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(r,a){var c=this.options.crs;return a=a===void 0?this._zoom:a,c.scale(r)/c.scale(a)},getScaleZoom:function(r,a){var c=this.options.crs;a=a===void 0?this._zoom:a;var f=c.zoom(r*c.scale(a));return isNaN(f)?1/0:f},project:function(r,a){return a=a===void 0?this._zoom:a,this.options.crs.latLngToPoint(pe(r),a)},unproject:function(r,a){return a=a===void 0?this._zoom:a,this.options.crs.pointToLatLng(Y(r),a)},layerPointToLatLng:function(r){var a=Y(r).add(this.getPixelOrigin());return this.unproject(a)},latLngToLayerPoint:function(r){var a=this.project(pe(r))._round();return a._subtract(this.getPixelOrigin())},wrapLatLng:function(r){return this.options.crs.wrapLatLng(pe(r))},wrapLatLngBounds:function(r){return this.options.crs.wrapLatLngBounds(Le(r))},distance:function(r,a){return this.options.crs.distance(pe(r),pe(a))},containerPointToLayerPoint:function(r){return Y(r).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(r){return Y(r).add(this._getMapPanePos())},containerPointToLatLng:function(r){var a=this.containerPointToLayerPoint(Y(r));return this.layerPointToLatLng(a)},latLngToContainerPoint:function(r){return this.layerPointToContainerPoint(this.latLngToLayerPoint(pe(r)))},mouseEventToContainerPoint:function(r){return Ds(r,this._container)},mouseEventToLayerPoint:function(r){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(r))},mouseEventToLatLng:function(r){return this.layerPointToLatLng(this.mouseEventToLayerPoint(r))},_initContainer:function(r){var a=this._container=ua(r);if(a){if(a._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ae(a,"scroll",this._onScroll,this),this._containerId=d(a)},_initLayout:function(){var r=this._container;this._fadeAnimated=this.options.fadeAnimation&&se.any3d,_e(r,"leaflet-container"+(se.touch?" leaflet-touch":"")+(se.retina?" leaflet-retina":"")+(se.ielt9?" leaflet-oldie":"")+(se.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var a=Vi(r,"position");a!=="absolute"&&a!=="relative"&&a!=="fixed"&&a!=="sticky"&&(r.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var r=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),de(this._mapPane,new H(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(_e(r.markerPane,"leaflet-zoom-hide"),_e(r.shadowPane,"leaflet-zoom-hide"))},_resetView:function(r,a,c){de(this._mapPane,new H(0,0));var f=!this._loaded;this._loaded=!0,a=this._limitZoom(a),this.fire("viewprereset");var g=this._zoom!==a;this._moveStart(g,c)._move(r,a)._moveEnd(g),this.fire("viewreset"),f&&this.fire("load")},_moveStart:function(r,a){return r&&this.fire("zoomstart"),a||this.fire("movestart"),this},_move:function(r,a,c,f){a===void 0&&(a=this._zoom);var g=this._zoom!==a;return this._zoom=a,this._lastCenter=r,this._pixelOrigin=this._getNewPixelOrigin(r),f?c&&c.pinch&&this.fire("zoom",c):((g||c&&c.pinch)&&this.fire("zoom",c),this.fire("move",c)),this},_moveEnd:function(r){return r&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return V(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(r){de(this._mapPane,this._getMapPanePos().subtract(r))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(r){this._targets={},this._targets[d(this._container)]=this;var a=r?De:ae;a(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&a(window,"resize",this._onResize,this),se.any3d&&this.options.transform3DLimit&&(r?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){V(this._resizeRequest),this._resizeRequest=M(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var r=this._getMapPanePos();Math.max(Math.abs(r.x),Math.abs(r.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(r,a){for(var c=[],f,g=a==="mouseout"||a==="mouseover",w=r.target||r.srcElement,R=!1;w;){if(f=this._targets[d(w)],f&&(a==="click"||a==="preclick")&&this._draggableMoved(f)){R=!0;break}if(f&&f.listens(a,!0)&&(g&&!wa(w,r)||(c.push(f),g))||w===this._container)break;w=w.parentNode}return!c.length&&!R&&!g&&this.listens(a,!0)&&(c=[this]),c},_isClickDisabled:function(r){for(;r&&r!==this._container;){if(r._leaflet_disable_click)return!0;r=r.parentNode}},_handleDOMEvent:function(r){var a=r.target||r.srcElement;if(!(!this._loaded||a._leaflet_disable_events||r.type==="click"&&this._isClickDisabled(a))){var c=r.type;c==="mousedown"&&li(a),this._fireDOMEvent(r,c)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(r,a,c){if(r.type==="click"){var f=s({},r);f.type="preclick",this._fireDOMEvent(f,f.type,c)}var g=this._findEventTargets(r,a);if(c){for(var w=[],R=0;R<c.length;R++)c[R].listens(a,!0)&&w.push(c[R]);g=w.concat(g)}if(g.length){a==="contextmenu"&&$e(r);var z=g[0],B={originalEvent:r};if(r.type!=="keypress"&&r.type!=="keydown"&&r.type!=="keyup"){var Z=z.getLatLng&&(!z._radius||z._radius<=10);B.containerPoint=Z?this.latLngToContainerPoint(z.getLatLng()):this.mouseEventToContainerPoint(r),B.layerPoint=this.containerPointToLayerPoint(B.containerPoint),B.latlng=Z?z.getLatLng():this.layerPointToLatLng(B.layerPoint)}for(R=0;R<g.length;R++)if(g[R].fire(a,B,!0),B.originalEvent._stopped||g[R].options.bubblingMouseEvents===!1&&W(this._mouseEvents,a)!==-1)return}},_draggableMoved:function(r){return r=r.dragging&&r.dragging.enabled()?r:this,r.dragging&&r.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var r=0,a=this._handlers.length;r<a;r++)this._handlers[r].disable()},whenReady:function(r,a){return this._loaded?r.call(a||this,{target:this}):this.on("load",r,a),this},_getMapPanePos:function(){return hn(this._mapPane)||new H(0,0)},_moved:function(){var r=this._getMapPanePos();return r&&!r.equals([0,0])},_getTopLeftPoint:function(r,a){var c=r&&a!==void 0?this._getNewPixelOrigin(r,a):this.getPixelOrigin();return c.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(r,a){var c=this.getSize()._divideBy(2);return this.project(r,a)._subtract(c)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(r,a,c){var f=this._getNewPixelOrigin(c,a);return this.project(r,a)._subtract(f)},_latLngBoundsToNewLayerBounds:function(r,a,c){var f=this._getNewPixelOrigin(c,a);return ve([this.project(r.getSouthWest(),a)._subtract(f),this.project(r.getNorthWest(),a)._subtract(f),this.project(r.getSouthEast(),a)._subtract(f),this.project(r.getNorthEast(),a)._subtract(f)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(r){return this.latLngToLayerPoint(r).subtract(this._getCenterLayerPoint())},_limitCenter:function(r,a,c){if(!c)return r;var f=this.project(r,a),g=this.getSize().divideBy(2),w=new he(f.subtract(g),f.add(g)),R=this._getBoundsOffset(w,c,a);return Math.abs(R.x)<=1&&Math.abs(R.y)<=1?r:this.unproject(f.add(R),a)},_limitOffset:function(r,a){if(!a)return r;var c=this.getPixelBounds(),f=new he(c.min.add(r),c.max.add(r));return r.add(this._getBoundsOffset(f,a))},_getBoundsOffset:function(r,a,c){var f=ve(this.project(a.getNorthEast(),c),this.project(a.getSouthWest(),c)),g=f.min.subtract(r.min),w=f.max.subtract(r.max),R=this._rebound(g.x,-w.x),z=this._rebound(g.y,-w.y);return new H(R,z)},_rebound:function(r,a){return r+a>0?Math.round(r-a)/2:Math.max(0,Math.ceil(r))-Math.max(0,Math.floor(a))},_limitZoom:function(r){var a=this.getMinZoom(),c=this.getMaxZoom(),f=se.any3d?this.options.zoomSnap:1;return f&&(r=Math.round(r/f)*f),Math.max(a,Math.min(c,r))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){je(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(r,a){var c=this._getCenterOffset(r)._trunc();return(a&&a.animate)!==!0&&!this.getSize().contains(c)?!1:(this.panBy(c,a),!0)},_createAnimProxy:function(){var r=this._proxy=Pe("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(r),this.on("zoomanim",function(a){var c=Fr,f=this._proxy.style[c];Un(this._proxy,this.project(a.center,a.zoom),this.getZoomScale(a.zoom,1)),f===this._proxy.style[c]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ve(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var r=this.getCenter(),a=this.getZoom();Un(this._proxy,this.project(r,a),this.getZoomScale(a,1))},_catchTransitionEnd:function(r){this._animatingZoom&&r.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(r,a,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||this._nothingToAnimate()||Math.abs(a-this._zoom)>this.options.zoomAnimationThreshold)return!1;var f=this.getZoomScale(a),g=this._getCenterOffset(r)._divideBy(1-1/f);return c.animate!==!0&&!this.getSize().contains(g)?!1:(M(function(){this._moveStart(!0,c.noMoveStart||!1)._animateZoom(r,a,!0)},this),!0)},_animateZoom:function(r,a,c,f){this._mapPane&&(c&&(this._animatingZoom=!0,this._animateToCenter=r,this._animateToZoom=a,_e(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:r,zoom:a,noUpdate:f}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&je(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function bs(r,a){return new Ee(r,a)}var $t=Ye.extend({options:{position:"topright"},initialize:function(r){b(this,r)},getPosition:function(){return this.options.position},setPosition:function(r){var a=this._map;return a&&a.removeControl(this),this.options.position=r,a&&a.addControl(this),this},getContainer:function(){return this._container},addTo:function(r){this.remove(),this._map=r;var a=this._container=this.onAdd(r),c=this.getPosition(),f=r._controlCorners[c];return _e(a,"leaflet-control"),c.indexOf("bottom")!==-1?f.insertBefore(a,f.firstChild):f.appendChild(a),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ve(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(r){this._map&&r&&r.screenX>0&&r.screenY>0&&this._map.getContainer().focus()}}),zt=function(r){return new $t(r)};Ee.include({addControl:function(r){return r.addTo(this),this},removeControl:function(r){return r.remove(),this},_initControlPos:function(){var r=this._controlCorners={},a="leaflet-",c=this._controlContainer=Pe("div",a+"control-container",this._container);function f(g,w){var R=a+g+" "+a+w;r[g+w]=Pe("div",R,c)}f("top","left"),f("top","right"),f("bottom","left"),f("bottom","right")},_clearControlPos:function(){for(var r in this._controlCorners)Ve(this._controlCorners[r]);Ve(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ta=$t.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(r,a,c,f){return c<f?-1:f<c?1:0}},initialize:function(r,a,c){b(this,c),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var f in r)this._addLayer(r[f],f);for(f in a)this._addLayer(a[f],f,!0)},onAdd:function(r){this._initLayout(),this._update(),this._map=r,r.on("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(r){return $t.prototype.addTo.call(this,r),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var r=0;r<this._layers.length;r++)this._layers[r].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(r,a){return this._addLayer(r,a),this._map?this._update():this},addOverlay:function(r,a){return this._addLayer(r,a,!0),this._map?this._update():this},removeLayer:function(r){r.off("add remove",this._onLayerChange,this);var a=this._getLayer(d(r));return a&&this._layers.splice(this._layers.indexOf(a),1),this._map?this._update():this},expand:function(){_e(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var r=this._map.getSize().y-(this._container.offsetTop+50);return r<this._section.clientHeight?(_e(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=r+"px"):je(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return je(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var r="leaflet-control-layers",a=this._container=Pe("div",r),c=this.options.collapsed;a.setAttribute("aria-haspopup",!0),Bi(a),Ui(a);var f=this._section=Pe("section",r+"-list");c&&(this._map.on("click",this.collapse,this),ae(a,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var g=this._layersLink=Pe("a",r+"-toggle",a);g.href="#",g.title="Layers",g.setAttribute("role","button"),ae(g,{keydown:function(w){w.keyCode===13&&this._expandSafely()},click:function(w){$e(w),this._expandSafely()}},this),c||this.expand(),this._baseLayersList=Pe("div",r+"-base",f),this._separator=Pe("div",r+"-separator",f),this._overlaysList=Pe("div",r+"-overlays",f),a.appendChild(f)},_getLayer:function(r){for(var a=0;a<this._layers.length;a++)if(this._layers[a]&&d(this._layers[a].layer)===r)return this._layers[a]},_addLayer:function(r,a,c){this._map&&r.on("add remove",this._onLayerChange,this),this._layers.push({layer:r,name:a,overlay:c}),this.options.sortLayers&&this._layers.sort(l(function(f,g){return this.options.sortFunction(f.layer,g.layer,f.name,g.name)},this)),this.options.autoZIndex&&r.setZIndex&&(this._lastZIndex++,r.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Ur(this._baseLayersList),Ur(this._overlaysList),this._layerControlInputs=[];var r,a,c,f,g=0;for(c=0;c<this._layers.length;c++)f=this._layers[c],this._addItem(f),a=a||f.overlay,r=r||!f.overlay,g+=f.overlay?0:1;return this.options.hideSingleBase&&(r=r&&g>1,this._baseLayersList.style.display=r?"":"none"),this._separator.style.display=a&&r?"":"none",this},_onLayerChange:function(r){this._handlingClick||this._update();var a=this._getLayer(d(r.target)),c=a.overlay?r.type==="add"?"overlayadd":"overlayremove":r.type==="add"?"baselayerchange":null;c&&this._map.fire(c,a)},_createRadioElement:function(r,a){var c='<input type="radio" class="leaflet-control-layers-selector" name="'+r+'"'+(a?' checked="checked"':"")+"/>",f=document.createElement("div");return f.innerHTML=c,f.firstChild},_addItem:function(r){var a=document.createElement("label"),c=this._map.hasLayer(r.layer),f;r.overlay?(f=document.createElement("input"),f.type="checkbox",f.className="leaflet-control-layers-selector",f.defaultChecked=c):f=this._createRadioElement("leaflet-base-layers_"+d(this),c),this._layerControlInputs.push(f),f.layerId=d(r.layer),ae(f,"click",this._onInputClick,this);var g=document.createElement("span");g.innerHTML=" "+r.name;var w=document.createElement("span");a.appendChild(w),w.appendChild(f),w.appendChild(g);var R=r.overlay?this._overlaysList:this._baseLayersList;return R.appendChild(a),this._checkDisabledLayers(),a},_onInputClick:function(){if(!this._preventClick){var r=this._layerControlInputs,a,c,f=[],g=[];this._handlingClick=!0;for(var w=r.length-1;w>=0;w--)a=r[w],c=this._getLayer(a.layerId).layer,a.checked?f.push(c):a.checked||g.push(c);for(w=0;w<g.length;w++)this._map.hasLayer(g[w])&&this._map.removeLayer(g[w]);for(w=0;w<f.length;w++)this._map.hasLayer(f[w])||this._map.addLayer(f[w]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var r=this._layerControlInputs,a,c,f=this._map.getZoom(),g=r.length-1;g>=0;g--)a=r[g],c=this._getLayer(a.layerId).layer,a.disabled=c.options.minZoom!==void 0&&f<c.options.minZoom||c.options.maxZoom!==void 0&&f>c.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var r=this._section;this._preventClick=!0,ae(r,"click",$e),this.expand();var a=this;setTimeout(function(){De(r,"click",$e),a._preventClick=!1})}}),od=function(r,a,c){return new Ta(r,a,c)},ui=$t.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(r){var a="leaflet-control-zoom",c=Pe("div",a+" leaflet-bar"),f=this.options;return this._zoomInButton=this._createButton(f.zoomInText,f.zoomInTitle,a+"-in",c,this._zoomIn),this._zoomOutButton=this._createButton(f.zoomOutText,f.zoomOutTitle,a+"-out",c,this._zoomOut),this._updateDisabled(),r.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(r){r.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(r){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(r.shiftKey?3:1))},_zoomOut:function(r){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(r.shiftKey?3:1))},_createButton:function(r,a,c,f,g){var w=Pe("a",c,f);return w.innerHTML=r,w.href="#",w.title=a,w.setAttribute("role","button"),w.setAttribute("aria-label",a),Bi(w),ae(w,"click",Jt),ae(w,"click",g,this),ae(w,"click",this._refocusOnMap,this),w},_updateDisabled:function(){var r=this._map,a="leaflet-disabled";je(this._zoomInButton,a),je(this._zoomOutButton,a),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||r._zoom===r.getMinZoom())&&(_e(this._zoomOutButton,a),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||r._zoom===r.getMaxZoom())&&(_e(this._zoomInButton,a),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ee.mergeOptions({zoomControl:!0}),Ee.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new ui,this.addControl(this.zoomControl))});var ku=function(r){return new ui(r)},Vs=$t.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(r){var a="leaflet-control-scale",c=Pe("div",a),f=this.options;return this._addScales(f,a+"-line",c),r.on(f.updateWhenIdle?"moveend":"move",this._update,this),r.whenReady(this._update,this),c},onRemove:function(r){r.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(r,a,c){r.metric&&(this._mScale=Pe("div",a,c)),r.imperial&&(this._iScale=Pe("div",a,c))},_update:function(){var r=this._map,a=r.getSize().y/2,c=r.distance(r.containerPointToLatLng([0,a]),r.containerPointToLatLng([this.options.maxWidth,a]));this._updateScales(c)},_updateScales:function(r){this.options.metric&&r&&this._updateMetric(r),this.options.imperial&&r&&this._updateImperial(r)},_updateMetric:function(r){var a=this._getRoundNum(r),c=a<1e3?a+" m":a/1e3+" km";this._updateScale(this._mScale,c,a/r)},_updateImperial:function(r){var a=r*3.2808399,c,f,g;a>5280?(c=a/5280,f=this._getRoundNum(c),this._updateScale(this._iScale,f+" mi",f/c)):(g=this._getRoundNum(a),this._updateScale(this._iScale,g+" ft",g/a))},_updateScale:function(r,a,c){r.style.width=Math.round(this.options.maxWidth*c)+"px",r.innerHTML=a},_getRoundNum:function(r){var a=Math.pow(10,(Math.floor(r)+"").length-1),c=r/a;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,a*c}}),Fs=function(r){return new Vs(r)},xu='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',ji=$t.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(se.inlineSvg?xu+" ":"")+"Leaflet</a>"},initialize:function(r){b(this,r),this._attributions={}},onAdd:function(r){r.attributionControl=this,this._container=Pe("div","leaflet-control-attribution"),Bi(this._container);for(var a in r._layers)r._layers[a].getAttribution&&this.addAttribution(r._layers[a].getAttribution());return this._update(),r.on("layeradd",this._addAttribution,this),this._container},onRemove:function(r){r.off("layeradd",this._addAttribution,this)},_addAttribution:function(r){r.layer.getAttribution&&(this.addAttribution(r.layer.getAttribution()),r.layer.once("remove",function(){this.removeAttribution(r.layer.getAttribution())},this))},setPrefix:function(r){return this.options.prefix=r,this._update(),this},addAttribution:function(r){return r?(this._attributions[r]||(this._attributions[r]=0),this._attributions[r]++,this._update(),this):this},removeAttribution:function(r){return r?(this._attributions[r]&&(this._attributions[r]--,this._update()),this):this},_update:function(){if(this._map){var r=[];for(var a in this._attributions)this._attributions[a]&&r.push(a);var c=[];this.options.prefix&&c.push(this.options.prefix),r.length&&c.push(r.join(", ")),this._container.innerHTML=c.join(' <span aria-hidden="true">|</span> ')}}});Ee.mergeOptions({attributionControl:!0}),Ee.addInitHook(function(){this.options.attributionControl&&new ji().addTo(this)});var ad=function(r){return new ji(r)};$t.Layers=Ta,$t.Zoom=ui,$t.Scale=Vs,$t.Attribution=ji,zt.layers=od,zt.zoom=ku,zt.scale=Fs,zt.attribution=ad;var en=Ye.extend({initialize:function(r){this._map=r},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});en.addTo=function(r,a){return r.addHandler(a,this),this};var Br={Events:ct},Ia=se.touch?"touchstart mousedown":"mousedown",Rn=Ft.extend({options:{clickTolerance:3},initialize:function(r,a,c,f){b(this,f),this._element=r,this._dragStartTarget=a||r,this._preventOutline=c},enable:function(){this._enabled||(ae(this._dragStartTarget,Ia,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Rn._dragging===this&&this.finishDrag(!0),De(this._dragStartTarget,Ia,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(r){if(this._enabled&&(this._moved=!1,!ca(this._element,"leaflet-zoom-anim"))){if(r.touches&&r.touches.length!==1){Rn._dragging===this&&this.finishDrag();return}if(!(Rn._dragging||r.shiftKey||r.which!==1&&r.button!==1&&!r.touches)&&(Rn._dragging=this,this._preventOutline&&li(this._element),fa(),An(),!this._moving)){this.fire("down");var a=r.touches?r.touches[0]:r,c=ga(this._element);this._startPoint=new H(a.clientX,a.clientY),this._startPos=hn(this._element),this._parentScale=Ms(c);var f=r.type==="mousedown";ae(document,f?"mousemove":"touchmove",this._onMove,this),ae(document,f?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(r){if(this._enabled){if(r.touches&&r.touches.length>1){this._moved=!0;return}var a=r.touches&&r.touches.length===1?r.touches[0]:r,c=new H(a.clientX,a.clientY)._subtract(this._startPoint);!c.x&&!c.y||Math.abs(c.x)+Math.abs(c.y)<this.options.clickTolerance||(c.x/=this._parentScale.x,c.y/=this._parentScale.y,$e(r),this._moved||(this.fire("dragstart"),this._moved=!0,_e(document.body,"leaflet-dragging"),this._lastTarget=r.target||r.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),_e(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(c),this._moving=!0,this._lastEvent=r,this._updatePosition())}},_updatePosition:function(){var r={originalEvent:this._lastEvent};this.fire("predrag",r),de(this._element,this._newPos),this.fire("drag",r)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(r){je(document.body,"leaflet-dragging"),this._lastTarget&&(je(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),De(document,"mousemove touchmove",this._onMove,this),De(document,"mouseup touchend touchcancel",this._onUp,this),pa(),Cn();var a=this._moved&&this._moving;this._moving=!1,Rn._dragging=!1,a&&this.fire("dragend",{noInertia:r,distance:this._newPos.distanceTo(this._startPos)})}});function zs(r,a,c){var f,g=[1,4,2,8],w,R,z,B,Z,ee,le,we;for(w=0,ee=r.length;w<ee;w++)r[w]._code=Bn(r[w],a);for(z=0;z<4;z++){for(le=g[z],f=[],w=0,ee=r.length,R=ee-1;w<ee;R=w++)B=r[w],Z=r[R],B._code&le?Z._code&le||(we=gt(Z,B,le,a,c),we._code=Bn(we,a),f.push(we)):(Z._code&le&&(we=gt(Z,B,le,a,c),we._code=Bn(we,a),f.push(we)),f.push(B));r=f}return r}function Us(r,a){var c,f,g,w,R,z,B,Z,ee;if(!r||r.length===0)throw new Error("latlngs not passed");u(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var le=pe([0,0]),we=Le(r),Ut=we.getNorthWest().distanceTo(we.getSouthWest())*we.getNorthEast().distanceTo(we.getNorthWest());Ut<1700&&(le=Bs(r));var _t=r.length,gn=[];for(c=0;c<_t;c++){var qt=pe(r[c]);gn.push(a.project(pe([qt.lat-le.lat,qt.lng-le.lng])))}for(z=B=Z=0,c=0,f=_t-1;c<_t;f=c++)g=gn[c],w=gn[f],R=g.y*w.x-w.y*g.x,B+=(g.x+w.x)*R,Z+=(g.y+w.y)*R,z+=R*3;z===0?ee=gn[0]:ee=[B/z,Z/z];var Ks=a.unproject(Y(ee));return pe([Ks.lat+le.lat,Ks.lng+le.lng])}function Bs(r){for(var a=0,c=0,f=0,g=0;g<r.length;g++){var w=pe(r[g]);a+=w.lat,c+=w.lng,f++}return pe([a/f,c/f])}var js={__proto__:null,clipPolygon:zs,polygonCenter:Us,centroid:Bs};function Pa(r,a){if(!a||!r.length)return r.slice();var c=a*a;return r=Ou(r,c),r=Lu(r,c),r}function Sa(r,a,c){return Math.sqrt(mn(r,a,c,!0))}function ci(r,a,c){return mn(r,a,c)}function Lu(r,a){var c=r.length,f=typeof Uint8Array<"u"?Uint8Array:Array,g=new f(c);g[0]=g[c-1]=1,Ws(r,g,a,0,c-1);var w,R=[];for(w=0;w<c;w++)g[w]&&R.push(r[w]);return R}function Ws(r,a,c,f,g){var w=0,R,z,B;for(z=f+1;z<=g-1;z++)B=mn(r[z],r[f],r[g],!0),B>w&&(R=z,w=B);w>c&&(a[R]=1,Ws(r,a,c,f,R),Ws(r,a,c,R,g))}function Ou(r,a){for(var c=[r[0]],f=1,g=0,w=r.length;f<w;f++)Nu(r[f],r[g])>a&&(c.push(r[f]),g=f);return g<w-1&&c.push(r[w-1]),c}var Aa;function jr(r,a,c,f,g){var w=f?Aa:Bn(r,c),R=Bn(a,c),z,B,Z;for(Aa=R;;){if(!(w|R))return[r,a];if(w&R)return!1;z=w||R,B=gt(r,a,z,c,g),Z=Bn(B,c),z===w?(r=B,w=Z):(a=B,R=Z)}}function gt(r,a,c,f,g){var w=a.x-r.x,R=a.y-r.y,z=f.min,B=f.max,Z,ee;return c&8?(Z=r.x+w*(B.y-r.y)/R,ee=B.y):c&4?(Z=r.x+w*(z.y-r.y)/R,ee=z.y):c&2?(Z=B.x,ee=r.y+R*(B.x-r.x)/w):c&1&&(Z=z.x,ee=r.y+R*(z.x-r.x)/w),new H(Z,ee,g)}function Bn(r,a){var c=0;return r.x<a.min.x?c|=1:r.x>a.max.x&&(c|=2),r.y<a.min.y?c|=4:r.y>a.max.y&&(c|=8),c}function Nu(r,a){var c=a.x-r.x,f=a.y-r.y;return c*c+f*f}function mn(r,a,c,f){var g=a.x,w=a.y,R=c.x-g,z=c.y-w,B=R*R+z*z,Z;return B>0&&(Z=((r.x-g)*R+(r.y-w)*z)/B,Z>1?(g=c.x,w=c.y):Z>0&&(g+=R*Z,w+=z*Z)),R=r.x-g,z=r.y-w,f?R*R+z*z:new H(g,w)}function u(r){return!k(r[0])||typeof r[0][0]!="object"&&typeof r[0][0]<"u"}function p(r){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),u(r)}function _(r,a){var c,f,g,w,R,z,B,Z;if(!r||r.length===0)throw new Error("latlngs not passed");u(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var ee=pe([0,0]),le=Le(r),we=le.getNorthWest().distanceTo(le.getSouthWest())*le.getNorthEast().distanceTo(le.getNorthWest());we<1700&&(ee=Bs(r));var Ut=r.length,_t=[];for(c=0;c<Ut;c++){var gn=pe(r[c]);_t.push(a.project(pe([gn.lat-ee.lat,gn.lng-ee.lng])))}for(c=0,f=0;c<Ut-1;c++)f+=_t[c].distanceTo(_t[c+1])/2;if(f===0)Z=_t[0];else for(c=0,w=0;c<Ut-1;c++)if(R=_t[c],z=_t[c+1],g=R.distanceTo(z),w+=g,w>f){B=(w-f)/g,Z=[z.x-B*(z.x-R.x),z.y-B*(z.y-R.y)];break}var qt=a.unproject(Y(Z));return pe([qt.lat+ee.lat,qt.lng+ee.lng])}var E={__proto__:null,simplify:Pa,pointToSegmentDistance:Sa,closestPointOnSegment:ci,clipSegment:jr,_getEdgeIntersection:gt,_getBitCode:Bn,_sqClosestPointOnSegment:mn,isFlat:u,_flat:p,polylineCenter:_},F={project:function(r){return new H(r.lng,r.lat)},unproject:function(r){return new ye(r.y,r.x)},bounds:new he([-180,-90],[180,90])},j={R:6378137,R_MINOR:6356752314245179e-9,bounds:new he([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(r){var a=Math.PI/180,c=this.R,f=r.lat*a,g=this.R_MINOR/c,w=Math.sqrt(1-g*g),R=w*Math.sin(f),z=Math.tan(Math.PI/4-f/2)/Math.pow((1-R)/(1+R),w/2);return f=-c*Math.log(Math.max(z,1e-10)),new H(r.lng*a*c,f)},unproject:function(r){for(var a=180/Math.PI,c=this.R,f=this.R_MINOR/c,g=Math.sqrt(1-f*f),w=Math.exp(-r.y/c),R=Math.PI/2-2*Math.atan(w),z=0,B=.1,Z;z<15&&Math.abs(B)>1e-7;z++)Z=g*Math.sin(R),Z=Math.pow((1-Z)/(1+Z),g/2),B=Math.PI/2-2*Math.atan(w*Z)-R,R+=B;return new ye(R*a,r.x*a/c)}},J={__proto__:null,LonLat:F,Mercator:j,SphericalMercator:Mi},Oe=s({},zn,{code:"EPSG:3395",projection:j,transformation:function(){var r=.5/(Math.PI*j.R);return ni(r,.5,-r,.5)}()}),rt=s({},zn,{code:"EPSG:4326",projection:F,transformation:ni(1/180,1,-1/180,.5)}),Ce=s({},ht,{projection:F,transformation:ni(1,0,-1,0),scale:function(r){return Math.pow(2,r)},zoom:function(r){return Math.log(r)/Math.LN2},distance:function(r,a){var c=a.lng-r.lng,f=a.lat-r.lat;return Math.sqrt(c*c+f*f)},infinite:!0});ht.Earth=zn,ht.EPSG3395=Oe,ht.EPSG3857=kr,ht.EPSG900913=Go,ht.EPSG4326=rt,ht.Simple=Ce;var be=Ft.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(r){return r.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(r){return r&&r.removeLayer(this),this},getPane:function(r){return this._map.getPane(r?this.options[r]||r:this.options.pane)},addInteractiveTarget:function(r){return this._map._targets[d(r)]=this,this},removeInteractiveTarget:function(r){return delete this._map._targets[d(r)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(r){var a=r.target;if(a.hasLayer(this)){if(this._map=a,this._zoomAnimated=a._zoomAnimated,this.getEvents){var c=this.getEvents();a.on(c,this),this.once("remove",function(){a.off(c,this)},this)}this.onAdd(a),this.fire("add"),a.fire("layeradd",{layer:this})}}});Ee.include({addLayer:function(r){if(!r._layerAdd)throw new Error("The provided object is not a Layer.");var a=d(r);return this._layers[a]?this:(this._layers[a]=r,r._mapToAdd=this,r.beforeAdd&&r.beforeAdd(this),this.whenReady(r._layerAdd,r),this)},removeLayer:function(r){var a=d(r);return this._layers[a]?(this._loaded&&r.onRemove(this),delete this._layers[a],this._loaded&&(this.fire("layerremove",{layer:r}),r.fire("remove")),r._map=r._mapToAdd=null,this):this},hasLayer:function(r){return d(r)in this._layers},eachLayer:function(r,a){for(var c in this._layers)r.call(a,this._layers[c]);return this},_addLayers:function(r){r=r?k(r)?r:[r]:[];for(var a=0,c=r.length;a<c;a++)this.addLayer(r[a])},_addZoomLimit:function(r){(!isNaN(r.options.maxZoom)||!isNaN(r.options.minZoom))&&(this._zoomBoundLayers[d(r)]=r,this._updateZoomLevels())},_removeZoomLimit:function(r){var a=d(r);this._zoomBoundLayers[a]&&(delete this._zoomBoundLayers[a],this._updateZoomLevels())},_updateZoomLevels:function(){var r=1/0,a=-1/0,c=this._getZoomSpan();for(var f in this._zoomBoundLayers){var g=this._zoomBoundLayers[f].options;r=g.minZoom===void 0?r:Math.min(r,g.minZoom),a=g.maxZoom===void 0?a:Math.max(a,g.maxZoom)}this._layersMaxZoom=a===-1/0?void 0:a,this._layersMinZoom=r===1/0?void 0:r,c!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var qe=be.extend({initialize:function(r,a){b(this,a),this._layers={};var c,f;if(r)for(c=0,f=r.length;c<f;c++)this.addLayer(r[c])},addLayer:function(r){var a=this.getLayerId(r);return this._layers[a]=r,this._map&&this._map.addLayer(r),this},removeLayer:function(r){var a=r in this._layers?r:this.getLayerId(r);return this._map&&this._layers[a]&&this._map.removeLayer(this._layers[a]),delete this._layers[a],this},hasLayer:function(r){var a=typeof r=="number"?r:this.getLayerId(r);return a in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(r){var a=Array.prototype.slice.call(arguments,1),c,f;for(c in this._layers)f=this._layers[c],f[r]&&f[r].apply(f,a);return this},onAdd:function(r){this.eachLayer(r.addLayer,r)},onRemove:function(r){this.eachLayer(r.removeLayer,r)},eachLayer:function(r,a){for(var c in this._layers)r.call(a,this._layers[c]);return this},getLayer:function(r){return this._layers[r]},getLayers:function(){var r=[];return this.eachLayer(r.push,r),r},setZIndex:function(r){return this.invoke("setZIndex",r)},getLayerId:function(r){return d(r)}}),Wi=function(r,a){return new qe(r,a)},et=qe.extend({addLayer:function(r){return this.hasLayer(r)?this:(r.addEventParent(this),qe.prototype.addLayer.call(this,r),this.fire("layeradd",{layer:r}))},removeLayer:function(r){return this.hasLayer(r)?(r in this._layers&&(r=this._layers[r]),r.removeEventParent(this),qe.prototype.removeLayer.call(this,r),this.fire("layerremove",{layer:r})):this},setStyle:function(r){return this.invoke("setStyle",r)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var r=new Ie;for(var a in this._layers){var c=this._layers[a];r.extend(c.getBounds?c.getBounds():c.getLatLng())}return r}}),Hs=function(r,a){return new et(r,a)},jn=Ye.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(r){b(this,r)},createIcon:function(r){return this._createIcon("icon",r)},createShadow:function(r){return this._createIcon("shadow",r)},_createIcon:function(r,a){var c=this._getIconUrl(r);if(!c){if(r==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var f=this._createImg(c,a&&a.tagName==="IMG"?a:null);return this._setIconStyles(f,r),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),f},_setIconStyles:function(r,a){var c=this.options,f=c[a+"Size"];typeof f=="number"&&(f=[f,f]);var g=Y(f),w=Y(a==="shadow"&&c.shadowAnchor||c.iconAnchor||g&&g.divideBy(2,!0));r.className="leaflet-marker-"+a+" "+(c.className||""),w&&(r.style.marginLeft=-w.x+"px",r.style.marginTop=-w.y+"px"),g&&(r.style.width=g.x+"px",r.style.height=g.y+"px")},_createImg:function(r,a){return a=a||document.createElement("img"),a.src=r,a},_getIconUrl:function(r){return se.retina&&this.options[r+"RetinaUrl"]||this.options[r+"Url"]}});function fI(r){return new jn(r)}var Ca=jn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(r){return typeof Ca.imagePath!="string"&&(Ca.imagePath=this._detectIconPath()),(this.options.imagePath||Ca.imagePath)+jn.prototype._getIconUrl.call(this,r)},_stripUrl:function(r){var a=function(c,f,g){var w=f.exec(c);return w&&w[g]};return r=a(r,/^url\((['"])?(.+)\1\)$/,2),r&&a(r,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var r=Pe("div","leaflet-default-icon-path",document.body),a=Vi(r,"background-image")||Vi(r,"backgroundImage");if(document.body.removeChild(r),a=this._stripUrl(a),a)return a;var c=document.querySelector('link[href$="leaflet.css"]');return c?c.href.substring(0,c.href.length-11-1):""}}),hg=en.extend({initialize:function(r){this._marker=r},addHooks:function(){var r=this._marker._icon;this._draggable||(this._draggable=new Rn(r,r,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),_e(r,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&je(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(r){var a=this._marker,c=a._map,f=this._marker.options.autoPanSpeed,g=this._marker.options.autoPanPadding,w=hn(a._icon),R=c.getPixelBounds(),z=c.getPixelOrigin(),B=ve(R.min._subtract(z).add(g),R.max._subtract(z).subtract(g));if(!B.contains(w)){var Z=Y((Math.max(B.max.x,w.x)-B.max.x)/(R.max.x-B.max.x)-(Math.min(B.min.x,w.x)-B.min.x)/(R.min.x-B.min.x),(Math.max(B.max.y,w.y)-B.max.y)/(R.max.y-B.max.y)-(Math.min(B.min.y,w.y)-B.min.y)/(R.min.y-B.min.y)).multiplyBy(f);c.panBy(Z,{animate:!1}),this._draggable._newPos._add(Z),this._draggable._startPos._add(Z),de(a._icon,this._draggable._newPos),this._onDrag(r),this._panRequest=M(this._adjustPan.bind(this,r))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(r){this._marker.options.autoPan&&(V(this._panRequest),this._panRequest=M(this._adjustPan.bind(this,r)))},_onDrag:function(r){var a=this._marker,c=a._shadow,f=hn(a._icon),g=a._map.layerPointToLatLng(f);c&&de(c,f),a._latlng=g,r.latlng=g,r.oldLatLng=this._oldLatLng,a.fire("move",r).fire("drag",r)},_onDragEnd:function(r){V(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",r)}}),Mu=be.extend({options:{icon:new Ca,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(r,a){b(this,a),this._latlng=pe(r)},onAdd:function(r){this._zoomAnimated=this._zoomAnimated&&r.options.markerZoomAnimation,this._zoomAnimated&&r.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(r){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&r.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(r){var a=this._latlng;return this._latlng=pe(r),this.update(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},setZIndexOffset:function(r){return this.options.zIndexOffset=r,this.update()},getIcon:function(){return this.options.icon},setIcon:function(r){return this.options.icon=r,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var r=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(r)}return this},_initIcon:function(){var r=this.options,a="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),c=r.icon.createIcon(this._icon),f=!1;c!==this._icon&&(this._icon&&this._removeIcon(),f=!0,r.title&&(c.title=r.title),c.tagName==="IMG"&&(c.alt=r.alt||"")),_e(c,a),r.keyboard&&(c.tabIndex="0",c.setAttribute("role","button")),this._icon=c,r.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ae(c,"focus",this._panOnFocus,this);var g=r.icon.createShadow(this._shadow),w=!1;g!==this._shadow&&(this._removeShadow(),w=!0),g&&(_e(g,a),g.alt=""),this._shadow=g,r.opacity<1&&this._updateOpacity(),f&&this.getPane().appendChild(this._icon),this._initInteraction(),g&&w&&this.getPane(r.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&De(this._icon,"focus",this._panOnFocus,this),Ve(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ve(this._shadow),this._shadow=null},_setPos:function(r){this._icon&&de(this._icon,r),this._shadow&&de(this._shadow,r),this._zIndex=r.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(r){this._icon&&(this._icon.style.zIndex=this._zIndex+r)},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center).round();this._setPos(a)},_initInteraction:function(){if(this.options.interactive&&(_e(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),hg)){var r=this.options.draggable;this.dragging&&(r=this.dragging.enabled(),this.dragging.disable()),this.dragging=new hg(this),r&&this.dragging.enable()}},setOpacity:function(r){return this.options.opacity=r,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var r=this.options.opacity;this._icon&&Xe(this._icon,r),this._shadow&&Xe(this._shadow,r)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var r=this._map;if(r){var a=this.options.icon.options,c=a.iconSize?Y(a.iconSize):Y(0,0),f=a.iconAnchor?Y(a.iconAnchor):Y(0,0);r.panInside(this._latlng,{paddingTopLeft:f,paddingBottomRight:c.subtract(f)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function pI(r,a){return new Mu(r,a)}var Hi=be.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(r){this._renderer=r.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(r){return b(this,r),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&r&&Object.prototype.hasOwnProperty.call(r,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Du=Hi.extend({options:{fill:!0,radius:10},initialize:function(r,a){b(this,a),this._latlng=pe(r),this._radius=this.options.radius},setLatLng:function(r){var a=this._latlng;return this._latlng=pe(r),this.redraw(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(r){return this.options.radius=this._radius=r,this.redraw()},getRadius:function(){return this._radius},setStyle:function(r){var a=r&&r.radius||this._radius;return Hi.prototype.setStyle.call(this,r),this.setRadius(a),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var r=this._radius,a=this._radiusY||r,c=this._clickTolerance(),f=[r+c,a+c];this._pxBounds=new he(this._point.subtract(f),this._point.add(f))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(r){return r.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function mI(r,a){return new Du(r,a)}var ld=Du.extend({initialize:function(r,a,c){if(typeof a=="number"&&(a=s({},c,{radius:a})),b(this,a),this._latlng=pe(r),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(r){return this._mRadius=r,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var r=[this._radius,this._radiusY||this._radius];return new Ie(this._map.layerPointToLatLng(this._point.subtract(r)),this._map.layerPointToLatLng(this._point.add(r)))},setStyle:Hi.prototype.setStyle,_project:function(){var r=this._latlng.lng,a=this._latlng.lat,c=this._map,f=c.options.crs;if(f.distance===zn.distance){var g=Math.PI/180,w=this._mRadius/zn.R/g,R=c.project([a+w,r]),z=c.project([a-w,r]),B=R.add(z).divideBy(2),Z=c.unproject(B).lat,ee=Math.acos((Math.cos(w*g)-Math.sin(a*g)*Math.sin(Z*g))/(Math.cos(a*g)*Math.cos(Z*g)))/g;(isNaN(ee)||ee===0)&&(ee=w/Math.cos(Math.PI/180*a)),this._point=B.subtract(c.getPixelOrigin()),this._radius=isNaN(ee)?0:B.x-c.project([Z,r-ee]).x,this._radiusY=B.y-R.y}else{var le=f.unproject(f.project(this._latlng).subtract([this._mRadius,0]));this._point=c.latLngToLayerPoint(this._latlng),this._radius=this._point.x-c.latLngToLayerPoint(le).x}this._updateBounds()}});function gI(r,a,c){return new ld(r,a,c)}var hi=Hi.extend({options:{smoothFactor:1,noClip:!1},initialize:function(r,a){b(this,a),this._setLatLngs(r)},getLatLngs:function(){return this._latlngs},setLatLngs:function(r){return this._setLatLngs(r),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(r){for(var a=1/0,c=null,f=mn,g,w,R=0,z=this._parts.length;R<z;R++)for(var B=this._parts[R],Z=1,ee=B.length;Z<ee;Z++){g=B[Z-1],w=B[Z];var le=f(r,g,w,!0);le<a&&(a=le,c=f(r,g,w))}return c&&(c.distance=Math.sqrt(a)),c},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return _(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(r,a){return a=a||this._defaultShape(),r=pe(r),a.push(r),this._bounds.extend(r),this.redraw()},_setLatLngs:function(r){this._bounds=new Ie,this._latlngs=this._convertLatLngs(r)},_defaultShape:function(){return u(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(r){for(var a=[],c=u(r),f=0,g=r.length;f<g;f++)c?(a[f]=pe(r[f]),this._bounds.extend(a[f])):a[f]=this._convertLatLngs(r[f]);return a},_project:function(){var r=new he;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,r),this._bounds.isValid()&&r.isValid()&&(this._rawPxBounds=r,this._updateBounds())},_updateBounds:function(){var r=this._clickTolerance(),a=new H(r,r);this._rawPxBounds&&(this._pxBounds=new he([this._rawPxBounds.min.subtract(a),this._rawPxBounds.max.add(a)]))},_projectLatlngs:function(r,a,c){var f=r[0]instanceof ye,g=r.length,w,R;if(f){for(R=[],w=0;w<g;w++)R[w]=this._map.latLngToLayerPoint(r[w]),c.extend(R[w]);a.push(R)}else for(w=0;w<g;w++)this._projectLatlngs(r[w],a,c)},_clipPoints:function(){var r=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}var a=this._parts,c,f,g,w,R,z,B;for(c=0,g=0,w=this._rings.length;c<w;c++)for(B=this._rings[c],f=0,R=B.length;f<R-1;f++)z=jr(B[f],B[f+1],r,f,!0),z&&(a[g]=a[g]||[],a[g].push(z[0]),(z[1]!==B[f+1]||f===R-2)&&(a[g].push(z[1]),g++))}},_simplifyPoints:function(){for(var r=this._parts,a=this.options.smoothFactor,c=0,f=r.length;c<f;c++)r[c]=Pa(r[c],a)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(r,a){var c,f,g,w,R,z,B=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(c=0,w=this._parts.length;c<w;c++)for(z=this._parts[c],f=0,R=z.length,g=R-1;f<R;g=f++)if(!(!a&&f===0)&&Sa(r,z[g],z[f])<=B)return!0;return!1}});function _I(r,a){return new hi(r,a)}hi._flat=p;var $s=hi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Us(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(r){var a=hi.prototype._convertLatLngs.call(this,r),c=a.length;return c>=2&&a[0]instanceof ye&&a[0].equals(a[c-1])&&a.pop(),a},_setLatLngs:function(r){hi.prototype._setLatLngs.call(this,r),u(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return u(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var r=this._renderer._bounds,a=this.options.weight,c=new H(a,a);if(r=new he(r.min.subtract(c),r.max.add(c)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}for(var f=0,g=this._rings.length,w;f<g;f++)w=zs(this._rings[f],r,!0),w.length&&this._parts.push(w)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(r){var a=!1,c,f,g,w,R,z,B,Z;if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(w=0,B=this._parts.length;w<B;w++)for(c=this._parts[w],R=0,Z=c.length,z=Z-1;R<Z;z=R++)f=c[R],g=c[z],f.y>r.y!=g.y>r.y&&r.x<(g.x-f.x)*(r.y-f.y)/(g.y-f.y)+f.x&&(a=!a);return a||hi.prototype._containsPoint.call(this,r,!0)}});function vI(r,a){return new $s(r,a)}var di=et.extend({initialize:function(r,a){b(this,a),this._layers={},r&&this.addData(r)},addData:function(r){var a=k(r)?r:r.features,c,f,g;if(a){for(c=0,f=a.length;c<f;c++)g=a[c],(g.geometries||g.geometry||g.features||g.coordinates)&&this.addData(g);return this}var w=this.options;if(w.filter&&!w.filter(r))return this;var R=bu(r,w);return R?(R.feature=zu(r),R.defaultOptions=R.options,this.resetStyle(R),w.onEachFeature&&w.onEachFeature(r,R),this.addLayer(R)):this},resetStyle:function(r){return r===void 0?this.eachLayer(this.resetStyle,this):(r.options=s({},r.defaultOptions),this._setLayerStyle(r,this.options.style),this)},setStyle:function(r){return this.eachLayer(function(a){this._setLayerStyle(a,r)},this)},_setLayerStyle:function(r,a){r.setStyle&&(typeof a=="function"&&(a=a(r.feature)),r.setStyle(a))}});function bu(r,a){var c=r.type==="Feature"?r.geometry:r,f=c?c.coordinates:null,g=[],w=a&&a.pointToLayer,R=a&&a.coordsToLatLng||ud,z,B,Z,ee;if(!f&&!c)return null;switch(c.type){case"Point":return z=R(f),dg(w,r,z,a);case"MultiPoint":for(Z=0,ee=f.length;Z<ee;Z++)z=R(f[Z]),g.push(dg(w,r,z,a));return new et(g);case"LineString":case"MultiLineString":return B=Vu(f,c.type==="LineString"?0:1,R),new hi(B,a);case"Polygon":case"MultiPolygon":return B=Vu(f,c.type==="Polygon"?1:2,R),new $s(B,a);case"GeometryCollection":for(Z=0,ee=c.geometries.length;Z<ee;Z++){var le=bu({geometry:c.geometries[Z],type:"Feature",properties:r.properties},a);le&&g.push(le)}return new et(g);case"FeatureCollection":for(Z=0,ee=c.features.length;Z<ee;Z++){var we=bu(c.features[Z],a);we&&g.push(we)}return new et(g);default:throw new Error("Invalid GeoJSON object.")}}function dg(r,a,c,f){return r?r(a,c):new Mu(c,f&&f.markersInheritOptions&&f)}function ud(r){return new ye(r[1],r[0],r[2])}function Vu(r,a,c){for(var f=[],g=0,w=r.length,R;g<w;g++)R=a?Vu(r[g],a-1,c):(c||ud)(r[g]),f.push(R);return f}function cd(r,a){return r=pe(r),r.alt!==void 0?[T(r.lng,a),T(r.lat,a),T(r.alt,a)]:[T(r.lng,a),T(r.lat,a)]}function Fu(r,a,c,f){for(var g=[],w=0,R=r.length;w<R;w++)g.push(a?Fu(r[w],u(r[w])?0:a-1,c,f):cd(r[w],f));return!a&&c&&g.length>0&&g.push(g[0].slice()),g}function qs(r,a){return r.feature?s({},r.feature,{geometry:a}):zu(a)}function zu(r){return r.type==="Feature"||r.type==="FeatureCollection"?r:{type:"Feature",properties:{},geometry:r}}var hd={toGeoJSON:function(r){return qs(this,{type:"Point",coordinates:cd(this.getLatLng(),r)})}};Mu.include(hd),ld.include(hd),Du.include(hd),hi.include({toGeoJSON:function(r){var a=!u(this._latlngs),c=Fu(this._latlngs,a?1:0,!1,r);return qs(this,{type:(a?"Multi":"")+"LineString",coordinates:c})}}),$s.include({toGeoJSON:function(r){var a=!u(this._latlngs),c=a&&!u(this._latlngs[0]),f=Fu(this._latlngs,c?2:a?1:0,!0,r);return a||(f=[f]),qs(this,{type:(c?"Multi":"")+"Polygon",coordinates:f})}}),qe.include({toMultiPoint:function(r){var a=[];return this.eachLayer(function(c){a.push(c.toGeoJSON(r).geometry.coordinates)}),qs(this,{type:"MultiPoint",coordinates:a})},toGeoJSON:function(r){var a=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(a==="MultiPoint")return this.toMultiPoint(r);var c=a==="GeometryCollection",f=[];return this.eachLayer(function(g){if(g.toGeoJSON){var w=g.toGeoJSON(r);if(c)f.push(w.geometry);else{var R=zu(w);R.type==="FeatureCollection"?f.push.apply(f,R.features):f.push(R)}}}),c?qs(this,{geometries:f,type:"GeometryCollection"}):{type:"FeatureCollection",features:f}}});function fg(r,a){return new di(r,a)}var yI=fg,Uu=be.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(r,a,c){this._url=r,this._bounds=Le(a),b(this,c)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(_e(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ve(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(r){return this.options.opacity=r,this._image&&this._updateOpacity(),this},setStyle:function(r){return r.opacity&&this.setOpacity(r.opacity),this},bringToFront:function(){return this._map&&oi(this._image),this},bringToBack:function(){return this._map&&Fi(this._image),this},setUrl:function(r){return this._url=r,this._image&&(this._image.src=r),this},setBounds:function(r){return this._bounds=Le(r),this._map&&this._reset(),this},getEvents:function(){var r={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var r=this._url.tagName==="IMG",a=this._image=r?this._url:Pe("img");if(_e(a,"leaflet-image-layer"),this._zoomAnimated&&_e(a,"leaflet-zoom-animated"),this.options.className&&_e(a,this.options.className),a.onselectstart=y,a.onmousemove=y,a.onload=l(this.fire,this,"load"),a.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(a.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),r){this._url=a.src;return}a.src=this._url,a.alt=this.options.alt},_animateZoom:function(r){var a=this._map.getZoomScale(r.zoom),c=this._map._latLngBoundsToNewLayerBounds(this._bounds,r.zoom,r.center).min;Un(this._image,c,a)},_reset:function(){var r=this._image,a=new he(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),c=a.getSize();de(r,a.min),r.style.width=c.x+"px",r.style.height=c.y+"px"},_updateOpacity:function(){Xe(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var r=this.options.errorOverlayUrl;r&&this._url!==r&&(this._url=r,this._image.src=r)},getCenter:function(){return this._bounds.getCenter()}}),wI=function(r,a,c){return new Uu(r,a,c)},pg=Uu.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var r=this._url.tagName==="VIDEO",a=this._image=r?this._url:Pe("video");if(_e(a,"leaflet-image-layer"),this._zoomAnimated&&_e(a,"leaflet-zoom-animated"),this.options.className&&_e(a,this.options.className),a.onselectstart=y,a.onmousemove=y,a.onloadeddata=l(this.fire,this,"load"),r){for(var c=a.getElementsByTagName("source"),f=[],g=0;g<c.length;g++)f.push(c[g].src);this._url=c.length>0?f:[a.src];return}k(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(a.style,"objectFit")&&(a.style.objectFit="fill"),a.autoplay=!!this.options.autoplay,a.loop=!!this.options.loop,a.muted=!!this.options.muted,a.playsInline=!!this.options.playsInline;for(var w=0;w<this._url.length;w++){var R=Pe("source");R.src=this._url[w],a.appendChild(R)}}});function EI(r,a,c){return new pg(r,a,c)}var mg=Uu.extend({_initImage:function(){var r=this._image=this._url;_e(r,"leaflet-image-layer"),this._zoomAnimated&&_e(r,"leaflet-zoom-animated"),this.options.className&&_e(r,this.options.className),r.onselectstart=y,r.onmousemove=y}});function TI(r,a,c){return new mg(r,a,c)}var Wn=be.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(r,a){r&&(r instanceof ye||k(r))?(this._latlng=pe(r),b(this,a)):(b(this,r),this._source=a),this.options.content&&(this._content=this.options.content)},openOn:function(r){return r=arguments.length?r:this._source._map,r.hasLayer(this)||r.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(r){return this._map?this.close():(arguments.length?this._source=r:r=this._source,this._prepareOpen(),this.openOn(r._map)),this},onAdd:function(r){this._zoomAnimated=r._zoomAnimated,this._container||this._initLayout(),r._fadeAnimated&&Xe(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),r._fadeAnimated&&Xe(this._container,1),this.bringToFront(),this.options.interactive&&(_e(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(r){r._fadeAnimated?(Xe(this._container,0),this._removeTimeout=setTimeout(l(Ve,void 0,this._container),200)):Ve(this._container),this.options.interactive&&(je(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(r){return this._latlng=pe(r),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(r){return this._content=r,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var r={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&oi(this._container),this},bringToBack:function(){return this._map&&Fi(this._container),this},_prepareOpen:function(r){var a=this._source;if(!a._map)return!1;if(a instanceof et){a=null;var c=this._source._layers;for(var f in c)if(c[f]._map){a=c[f];break}if(!a)return!1;this._source=a}if(!r)if(a.getCenter)r=a.getCenter();else if(a.getLatLng)r=a.getLatLng();else if(a.getBounds)r=a.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(r),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var r=this._contentNode,a=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof a=="string")r.innerHTML=a;else{for(;r.hasChildNodes();)r.removeChild(r.firstChild);r.appendChild(a)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var r=this._map.latLngToLayerPoint(this._latlng),a=Y(this.options.offset),c=this._getAnchor();this._zoomAnimated?de(this._container,r.add(c)):a=a.add(r).add(c);var f=this._containerBottom=-a.y,g=this._containerLeft=-Math.round(this._containerWidth/2)+a.x;this._container.style.bottom=f+"px",this._container.style.left=g+"px"}},_getAnchor:function(){return[0,0]}});Ee.include({_initOverlay:function(r,a,c,f){var g=a;return g instanceof r||(g=new r(f).setContent(a)),c&&g.setLatLng(c),g}}),be.include({_initOverlay:function(r,a,c,f){var g=c;return g instanceof r?(b(g,f),g._source=this):(g=a&&!f?a:new r(f,this),g.setContent(c)),g}});var Bu=Wn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(r){return r=arguments.length?r:this._source._map,!r.hasLayer(this)&&r._popup&&r._popup.options.autoClose&&r.removeLayer(r._popup),r._popup=this,Wn.prototype.openOn.call(this,r)},onAdd:function(r){Wn.prototype.onAdd.call(this,r),r.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Hi||this._source.on("preclick",pn))},onRemove:function(r){Wn.prototype.onRemove.call(this,r),r.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Hi||this._source.off("preclick",pn))},getEvents:function(){var r=Wn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(r.preclick=this.close),this.options.keepInView&&(r.moveend=this._adjustPan),r},_initLayout:function(){var r="leaflet-popup",a=this._container=Pe("div",r+" "+(this.options.className||"")+" leaflet-zoom-animated"),c=this._wrapper=Pe("div",r+"-content-wrapper",a);if(this._contentNode=Pe("div",r+"-content",c),Bi(a),Ui(this._contentNode),ae(a,"contextmenu",pn),this._tipContainer=Pe("div",r+"-tip-container",a),this._tip=Pe("div",r+"-tip",this._tipContainer),this.options.closeButton){var f=this._closeButton=Pe("a",r+"-close-button",a);f.setAttribute("role","button"),f.setAttribute("aria-label","Close popup"),f.href="#close",f.innerHTML='<span aria-hidden="true">&#215;</span>',ae(f,"click",function(g){$e(g),this.close()},this)}},_updateLayout:function(){var r=this._contentNode,a=r.style;a.width="",a.whiteSpace="nowrap";var c=r.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),a.width=c+1+"px",a.whiteSpace="",a.height="";var f=r.offsetHeight,g=this.options.maxHeight,w="leaflet-popup-scrolled";g&&f>g?(a.height=g+"px",_e(r,w)):je(r,w),this._containerWidth=this._container.offsetWidth},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center),c=this._getAnchor();de(this._container,a.add(c))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var r=this._map,a=parseInt(Vi(this._container,"marginBottom"),10)||0,c=this._container.offsetHeight+a,f=this._containerWidth,g=new H(this._containerLeft,-c-this._containerBottom);g._add(hn(this._container));var w=r.layerPointToContainerPoint(g),R=Y(this.options.autoPanPadding),z=Y(this.options.autoPanPaddingTopLeft||R),B=Y(this.options.autoPanPaddingBottomRight||R),Z=r.getSize(),ee=0,le=0;w.x+f+B.x>Z.x&&(ee=w.x+f-Z.x+B.x),w.x-ee-z.x<0&&(ee=w.x-z.x),w.y+c+B.y>Z.y&&(le=w.y+c-Z.y+B.y),w.y-le-z.y<0&&(le=w.y-z.y),(ee||le)&&(this.options.keepInView&&(this._autopanning=!0),r.fire("autopanstart").panBy([ee,le]))}},_getAnchor:function(){return Y(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),II=function(r,a){return new Bu(r,a)};Ee.mergeOptions({closePopupOnClick:!0}),Ee.include({openPopup:function(r,a,c){return this._initOverlay(Bu,r,a,c).openOn(this),this},closePopup:function(r){return r=arguments.length?r:this._popup,r&&r.close(),this}}),be.include({bindPopup:function(r,a){return this._popup=this._initOverlay(Bu,this._popup,r,a),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(r){return this._popup&&(this instanceof et||(this._popup._source=this),this._popup._prepareOpen(r||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(r){return this._popup&&this._popup.setContent(r),this},getPopup:function(){return this._popup},_openPopup:function(r){if(!(!this._popup||!this._map)){Jt(r);var a=r.layer||r.target;if(this._popup._source===a&&!(a instanceof Hi)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(r.latlng);return}this._popup._source=a,this.openPopup(r.latlng)}},_movePopup:function(r){this._popup.setLatLng(r.latlng)},_onKeyPress:function(r){r.originalEvent.keyCode===13&&this._openPopup(r)}});var ju=Wn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(r){Wn.prototype.onAdd.call(this,r),this.setOpacity(this.options.opacity),r.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(r){Wn.prototype.onRemove.call(this,r),r.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var r=Wn.prototype.getEvents.call(this);return this.options.permanent||(r.preclick=this.close),r},_initLayout:function(){var r="leaflet-tooltip",a=r+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Pe("div",a),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(r){var a,c,f=this._map,g=this._container,w=f.latLngToContainerPoint(f.getCenter()),R=f.layerPointToContainerPoint(r),z=this.options.direction,B=g.offsetWidth,Z=g.offsetHeight,ee=Y(this.options.offset),le=this._getAnchor();z==="top"?(a=B/2,c=Z):z==="bottom"?(a=B/2,c=0):z==="center"?(a=B/2,c=Z/2):z==="right"?(a=0,c=Z/2):z==="left"?(a=B,c=Z/2):R.x<w.x?(z="right",a=0,c=Z/2):(z="left",a=B+(ee.x+le.x)*2,c=Z/2),r=r.subtract(Y(a,c,!0)).add(ee).add(le),je(g,"leaflet-tooltip-right"),je(g,"leaflet-tooltip-left"),je(g,"leaflet-tooltip-top"),je(g,"leaflet-tooltip-bottom"),_e(g,"leaflet-tooltip-"+z),de(g,r)},_updatePosition:function(){var r=this._map.latLngToLayerPoint(this._latlng);this._setPosition(r)},setOpacity:function(r){this.options.opacity=r,this._container&&Xe(this._container,r)},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center);this._setPosition(a)},_getAnchor:function(){return Y(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),PI=function(r,a){return new ju(r,a)};Ee.include({openTooltip:function(r,a,c){return this._initOverlay(ju,r,a,c).openOn(this),this},closeTooltip:function(r){return r.close(),this}}),be.include({bindTooltip:function(r,a){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ju,this._tooltip,r,a),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(r){if(!(!r&&this._tooltipHandlersAdded)){var a=r?"off":"on",c={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?c.add=this._openTooltip:(c.mouseover=this._openTooltip,c.mouseout=this.closeTooltip,c.click=this._openTooltip,this._map?this._addFocusListeners():c.add=this._addFocusListeners),this._tooltip.options.sticky&&(c.mousemove=this._moveTooltip),this[a](c),this._tooltipHandlersAdded=!r}},openTooltip:function(r){return this._tooltip&&(this instanceof et||(this._tooltip._source=this),this._tooltip._prepareOpen(r)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(r){return this._tooltip&&this._tooltip.setContent(r),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(r){var a=typeof r.getElement=="function"&&r.getElement();a&&(ae(a,"focus",function(){this._tooltip._source=r,this.openTooltip()},this),ae(a,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(r){var a=typeof r.getElement=="function"&&r.getElement();a&&a.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(r){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var a=this;this._map.once("moveend",function(){a._openOnceFlag=!1,a._openTooltip(r)});return}this._tooltip._source=r.layer||r.target,this.openTooltip(this._tooltip.options.sticky?r.latlng:void 0)}},_moveTooltip:function(r){var a=r.latlng,c,f;this._tooltip.options.sticky&&r.originalEvent&&(c=this._map.mouseEventToContainerPoint(r.originalEvent),f=this._map.containerPointToLayerPoint(c),a=this._map.layerPointToLatLng(f)),this._tooltip.setLatLng(a)}});var gg=jn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(r){var a=r&&r.tagName==="DIV"?r:document.createElement("div"),c=this.options;if(c.html instanceof Element?(Ur(a),a.appendChild(c.html)):a.innerHTML=c.html!==!1?c.html:"",c.bgPos){var f=Y(c.bgPos);a.style.backgroundPosition=-f.x+"px "+-f.y+"px"}return this._setIconStyles(a,"icon"),a},createShadow:function(){return null}});function SI(r){return new gg(r)}jn.Default=Ca;var Ra=be.extend({options:{tileSize:256,opacity:1,updateWhenIdle:se.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(r){b(this,r)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(r){r._addZoomLimit(this)},onRemove:function(r){this._removeAllTiles(),Ve(this._container),r._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(oi(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Fi(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(r){return this.options.opacity=r,this._updateOpacity(),this},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var r=this._clampZoom(this._map.getZoom());r!==this._tileZoom&&(this._tileZoom=r,this._updateLevels()),this._update()}return this},getEvents:function(){var r={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=m(this._onMoveEnd,this.options.updateInterval,this)),r.move=this._onMove),this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},createTile:function(){return document.createElement("div")},getTileSize:function(){var r=this.options.tileSize;return r instanceof H?r:new H(r,r)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(r){for(var a=this.getPane().children,c=-r(-1/0,1/0),f=0,g=a.length,w;f<g;f++)w=a[f].style.zIndex,a[f]!==this._container&&w&&(c=r(c,+w));isFinite(c)&&(this.options.zIndex=c+r(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!se.ielt9){Xe(this._container,this.options.opacity);var r=+new Date,a=!1,c=!1;for(var f in this._tiles){var g=this._tiles[f];if(!(!g.current||!g.loaded)){var w=Math.min(1,(r-g.loaded)/200);Xe(g.el,w),w<1?a=!0:(g.active?c=!0:this._onOpaqueTile(g),g.active=!0)}}c&&!this._noPrune&&this._pruneTiles(),a&&(V(this._fadeFrame),this._fadeFrame=M(this._updateOpacity,this))}},_onOpaqueTile:y,_initContainer:function(){this._container||(this._container=Pe("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var r=this._tileZoom,a=this.options.maxZoom;if(r!==void 0){for(var c in this._levels)c=Number(c),this._levels[c].el.children.length||c===r?(this._levels[c].el.style.zIndex=a-Math.abs(r-c),this._onUpdateLevel(c)):(Ve(this._levels[c].el),this._removeTilesAtZoom(c),this._onRemoveLevel(c),delete this._levels[c]);var f=this._levels[r],g=this._map;return f||(f=this._levels[r]={},f.el=Pe("div","leaflet-tile-container leaflet-zoom-animated",this._container),f.el.style.zIndex=a,f.origin=g.project(g.unproject(g.getPixelOrigin()),r).round(),f.zoom=r,this._setZoomTransform(f,g.getCenter(),g.getZoom()),y(f.el.offsetWidth),this._onCreateLevel(f)),this._level=f,f}},_onUpdateLevel:y,_onRemoveLevel:y,_onCreateLevel:y,_pruneTiles:function(){if(this._map){var r,a,c=this._map.getZoom();if(c>this.options.maxZoom||c<this.options.minZoom){this._removeAllTiles();return}for(r in this._tiles)a=this._tiles[r],a.retain=a.current;for(r in this._tiles)if(a=this._tiles[r],a.current&&!a.active){var f=a.coords;this._retainParent(f.x,f.y,f.z,f.z-5)||this._retainChildren(f.x,f.y,f.z,f.z+2)}for(r in this._tiles)this._tiles[r].retain||this._removeTile(r)}},_removeTilesAtZoom:function(r){for(var a in this._tiles)this._tiles[a].coords.z===r&&this._removeTile(a)},_removeAllTiles:function(){for(var r in this._tiles)this._removeTile(r)},_invalidateAll:function(){for(var r in this._levels)Ve(this._levels[r].el),this._onRemoveLevel(Number(r)),delete this._levels[r];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(r,a,c,f){var g=Math.floor(r/2),w=Math.floor(a/2),R=c-1,z=new H(+g,+w);z.z=+R;var B=this._tileCoordsToKey(z),Z=this._tiles[B];return Z&&Z.active?(Z.retain=!0,!0):(Z&&Z.loaded&&(Z.retain=!0),R>f?this._retainParent(g,w,R,f):!1)},_retainChildren:function(r,a,c,f){for(var g=2*r;g<2*r+2;g++)for(var w=2*a;w<2*a+2;w++){var R=new H(g,w);R.z=c+1;var z=this._tileCoordsToKey(R),B=this._tiles[z];if(B&&B.active){B.retain=!0;continue}else B&&B.loaded&&(B.retain=!0);c+1<f&&this._retainChildren(g,w,c+1,f)}},_resetView:function(r){var a=r&&(r.pinch||r.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),a,a)},_animateZoom:function(r){this._setView(r.center,r.zoom,!0,r.noUpdate)},_clampZoom:function(r){var a=this.options;return a.minNativeZoom!==void 0&&r<a.minNativeZoom?a.minNativeZoom:a.maxNativeZoom!==void 0&&a.maxNativeZoom<r?a.maxNativeZoom:r},_setView:function(r,a,c,f){var g=Math.round(a);this.options.maxZoom!==void 0&&g>this.options.maxZoom||this.options.minZoom!==void 0&&g<this.options.minZoom?g=void 0:g=this._clampZoom(g);var w=this.options.updateWhenZooming&&g!==this._tileZoom;(!f||w)&&(this._tileZoom=g,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),g!==void 0&&this._update(r),c||this._pruneTiles(),this._noPrune=!!c),this._setZoomTransforms(r,a)},_setZoomTransforms:function(r,a){for(var c in this._levels)this._setZoomTransform(this._levels[c],r,a)},_setZoomTransform:function(r,a,c){var f=this._map.getZoomScale(c,r.zoom),g=r.origin.multiplyBy(f).subtract(this._map._getNewPixelOrigin(a,c)).round();se.any3d?Un(r.el,g,f):de(r.el,g)},_resetGrid:function(){var r=this._map,a=r.options.crs,c=this._tileSize=this.getTileSize(),f=this._tileZoom,g=this._map.getPixelWorldBounds(this._tileZoom);g&&(this._globalTileRange=this._pxBoundsToTileRange(g)),this._wrapX=a.wrapLng&&!this.options.noWrap&&[Math.floor(r.project([0,a.wrapLng[0]],f).x/c.x),Math.ceil(r.project([0,a.wrapLng[1]],f).x/c.y)],this._wrapY=a.wrapLat&&!this.options.noWrap&&[Math.floor(r.project([a.wrapLat[0],0],f).y/c.x),Math.ceil(r.project([a.wrapLat[1],0],f).y/c.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(r){var a=this._map,c=a._animatingZoom?Math.max(a._animateToZoom,a.getZoom()):a.getZoom(),f=a.getZoomScale(c,this._tileZoom),g=a.project(r,this._tileZoom).floor(),w=a.getSize().divideBy(f*2);return new he(g.subtract(w),g.add(w))},_update:function(r){var a=this._map;if(a){var c=this._clampZoom(a.getZoom());if(r===void 0&&(r=a.getCenter()),this._tileZoom!==void 0){var f=this._getTiledPixelBounds(r),g=this._pxBoundsToTileRange(f),w=g.getCenter(),R=[],z=this.options.keepBuffer,B=new he(g.getBottomLeft().subtract([z,-z]),g.getTopRight().add([z,-z]));if(!(isFinite(g.min.x)&&isFinite(g.min.y)&&isFinite(g.max.x)&&isFinite(g.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Z in this._tiles){var ee=this._tiles[Z].coords;(ee.z!==this._tileZoom||!B.contains(new H(ee.x,ee.y)))&&(this._tiles[Z].current=!1)}if(Math.abs(c-this._tileZoom)>1){this._setView(r,c);return}for(var le=g.min.y;le<=g.max.y;le++)for(var we=g.min.x;we<=g.max.x;we++){var Ut=new H(we,le);if(Ut.z=this._tileZoom,!!this._isValidTile(Ut)){var _t=this._tiles[this._tileCoordsToKey(Ut)];_t?_t.current=!0:R.push(Ut)}}if(R.sort(function(qt,Ks){return qt.distanceTo(w)-Ks.distanceTo(w)}),R.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var gn=document.createDocumentFragment();for(we=0;we<R.length;we++)this._addTile(R[we],gn);this._level.el.appendChild(gn)}}}},_isValidTile:function(r){var a=this._map.options.crs;if(!a.infinite){var c=this._globalTileRange;if(!a.wrapLng&&(r.x<c.min.x||r.x>c.max.x)||!a.wrapLat&&(r.y<c.min.y||r.y>c.max.y))return!1}if(!this.options.bounds)return!0;var f=this._tileCoordsToBounds(r);return Le(this.options.bounds).overlaps(f)},_keyToBounds:function(r){return this._tileCoordsToBounds(this._keyToTileCoords(r))},_tileCoordsToNwSe:function(r){var a=this._map,c=this.getTileSize(),f=r.scaleBy(c),g=f.add(c),w=a.unproject(f,r.z),R=a.unproject(g,r.z);return[w,R]},_tileCoordsToBounds:function(r){var a=this._tileCoordsToNwSe(r),c=new Ie(a[0],a[1]);return this.options.noWrap||(c=this._map.wrapLatLngBounds(c)),c},_tileCoordsToKey:function(r){return r.x+":"+r.y+":"+r.z},_keyToTileCoords:function(r){var a=r.split(":"),c=new H(+a[0],+a[1]);return c.z=+a[2],c},_removeTile:function(r){var a=this._tiles[r];a&&(Ve(a.el),delete this._tiles[r],this.fire("tileunload",{tile:a.el,coords:this._keyToTileCoords(r)}))},_initTile:function(r){_e(r,"leaflet-tile");var a=this.getTileSize();r.style.width=a.x+"px",r.style.height=a.y+"px",r.onselectstart=y,r.onmousemove=y,se.ielt9&&this.options.opacity<1&&Xe(r,this.options.opacity)},_addTile:function(r,a){var c=this._getTilePos(r),f=this._tileCoordsToKey(r),g=this.createTile(this._wrapCoords(r),l(this._tileReady,this,r));this._initTile(g),this.createTile.length<2&&M(l(this._tileReady,this,r,null,g)),de(g,c),this._tiles[f]={el:g,coords:r,current:!0},a.appendChild(g),this.fire("tileloadstart",{tile:g,coords:r})},_tileReady:function(r,a,c){a&&this.fire("tileerror",{error:a,tile:c,coords:r});var f=this._tileCoordsToKey(r);c=this._tiles[f],c&&(c.loaded=+new Date,this._map._fadeAnimated?(Xe(c.el,0),V(this._fadeFrame),this._fadeFrame=M(this._updateOpacity,this)):(c.active=!0,this._pruneTiles()),a||(_e(c.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:c.el,coords:r})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),se.ielt9||!this._map._fadeAnimated?M(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(r){return r.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(r){var a=new H(this._wrapX?v(r.x,this._wrapX):r.x,this._wrapY?v(r.y,this._wrapY):r.y);return a.z=r.z,a},_pxBoundsToTileRange:function(r){var a=this.getTileSize();return new he(r.min.unscaleBy(a).floor(),r.max.unscaleBy(a).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var r in this._tiles)if(!this._tiles[r].loaded)return!1;return!0}});function AI(r){return new Ra(r)}var Zs=Ra.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(r,a){this._url=r,a=b(this,a),a.detectRetina&&se.retina&&a.maxZoom>0?(a.tileSize=Math.floor(a.tileSize/2),a.zoomReverse?(a.zoomOffset--,a.minZoom=Math.min(a.maxZoom,a.minZoom+1)):(a.zoomOffset++,a.maxZoom=Math.max(a.minZoom,a.maxZoom-1)),a.minZoom=Math.max(0,a.minZoom)):a.zoomReverse?a.minZoom=Math.min(a.maxZoom,a.minZoom):a.maxZoom=Math.max(a.minZoom,a.maxZoom),typeof a.subdomains=="string"&&(a.subdomains=a.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(r,a){return this._url===r&&a===void 0&&(a=!0),this._url=r,a||this.redraw(),this},createTile:function(r,a){var c=document.createElement("img");return ae(c,"load",l(this._tileOnLoad,this,a,c)),ae(c,"error",l(this._tileOnError,this,a,c)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(c.referrerPolicy=this.options.referrerPolicy),c.alt="",c.src=this.getTileUrl(r),c},getTileUrl:function(r){var a={r:se.retina?"@2x":"",s:this._getSubdomain(r),x:r.x,y:r.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var c=this._globalTileRange.max.y-r.y;this.options.tms&&(a.y=c),a["-y"]=c}return P(this._url,s(a,this.options))},_tileOnLoad:function(r,a){se.ielt9?setTimeout(l(r,this,null,a),0):r(null,a)},_tileOnError:function(r,a,c){var f=this.options.errorTileUrl;f&&a.getAttribute("src")!==f&&(a.src=f),r(c,a)},_onTileRemove:function(r){r.tile.onload=null},_getZoomForUrl:function(){var r=this._tileZoom,a=this.options.maxZoom,c=this.options.zoomReverse,f=this.options.zoomOffset;return c&&(r=a-r),r+f},_getSubdomain:function(r){var a=Math.abs(r.x+r.y)%this.options.subdomains.length;return this.options.subdomains[a]},_abortLoading:function(){var r,a;for(r in this._tiles)if(this._tiles[r].coords.z!==this._tileZoom&&(a=this._tiles[r].el,a.onload=y,a.onerror=y,!a.complete)){a.src=G;var c=this._tiles[r].coords;Ve(a),delete this._tiles[r],this.fire("tileabort",{tile:a,coords:c})}},_removeTile:function(r){var a=this._tiles[r];if(a)return a.el.setAttribute("src",G),Ra.prototype._removeTile.call(this,r)},_tileReady:function(r,a,c){if(!(!this._map||c&&c.getAttribute("src")===G))return Ra.prototype._tileReady.call(this,r,a,c)}});function _g(r,a){return new Zs(r,a)}var vg=Zs.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(r,a){this._url=r;var c=s({},this.defaultWmsParams);for(var f in a)f in this.options||(c[f]=a[f]);a=b(this,a);var g=a.detectRetina&&se.retina?2:1,w=this.getTileSize();c.width=w.x*g,c.height=w.y*g,this.wmsParams=c},onAdd:function(r){this._crs=this.options.crs||r.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var a=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[a]=this._crs.code,Zs.prototype.onAdd.call(this,r)},getTileUrl:function(r){var a=this._tileCoordsToNwSe(r),c=this._crs,f=ve(c.project(a[0]),c.project(a[1])),g=f.min,w=f.max,R=(this._wmsVersion>=1.3&&this._crs===rt?[g.y,g.x,w.y,w.x]:[g.x,g.y,w.x,w.y]).join(","),z=Zs.prototype.getTileUrl.call(this,r);return z+U(this.wmsParams,z,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+R},setParams:function(r,a){return s(this.wmsParams,r),a||this.redraw(),this}});function CI(r,a){return new vg(r,a)}Zs.WMS=vg,_g.wms=CI;var fi=be.extend({options:{padding:.1},initialize:function(r){b(this,r),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),_e(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var r={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(r.zoomanim=this._onAnimZoom),r},_onAnimZoom:function(r){this._updateTransform(r.center,r.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(r,a){var c=this._map.getZoomScale(a,this._zoom),f=this._map.getSize().multiplyBy(.5+this.options.padding),g=this._map.project(this._center,a),w=f.multiplyBy(-c).add(g).subtract(this._map._getNewPixelOrigin(r,a));se.any3d?Un(this._container,w,c):de(this._container,w)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var r in this._layers)this._layers[r]._reset()},_onZoomEnd:function(){for(var r in this._layers)this._layers[r]._project()},_updatePaths:function(){for(var r in this._layers)this._layers[r]._update()},_update:function(){var r=this.options.padding,a=this._map.getSize(),c=this._map.containerPointToLayerPoint(a.multiplyBy(-r)).round();this._bounds=new he(c,c.add(a.multiplyBy(1+r*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),yg=fi.extend({options:{tolerance:0},getEvents:function(){var r=fi.prototype.getEvents.call(this);return r.viewprereset=this._onViewPreReset,r},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){fi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var r=this._container=document.createElement("canvas");ae(r,"mousemove",this._onMouseMove,this),ae(r,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ae(r,"mouseout",this._handleMouseOut,this),r._leaflet_disable_events=!0,this._ctx=r.getContext("2d")},_destroyContainer:function(){V(this._redrawRequest),delete this._ctx,Ve(this._container),De(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var r;this._redrawBounds=null;for(var a in this._layers)r=this._layers[a],r._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){fi.prototype._update.call(this);var r=this._bounds,a=this._container,c=r.getSize(),f=se.retina?2:1;de(a,r.min),a.width=f*c.x,a.height=f*c.y,a.style.width=c.x+"px",a.style.height=c.y+"px",se.retina&&this._ctx.scale(2,2),this._ctx.translate(-r.min.x,-r.min.y),this.fire("update")}},_reset:function(){fi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(r){this._updateDashArray(r),this._layers[d(r)]=r;var a=r._order={layer:r,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=a),this._drawLast=a,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(r){this._requestRedraw(r)},_removePath:function(r){var a=r._order,c=a.next,f=a.prev;c?c.prev=f:this._drawLast=f,f?f.next=c:this._drawFirst=c,delete r._order,delete this._layers[d(r)],this._requestRedraw(r)},_updatePath:function(r){this._extendRedrawBounds(r),r._project(),r._update(),this._requestRedraw(r)},_updateStyle:function(r){this._updateDashArray(r),this._requestRedraw(r)},_updateDashArray:function(r){if(typeof r.options.dashArray=="string"){var a=r.options.dashArray.split(/[, ]+/),c=[],f,g;for(g=0;g<a.length;g++){if(f=Number(a[g]),isNaN(f))return;c.push(f)}r.options._dashArray=c}else r.options._dashArray=r.options.dashArray},_requestRedraw:function(r){this._map&&(this._extendRedrawBounds(r),this._redrawRequest=this._redrawRequest||M(this._redraw,this))},_extendRedrawBounds:function(r){if(r._pxBounds){var a=(r.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new he,this._redrawBounds.extend(r._pxBounds.min.subtract([a,a])),this._redrawBounds.extend(r._pxBounds.max.add([a,a]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var r=this._redrawBounds;if(r){var a=r.getSize();this._ctx.clearRect(r.min.x,r.min.y,a.x,a.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var r,a=this._redrawBounds;if(this._ctx.save(),a){var c=a.getSize();this._ctx.beginPath(),this._ctx.rect(a.min.x,a.min.y,c.x,c.y),this._ctx.clip()}this._drawing=!0;for(var f=this._drawFirst;f;f=f.next)r=f.layer,(!a||r._pxBounds&&r._pxBounds.intersects(a))&&r._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(r,a){if(this._drawing){var c,f,g,w,R=r._parts,z=R.length,B=this._ctx;if(z){for(B.beginPath(),c=0;c<z;c++){for(f=0,g=R[c].length;f<g;f++)w=R[c][f],B[f?"lineTo":"moveTo"](w.x,w.y);a&&B.closePath()}this._fillStroke(B,r)}}},_updateCircle:function(r){if(!(!this._drawing||r._empty())){var a=r._point,c=this._ctx,f=Math.max(Math.round(r._radius),1),g=(Math.max(Math.round(r._radiusY),1)||f)/f;g!==1&&(c.save(),c.scale(1,g)),c.beginPath(),c.arc(a.x,a.y/g,f,0,Math.PI*2,!1),g!==1&&c.restore(),this._fillStroke(c,r)}},_fillStroke:function(r,a){var c=a.options;c.fill&&(r.globalAlpha=c.fillOpacity,r.fillStyle=c.fillColor||c.color,r.fill(c.fillRule||"evenodd")),c.stroke&&c.weight!==0&&(r.setLineDash&&r.setLineDash(a.options&&a.options._dashArray||[]),r.globalAlpha=c.opacity,r.lineWidth=c.weight,r.strokeStyle=c.color,r.lineCap=c.lineCap,r.lineJoin=c.lineJoin,r.stroke())},_onClick:function(r){for(var a=this._map.mouseEventToLayerPoint(r),c,f,g=this._drawFirst;g;g=g.next)c=g.layer,c.options.interactive&&c._containsPoint(a)&&(!(r.type==="click"||r.type==="preclick")||!this._map._draggableMoved(c))&&(f=c);this._fireEvent(f?[f]:!1,r)},_onMouseMove:function(r){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var a=this._map.mouseEventToLayerPoint(r);this._handleMouseHover(r,a)}},_handleMouseOut:function(r){var a=this._hoveredLayer;a&&(je(this._container,"leaflet-interactive"),this._fireEvent([a],r,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(r,a){if(!this._mouseHoverThrottled){for(var c,f,g=this._drawFirst;g;g=g.next)c=g.layer,c.options.interactive&&c._containsPoint(a)&&(f=c);f!==this._hoveredLayer&&(this._handleMouseOut(r),f&&(_e(this._container,"leaflet-interactive"),this._fireEvent([f],r,"mouseover"),this._hoveredLayer=f)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,r),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(r,a,c){this._map._fireDOMEvent(a,c||a.type,r)},_bringToFront:function(r){var a=r._order;if(a){var c=a.next,f=a.prev;if(c)c.prev=f;else return;f?f.next=c:c&&(this._drawFirst=c),a.prev=this._drawLast,this._drawLast.next=a,a.next=null,this._drawLast=a,this._requestRedraw(r)}},_bringToBack:function(r){var a=r._order;if(a){var c=a.next,f=a.prev;if(f)f.next=c;else return;c?c.prev=f:f&&(this._drawLast=f),a.prev=null,a.next=this._drawFirst,this._drawFirst.prev=a,this._drawFirst=a,this._requestRedraw(r)}}});function wg(r){return se.canvas?new yg(r):null}var ka=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(r){return document.createElement("<lvml:"+r+' class="lvml">')}}catch{}return function(r){return document.createElement("<"+r+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),RI={_initContainer:function(){this._container=Pe("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(fi.prototype._update.call(this),this.fire("update"))},_initPath:function(r){var a=r._container=ka("shape");_e(a,"leaflet-vml-shape "+(this.options.className||"")),a.coordsize="1 1",r._path=ka("path"),a.appendChild(r._path),this._updateStyle(r),this._layers[d(r)]=r},_addPath:function(r){var a=r._container;this._container.appendChild(a),r.options.interactive&&r.addInteractiveTarget(a)},_removePath:function(r){var a=r._container;Ve(a),r.removeInteractiveTarget(a),delete this._layers[d(r)]},_updateStyle:function(r){var a=r._stroke,c=r._fill,f=r.options,g=r._container;g.stroked=!!f.stroke,g.filled=!!f.fill,f.stroke?(a||(a=r._stroke=ka("stroke")),g.appendChild(a),a.weight=f.weight+"px",a.color=f.color,a.opacity=f.opacity,f.dashArray?a.dashStyle=k(f.dashArray)?f.dashArray.join(" "):f.dashArray.replace(/( *, *)/g," "):a.dashStyle="",a.endcap=f.lineCap.replace("butt","flat"),a.joinstyle=f.lineJoin):a&&(g.removeChild(a),r._stroke=null),f.fill?(c||(c=r._fill=ka("fill")),g.appendChild(c),c.color=f.fillColor||f.color,c.opacity=f.fillOpacity):c&&(g.removeChild(c),r._fill=null)},_updateCircle:function(r){var a=r._point.round(),c=Math.round(r._radius),f=Math.round(r._radiusY||c);this._setPath(r,r._empty()?"M0 0":"AL "+a.x+","+a.y+" "+c+","+f+" 0,"+65535*360)},_setPath:function(r,a){r._path.v=a},_bringToFront:function(r){oi(r._container)},_bringToBack:function(r){Fi(r._container)}},Wu=se.vml?ka:vs,xa=fi.extend({_initContainer:function(){this._container=Wu("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Wu("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ve(this._container),De(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){fi.prototype._update.call(this);var r=this._bounds,a=r.getSize(),c=this._container;(!this._svgSize||!this._svgSize.equals(a))&&(this._svgSize=a,c.setAttribute("width",a.x),c.setAttribute("height",a.y)),de(c,r.min),c.setAttribute("viewBox",[r.min.x,r.min.y,a.x,a.y].join(" ")),this.fire("update")}},_initPath:function(r){var a=r._path=Wu("path");r.options.className&&_e(a,r.options.className),r.options.interactive&&_e(a,"leaflet-interactive"),this._updateStyle(r),this._layers[d(r)]=r},_addPath:function(r){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(r._path),r.addInteractiveTarget(r._path)},_removePath:function(r){Ve(r._path),r.removeInteractiveTarget(r._path),delete this._layers[d(r)]},_updatePath:function(r){r._project(),r._update()},_updateStyle:function(r){var a=r._path,c=r.options;a&&(c.stroke?(a.setAttribute("stroke",c.color),a.setAttribute("stroke-opacity",c.opacity),a.setAttribute("stroke-width",c.weight),a.setAttribute("stroke-linecap",c.lineCap),a.setAttribute("stroke-linejoin",c.lineJoin),c.dashArray?a.setAttribute("stroke-dasharray",c.dashArray):a.removeAttribute("stroke-dasharray"),c.dashOffset?a.setAttribute("stroke-dashoffset",c.dashOffset):a.removeAttribute("stroke-dashoffset")):a.setAttribute("stroke","none"),c.fill?(a.setAttribute("fill",c.fillColor||c.color),a.setAttribute("fill-opacity",c.fillOpacity),a.setAttribute("fill-rule",c.fillRule||"evenodd")):a.setAttribute("fill","none"))},_updatePoly:function(r,a){this._setPath(r,Qo(r._parts,a))},_updateCircle:function(r){var a=r._point,c=Math.max(Math.round(r._radius),1),f=Math.max(Math.round(r._radiusY),1)||c,g="a"+c+","+f+" 0 1,0 ",w=r._empty()?"M0 0":"M"+(a.x-c)+","+a.y+g+c*2+",0 "+g+-c*2+",0 ";this._setPath(r,w)},_setPath:function(r,a){r._path.setAttribute("d",a)},_bringToFront:function(r){oi(r._path)},_bringToBack:function(r){Fi(r._path)}});se.vml&&xa.include(RI);function Eg(r){return se.svg||se.vml?new xa(r):null}Ee.include({getRenderer:function(r){var a=r.options.renderer||this._getPaneRenderer(r.options.pane)||this.options.renderer||this._renderer;return a||(a=this._renderer=this._createRenderer()),this.hasLayer(a)||this.addLayer(a),a},_getPaneRenderer:function(r){if(r==="overlayPane"||r===void 0)return!1;var a=this._paneRenderers[r];return a===void 0&&(a=this._createRenderer({pane:r}),this._paneRenderers[r]=a),a},_createRenderer:function(r){return this.options.preferCanvas&&wg(r)||Eg(r)}});var Tg=$s.extend({initialize:function(r,a){$s.prototype.initialize.call(this,this._boundsToLatLngs(r),a)},setBounds:function(r){return this.setLatLngs(this._boundsToLatLngs(r))},_boundsToLatLngs:function(r){return r=Le(r),[r.getSouthWest(),r.getNorthWest(),r.getNorthEast(),r.getSouthEast()]}});function kI(r,a){return new Tg(r,a)}xa.create=Wu,xa.pointsToPath=Qo,di.geometryToLayer=bu,di.coordsToLatLng=ud,di.coordsToLatLngs=Vu,di.latLngToCoords=cd,di.latLngsToCoords=Fu,di.getFeature=qs,di.asFeature=zu,Ee.mergeOptions({boxZoom:!0});var Ig=en.extend({initialize:function(r){this._map=r,this._container=r._container,this._pane=r._panes.overlayPane,this._resetStateTimeout=0,r.on("unload",this._destroy,this)},addHooks:function(){ae(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){De(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ve(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(r){if(!r.shiftKey||r.which!==1&&r.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),An(),fa(),this._startPoint=this._map.mouseEventToContainerPoint(r),ae(document,{contextmenu:Jt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(r){this._moved||(this._moved=!0,this._box=Pe("div","leaflet-zoom-box",this._container),_e(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(r);var a=new he(this._point,this._startPoint),c=a.getSize();de(this._box,a.min),this._box.style.width=c.x+"px",this._box.style.height=c.y+"px"},_finish:function(){this._moved&&(Ve(this._box),je(this._container,"leaflet-crosshair")),Cn(),pa(),De(document,{contextmenu:Jt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(r){if(!(r.which!==1&&r.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var a=new Ie(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(a).fire("boxzoomend",{boxZoomBounds:a})}},_onKeyDown:function(r){r.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ee.addInitHook("addHandler","boxZoom",Ig),Ee.mergeOptions({doubleClickZoom:!0});var Pg=en.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(r){var a=this._map,c=a.getZoom(),f=a.options.zoomDelta,g=r.originalEvent.shiftKey?c-f:c+f;a.options.doubleClickZoom==="center"?a.setZoom(g):a.setZoomAround(r.containerPoint,g)}});Ee.addInitHook("addHandler","doubleClickZoom",Pg),Ee.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Sg=en.extend({addHooks:function(){if(!this._draggable){var r=this._map;this._draggable=new Rn(r._mapPane,r._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),r.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),r.on("zoomend",this._onZoomEnd,this),r.whenReady(this._onZoomEnd,this))}_e(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){je(this._map._container,"leaflet-grab"),je(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var r=this._map;if(r._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var a=Le(this._map.options.maxBounds);this._offsetLimit=ve(this._map.latLngToContainerPoint(a.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(a.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;r.fire("movestart").fire("dragstart"),r.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(r){if(this._map.options.inertia){var a=this._lastTime=+new Date,c=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(c),this._times.push(a),this._prunePositions(a)}this._map.fire("move",r).fire("drag",r)},_prunePositions:function(r){for(;this._positions.length>1&&r-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var r=this._map.getSize().divideBy(2),a=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=a.subtract(r).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(r,a){return r-(r-a)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var r=this._draggable._newPos.subtract(this._draggable._startPos),a=this._offsetLimit;r.x<a.min.x&&(r.x=this._viscousLimit(r.x,a.min.x)),r.y<a.min.y&&(r.y=this._viscousLimit(r.y,a.min.y)),r.x>a.max.x&&(r.x=this._viscousLimit(r.x,a.max.x)),r.y>a.max.y&&(r.y=this._viscousLimit(r.y,a.max.y)),this._draggable._newPos=this._draggable._startPos.add(r)}},_onPreDragWrap:function(){var r=this._worldWidth,a=Math.round(r/2),c=this._initialWorldOffset,f=this._draggable._newPos.x,g=(f-a+c)%r+a-c,w=(f+a+c)%r-a-c,R=Math.abs(g+c)<Math.abs(w+c)?g:w;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=R},_onDragEnd:function(r){var a=this._map,c=a.options,f=!c.inertia||r.noInertia||this._times.length<2;if(a.fire("dragend",r),f)a.fire("moveend");else{this._prunePositions(+new Date);var g=this._lastPos.subtract(this._positions[0]),w=(this._lastTime-this._times[0])/1e3,R=c.easeLinearity,z=g.multiplyBy(R/w),B=z.distanceTo([0,0]),Z=Math.min(c.inertiaMaxSpeed,B),ee=z.multiplyBy(Z/B),le=Z/(c.inertiaDeceleration*R),we=ee.multiplyBy(-le/2).round();!we.x&&!we.y?a.fire("moveend"):(we=a._limitOffset(we,a.options.maxBounds),M(function(){a.panBy(we,{duration:le,easeLinearity:R,noMoveStart:!0,animate:!0})}))}}});Ee.addInitHook("addHandler","dragging",Sg),Ee.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Ag=en.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(r){this._map=r,this._setPanDelta(r.options.keyboardPanDelta),this._setZoomDelta(r.options.zoomDelta)},addHooks:function(){var r=this._map._container;r.tabIndex<=0&&(r.tabIndex="0"),ae(r,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),De(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var r=document.body,a=document.documentElement,c=r.scrollTop||a.scrollTop,f=r.scrollLeft||a.scrollLeft;this._map._container.focus(),window.scrollTo(f,c)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(r){var a=this._panKeys={},c=this.keyCodes,f,g;for(f=0,g=c.left.length;f<g;f++)a[c.left[f]]=[-1*r,0];for(f=0,g=c.right.length;f<g;f++)a[c.right[f]]=[r,0];for(f=0,g=c.down.length;f<g;f++)a[c.down[f]]=[0,r];for(f=0,g=c.up.length;f<g;f++)a[c.up[f]]=[0,-1*r]},_setZoomDelta:function(r){var a=this._zoomKeys={},c=this.keyCodes,f,g;for(f=0,g=c.zoomIn.length;f<g;f++)a[c.zoomIn[f]]=r;for(f=0,g=c.zoomOut.length;f<g;f++)a[c.zoomOut[f]]=-r},_addHooks:function(){ae(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){De(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(r){if(!(r.altKey||r.ctrlKey||r.metaKey)){var a=r.keyCode,c=this._map,f;if(a in this._panKeys){if(!c._panAnim||!c._panAnim._inProgress)if(f=this._panKeys[a],r.shiftKey&&(f=Y(f).multiplyBy(3)),c.options.maxBounds&&(f=c._limitOffset(Y(f),c.options.maxBounds)),c.options.worldCopyJump){var g=c.wrapLatLng(c.unproject(c.project(c.getCenter()).add(f)));c.panTo(g)}else c.panBy(f)}else if(a in this._zoomKeys)c.setZoom(c.getZoom()+(r.shiftKey?3:1)*this._zoomKeys[a]);else if(a===27&&c._popup&&c._popup.options.closeOnEscapeKey)c.closePopup();else return;Jt(r)}}});Ee.addInitHook("addHandler","keyboard",Ag),Ee.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Cg=en.extend({addHooks:function(){ae(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){De(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(r){var a=Cu(r),c=this._map.options.wheelDebounceTime;this._delta+=a,this._lastMousePos=this._map.mouseEventToContainerPoint(r),this._startTime||(this._startTime=+new Date);var f=Math.max(c-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),f),Jt(r)},_performZoom:function(){var r=this._map,a=r.getZoom(),c=this._map.options.zoomSnap||0;r._stop();var f=this._delta/(this._map.options.wheelPxPerZoomLevel*4),g=4*Math.log(2/(1+Math.exp(-Math.abs(f))))/Math.LN2,w=c?Math.ceil(g/c)*c:g,R=r._limitZoom(a+(this._delta>0?w:-w))-a;this._delta=0,this._startTime=null,R&&(r.options.scrollWheelZoom==="center"?r.setZoom(a+R):r.setZoomAround(this._lastMousePos,a+R))}});Ee.addInitHook("addHandler","scrollWheelZoom",Cg);var xI=600;Ee.mergeOptions({tapHold:se.touchNative&&se.safari&&se.mobile,tapTolerance:15});var Rg=en.extend({addHooks:function(){ae(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){De(this._map._container,"touchstart",this._onDown,this)},_onDown:function(r){if(clearTimeout(this._holdTimeout),r.touches.length===1){var a=r.touches[0];this._startPos=this._newPos=new H(a.clientX,a.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(ae(document,"touchend",$e),ae(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",a))},this),xI),ae(document,"touchend touchcancel contextmenu",this._cancel,this),ae(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function r(){De(document,"touchend",$e),De(document,"touchend touchcancel",r)},_cancel:function(){clearTimeout(this._holdTimeout),De(document,"touchend touchcancel contextmenu",this._cancel,this),De(document,"touchmove",this._onMove,this)},_onMove:function(r){var a=r.touches[0];this._newPos=new H(a.clientX,a.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(r,a){var c=new MouseEvent(r,{bubbles:!0,cancelable:!0,view:window,screenX:a.screenX,screenY:a.screenY,clientX:a.clientX,clientY:a.clientY});c._simulated=!0,a.target.dispatchEvent(c)}});Ee.addInitHook("addHandler","tapHold",Rg),Ee.mergeOptions({touchZoom:se.touch,bounceAtZoomLimits:!0});var kg=en.extend({addHooks:function(){_e(this._map._container,"leaflet-touch-zoom"),ae(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){je(this._map._container,"leaflet-touch-zoom"),De(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(r){var a=this._map;if(!(!r.touches||r.touches.length!==2||a._animatingZoom||this._zooming)){var c=a.mouseEventToContainerPoint(r.touches[0]),f=a.mouseEventToContainerPoint(r.touches[1]);this._centerPoint=a.getSize()._divideBy(2),this._startLatLng=a.containerPointToLatLng(this._centerPoint),a.options.touchZoom!=="center"&&(this._pinchStartLatLng=a.containerPointToLatLng(c.add(f)._divideBy(2))),this._startDist=c.distanceTo(f),this._startZoom=a.getZoom(),this._moved=!1,this._zooming=!0,a._stop(),ae(document,"touchmove",this._onTouchMove,this),ae(document,"touchend touchcancel",this._onTouchEnd,this),$e(r)}},_onTouchMove:function(r){if(!(!r.touches||r.touches.length!==2||!this._zooming)){var a=this._map,c=a.mouseEventToContainerPoint(r.touches[0]),f=a.mouseEventToContainerPoint(r.touches[1]),g=c.distanceTo(f)/this._startDist;if(this._zoom=a.getScaleZoom(g,this._startZoom),!a.options.bounceAtZoomLimits&&(this._zoom<a.getMinZoom()&&g<1||this._zoom>a.getMaxZoom()&&g>1)&&(this._zoom=a._limitZoom(this._zoom)),a.options.touchZoom==="center"){if(this._center=this._startLatLng,g===1)return}else{var w=c._add(f)._divideBy(2)._subtract(this._centerPoint);if(g===1&&w.x===0&&w.y===0)return;this._center=a.unproject(a.project(this._pinchStartLatLng,this._zoom).subtract(w),this._zoom)}this._moved||(a._moveStart(!0,!1),this._moved=!0),V(this._animRequest);var R=l(a._move,a,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=M(R,this,!0),$e(r)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,V(this._animRequest),De(document,"touchmove",this._onTouchMove,this),De(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ee.addInitHook("addHandler","touchZoom",kg),Ee.BoxZoom=Ig,Ee.DoubleClickZoom=Pg,Ee.Drag=Sg,Ee.Keyboard=Ag,Ee.ScrollWheelZoom=Cg,Ee.TapHold=Rg,Ee.TouchZoom=kg,n.Bounds=he,n.Browser=se,n.CRS=ht,n.Canvas=yg,n.Circle=ld,n.CircleMarker=Du,n.Class=Ye,n.Control=$t,n.DivIcon=gg,n.DivOverlay=Wn,n.DomEvent=Ru,n.DomUtil=Su,n.Draggable=Rn,n.Evented=Ft,n.FeatureGroup=et,n.GeoJSON=di,n.GridLayer=Ra,n.Handler=en,n.Icon=jn,n.ImageOverlay=Uu,n.LatLng=ye,n.LatLngBounds=Ie,n.Layer=be,n.LayerGroup=qe,n.LineUtil=E,n.Map=Ee,n.Marker=Mu,n.Mixin=Br,n.Path=Hi,n.Point=H,n.PolyUtil=js,n.Polygon=$s,n.Polyline=hi,n.Popup=Bu,n.PosAnimation=Ea,n.Projection=J,n.Rectangle=Tg,n.Renderer=fi,n.SVG=xa,n.SVGOverlay=mg,n.TileLayer=Zs,n.Tooltip=ju,n.Transformation=Di,n.Util=O,n.VideoOverlay=pg,n.bind=l,n.bounds=ve,n.canvas=wg,n.circle=gI,n.circleMarker=mI,n.control=zt,n.divIcon=SI,n.extend=s,n.featureGroup=Hs,n.geoJSON=fg,n.geoJson=yI,n.gridLayer=AI,n.icon=fI,n.imageOverlay=wI,n.latLng=pe,n.latLngBounds=Le,n.layerGroup=Wi,n.map=bs,n.marker=pI,n.point=Y,n.polygon=vI,n.polyline=_I,n.popup=II,n.rectangle=kI,n.setOptions=b,n.stamp=d,n.svg=Eg,n.svgOverlay=TI,n.tileLayer=_g,n.tooltip=PI,n.transformation=ni,n.version=i,n.videoOverlay=EI;var LI=window.L;n.noConflict=function(){return window.L=LI,this},window.L=n})})(Zf,Zf.exports);var Ql=Zf.exports;const IC=py(Ql);function vm(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function ym(t,e){return e==null?function(i,s){const o=$.useRef();return o.current||(o.current=t(i,s)),o}:function(i,s){const o=$.useRef();o.current||(o.current=t(i,s));const l=$.useRef(i),{instance:h}=o.current;return $.useEffect(function(){l.current!==i&&(e(h,i,l.current),l.current=i)},[h,i,s]),o}}function PC(t,e){$.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function ZE(t){return function(n){const i=$E(),s=t(_m(n,i),i);return jE(i.map,n.attribution),qE(s.current,n.eventHandlers),PC(s.current,i),s}}function SC(t,e){const n=ym(t,e),i=ZE(n);return yC(i)}function AC(t,e){const n=ym(t),i=TC(n,e);return wC(i)}function CC(t,e){const n=ym(t,e),i=ZE(n);return EC(i)}function RC(t,e,n){const{opacity:i,zIndex:s}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),s!=null&&s!==n.zIndex&&t.setZIndex(s)}function Kf(){return Kf=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Kf.apply(this,arguments)}function kC({bounds:t,boundsOptions:e,center:n,children:i,className:s,id:o,placeholder:l,style:h,whenReady:d,zoom:m,...v},y){const[T]=$.useState({className:s,id:o,style:h}),[N,D]=$.useState(null);$.useImperativeHandle(y,()=>(N==null?void 0:N.map)??null,[N]);const b=$.useCallback(A=>{if(A!==null&&N===null){const P=new Ql.Map(A,v);n!=null&&m!=null?P.setView(n,m):t!=null&&P.fitBounds(t,e),d!=null&&P.whenReady(d),D(_C(P))}},[]);$.useEffect(()=>()=>{N==null||N.map.remove()},[N]);const U=N?Dc.createElement(HE,{value:N},i):l??null;return Dc.createElement("div",Kf({},T,{ref:b}),U)}const xC=$.forwardRef(kC),LC=SC(function({position:e,...n},i){const s=new Ql.Marker(e,n);return vm(s,vC(i,{overlayContainer:s}))},function(e,n,i){n.position!==i.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),OC=AC(function(e,n){const i=new Ql.Popup(e,n.overlayContainer);return vm(i,n)},function(e,n,{position:i},s){$.useEffect(function(){const{instance:l}=e;function h(m){m.popup===l&&(l.update(),s(!0))}function d(m){m.popup===l&&s(!1)}return n.map.on({popupopen:h,popupclose:d}),n.overlayContainer==null?(i!=null&&l.setLatLng(i),l.openOn(n.map)):n.overlayContainer.bindPopup(l),function(){var v;n.map.off({popupopen:h,popupclose:d}),(v=n.overlayContainer)==null||v.unbindPopup(),n.map.removeLayer(l)}},[e,n,s,i])}),NC=CC(function({url:e,...n},i){const s=new Ql.TileLayer(e,_m(n,i));return vm(s,i)},function(e,n,i){RC(e,n,i);const{url:s}=n;s!=null&&s!==i.url&&e.setUrl(s)}),MC="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",DC="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC";var Q_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},bC=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const s=t[n++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[n++];e[i++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[n++],l=t[n++],h=t[n++],d=((s&7)<<18|(o&63)<<12|(l&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(d>>10)),e[i++]=String.fromCharCode(56320+(d&1023))}else{const o=t[n++],l=t[n++];e[i++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return e.join("")},GE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const o=t[s],l=s+1<t.length,h=l?t[s+1]:0,d=s+2<t.length,m=d?t[s+2]:0,v=o>>2,y=(o&3)<<4|h>>4;let T=(h&15)<<2|m>>6,N=m&63;d||(N=64,l||(T=64)),i.push(n[v],n[y],n[T],n[N])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(KE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):bC(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const o=n[t.charAt(s++)],h=s<t.length?n[t.charAt(s)]:0;++s;const m=s<t.length?n[t.charAt(s)]:64;++s;const y=s<t.length?n[t.charAt(s)]:64;if(++s,o==null||h==null||m==null||y==null)throw new VC;const T=o<<2|h>>4;if(i.push(T),m!==64){const N=h<<4&240|m>>2;if(i.push(N),y!==64){const D=m<<6&192|y;i.push(D)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class VC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const FC=function(t){const e=KE(t);return GE.encodeByteArray(e,!0)},ah=function(t){return FC(t).replace(/\./g,"")},QE=function(t){try{return GE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC=()=>zC().__FIREBASE_DEFAULTS__,BC=()=>{if(typeof process>"u"||typeof Q_>"u")return;const t=Q_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},jC=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&QE(t[1]);return e&&JSON.parse(e)},jh=()=>{try{return UC()||BC()||jC()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},YE=t=>{var e,n;return(n=(e=jh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},WC=t=>{const e=YE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},XE=()=>{var t;return(t=jh())===null||t===void 0?void 0:t.config},JE=t=>{var e;return(e=jh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $C(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ah(JSON.stringify(n)),ah(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(bt())}function ZC(){var t;const e=(t=jh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function KC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function GC(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function QC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function YC(){const t=bt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function XC(){return!ZC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function JC(){try{return typeof indexedDB=="object"}catch{return!1}}function eR(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR="FirebaseError";class Ni extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=tR,Object.setPrototypeOf(this,Ni.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yl.prototype.create)}}class Yl{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},s=`${this.service}/${e}`,o=this.errors[e],l=o?nR(o,i):"Error",h=`${this.serviceName}: ${l} (${s}).`;return new Ni(s,h,i)}}function nR(t,e){return t.replace(iR,(n,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const iR=/\{\$([^}]+)}/g;function rR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function lh(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const s of n){if(!i.includes(s))return!1;const o=t[s],l=e[s];if(Y_(o)&&Y_(l)){if(!lh(o,l))return!1}else if(o!==l)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function Y_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xl(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function $a(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,o]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function qa(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function sR(t,e){const n=new oR(t,e);return n.subscribe.bind(n)}class oR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let s;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");aR(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:i},s.next===void 0&&(s.next=Ud),s.error===void 0&&(s.error=Ud),s.complete===void 0&&(s.complete=Ud);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function aR(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ud(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(t){return t&&t._delegate?t._delegate:t}class ss{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new HC;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(cR(e))try{this.getOrInitializeService({instanceIdentifier:$r})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});i.resolve(o)}catch{}}}}clearInstance(e=$r){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$r){return this.instances.has(e)}getOptions(e=$r){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,l]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);i===h&&l.resolve(s)}return s}onInit(e,n){var i;const s=this.normalizeInstanceIdentifier(n),o=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:uR(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=$r){return this.component?this.component.multipleInstances?e:$r:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function uR(t){return t===$r?void 0:t}function cR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new lR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ae;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ae||(Ae={}));const dR={debug:Ae.DEBUG,verbose:Ae.VERBOSE,info:Ae.INFO,warn:Ae.WARN,error:Ae.ERROR,silent:Ae.SILENT},fR=Ae.INFO,pR={[Ae.DEBUG]:"log",[Ae.VERBOSE]:"log",[Ae.INFO]:"info",[Ae.WARN]:"warn",[Ae.ERROR]:"error"},mR=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=pR[e];if(s)console[s](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class wm{constructor(e){this.name=e,this._logLevel=fR,this._logHandler=mR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?dR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ae.DEBUG,...e),this._logHandler(this,Ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ae.VERBOSE,...e),this._logHandler(this,Ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ae.INFO,...e),this._logHandler(this,Ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ae.WARN,...e),this._logHandler(this,Ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ae.ERROR,...e),this._logHandler(this,Ae.ERROR,...e)}}const gR=(t,e)=>e.some(n=>t instanceof n);let X_,J_;function _R(){return X_||(X_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vR(){return J_||(J_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const e0=new WeakMap,Gf=new WeakMap,t0=new WeakMap,Bd=new WeakMap,Em=new WeakMap;function yR(t){const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n(pr(t.result)),s()},l=()=>{i(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&e0.set(n,t)}).catch(()=>{}),Em.set(e,t),e}function wR(t){if(Gf.has(t))return;const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),s()},l=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});Gf.set(t,e)}let Qf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Gf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||t0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return pr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function ER(t){Qf=t(Qf)}function TR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(jd(this),e,...n);return t0.set(i,e.sort?e.sort():[e]),pr(i)}:vR().includes(t)?function(...e){return t.apply(jd(this),e),pr(e0.get(this))}:function(...e){return pr(t.apply(jd(this),e))}}function IR(t){return typeof t=="function"?TR(t):(t instanceof IDBTransaction&&wR(t),gR(t,_R())?new Proxy(t,Qf):t)}function pr(t){if(t instanceof IDBRequest)return yR(t);if(Bd.has(t))return Bd.get(t);const e=IR(t);return e!==t&&(Bd.set(t,e),Em.set(e,t)),e}const jd=t=>Em.get(t);function PR(t,e,{blocked:n,upgrade:i,blocking:s,terminated:o}={}){const l=indexedDB.open(t,e),h=pr(l);return i&&l.addEventListener("upgradeneeded",d=>{i(pr(l.result),d.oldVersion,d.newVersion,pr(l.transaction),d)}),n&&l.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),h.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",m=>s(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const SR=["get","getKey","getAll","getAllKeys","count"],AR=["put","add","delete","clear"],Wd=new Map;function ev(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Wd.get(e))return Wd.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=AR.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||SR.includes(n)))return;const o=async function(l,...h){const d=this.transaction(l,s?"readwrite":"readonly");let m=d.store;return i&&(m=m.index(h.shift())),(await Promise.all([m[n](...h),s&&d.done]))[0]};return Wd.set(e,o),o}ER(t=>({...t,get:(e,n,i)=>ev(e,n)||t.get(e,n,i),has:(e,n)=>!!ev(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(RR(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function RR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Yf="@firebase/app",tv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ri=new wm("@firebase/app"),kR="@firebase/app-compat",xR="@firebase/analytics-compat",LR="@firebase/analytics",OR="@firebase/app-check-compat",NR="@firebase/app-check",MR="@firebase/auth",DR="@firebase/auth-compat",bR="@firebase/database",VR="@firebase/data-connect",FR="@firebase/database-compat",zR="@firebase/functions",UR="@firebase/functions-compat",BR="@firebase/installations",jR="@firebase/installations-compat",WR="@firebase/messaging",HR="@firebase/messaging-compat",$R="@firebase/performance",qR="@firebase/performance-compat",ZR="@firebase/remote-config",KR="@firebase/remote-config-compat",GR="@firebase/storage",QR="@firebase/storage-compat",YR="@firebase/firestore",XR="@firebase/vertexai-preview",JR="@firebase/firestore-compat",ek="firebase",tk="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xf="[DEFAULT]",nk={[Yf]:"fire-core",[kR]:"fire-core-compat",[LR]:"fire-analytics",[xR]:"fire-analytics-compat",[NR]:"fire-app-check",[OR]:"fire-app-check-compat",[MR]:"fire-auth",[DR]:"fire-auth-compat",[bR]:"fire-rtdb",[VR]:"fire-data-connect",[FR]:"fire-rtdb-compat",[zR]:"fire-fn",[UR]:"fire-fn-compat",[BR]:"fire-iid",[jR]:"fire-iid-compat",[WR]:"fire-fcm",[HR]:"fire-fcm-compat",[$R]:"fire-perf",[qR]:"fire-perf-compat",[ZR]:"fire-rc",[KR]:"fire-rc-compat",[GR]:"fire-gcs",[QR]:"fire-gcs-compat",[YR]:"fire-fst",[JR]:"fire-fst-compat",[XR]:"fire-vertex","fire-js":"fire-js",[ek]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uh=new Map,ik=new Map,Jf=new Map;function nv(t,e){try{t.container.addComponent(e)}catch(n){Ri.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function xo(t){const e=t.name;if(Jf.has(e))return Ri.debug(`There were multiple attempts to register component ${e}.`),!1;Jf.set(e,t);for(const n of uh.values())nv(n,t);for(const n of ik.values())nv(n,t);return!0}function Tm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Zn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},mr=new Yl("app","Firebase",rk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ss("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw mr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jo=tk;function n0(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Xf,automaticDataCollectionEnabled:!1},e),s=i.name;if(typeof s!="string"||!s)throw mr.create("bad-app-name",{appName:String(s)});if(n||(n=XE()),!n)throw mr.create("no-options");const o=uh.get(s);if(o){if(lh(n,o.options)&&lh(i,o.config))return o;throw mr.create("duplicate-app",{appName:s})}const l=new hR(s);for(const d of Jf.values())l.addComponent(d);const h=new sk(n,i,l);return uh.set(s,h),h}function i0(t=Xf){const e=uh.get(t);if(!e&&t===Xf&&XE())return n0();if(!e)throw mr.create("no-app",{appName:t});return e}function gr(t,e,n){var i;let s=(i=nk[t])!==null&&i!==void 0?i:t;n&&(s+=`-${n}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const h=[`Unable to register library "${s}" with version "${e}":`];o&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&h.push("and"),l&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ri.warn(h.join(" "));return}xo(new ss(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ok="firebase-heartbeat-database",ak=1,Ol="firebase-heartbeat-store";let Hd=null;function r0(){return Hd||(Hd=PR(ok,ak,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ol)}catch(n){console.warn(n)}}}}).catch(t=>{throw mr.create("idb-open",{originalErrorMessage:t.message})})),Hd}async function lk(t){try{const n=(await r0()).transaction(Ol),i=await n.objectStore(Ol).get(s0(t));return await n.done,i}catch(e){if(e instanceof Ni)Ri.warn(e.message);else{const n=mr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ri.warn(n.message)}}}async function iv(t,e){try{const i=(await r0()).transaction(Ol,"readwrite");await i.objectStore(Ol).put(e,s0(t)),await i.done}catch(n){if(n instanceof Ni)Ri.warn(n.message);else{const i=mr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ri.warn(i.message)}}}function s0(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uk=1024,ck=30*24*60*60*1e3;class hk{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new fk(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=rv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(l=>{const h=new Date(l.date).valueOf();return Date.now()-h<=ck}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Ri.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=rv(),{heartbeatsToSend:i,unsentEntries:s}=dk(this._heartbeatsCache.heartbeats),o=ah(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Ri.warn(n),""}}}function rv(){return new Date().toISOString().substring(0,10)}function dk(t,e=uk){const n=[];let i=t.slice();for(const s of t){const o=n.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),sv(n)>e){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),sv(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class fk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return JC()?eR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await lk(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return iv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return iv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function sv(t){return ah(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pk(t){xo(new ss("platform-logger",e=>new CR(e),"PRIVATE")),xo(new ss("heartbeat",e=>new hk(e),"PRIVATE")),gr(Yf,tv,t),gr(Yf,tv,"esm2017"),gr("fire-js","")}pk("");var mk="firebase",gk="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gr(mk,gk,"app");function Im(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n}function o0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const _k=o0,a0=new Yl("auth","Firebase",o0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ch=new wm("@firebase/auth");function vk(t,...e){ch.logLevel<=Ae.WARN&&ch.warn(`Auth (${jo}): ${t}`,...e)}function Ac(t,...e){ch.logLevel<=Ae.ERROR&&ch.error(`Auth (${jo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vn(t,...e){throw Pm(t,...e)}function Qn(t,...e){return Pm(t,...e)}function l0(t,e,n){const i=Object.assign(Object.assign({},_k()),{[e]:n});return new Yl("auth","Firebase",i).create(e,{appName:t.name})}function Ti(t){return l0(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Pm(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return a0.create(t,...e)}function ce(t,e,...n){if(!t)throw Pm(e,...n)}function vi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ac(e),new Error(e)}function ki(t,e){t||vi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ep(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function yk(){return ov()==="http:"||ov()==="https:"}function ov(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(yk()||GC()||"connection"in navigator)?navigator.onLine:!0}function Ek(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e,n){this.shortDelay=e,this.longDelay=n,ki(n>e,"Short delay should be less than long delay!"),this.isMobile=qC()||QC()}get(){return wk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sm(t,e){ki(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ik=new Jl(3e4,6e4);function Cr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Rr(t,e,n,i,s={}){return c0(t,s,async()=>{let o={},l={};i&&(e==="GET"?l=i:o={body:JSON.stringify(i)});const h=Xl(Object.assign({key:t.config.apiKey},l)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const m=Object.assign({method:e,headers:d},o);return KC()||(m.referrerPolicy="no-referrer"),u0.fetch()(h0(t,t.config.apiHost,n,h),m)})}async function c0(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},Tk),e);try{const s=new Sk(t),o=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw lc(t,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const h=o.ok?l.errorMessage:l.error.message,[d,m]=h.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw lc(t,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw lc(t,"email-already-in-use",l);if(d==="USER_DISABLED")throw lc(t,"user-disabled",l);const v=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw l0(t,v,m);Vn(t,v)}}catch(s){if(s instanceof Ni)throw s;Vn(t,"network-request-failed",{message:String(s)})}}async function eu(t,e,n,i,s={}){const o=await Rr(t,e,n,i,s);return"mfaPendingCredential"in o&&Vn(t,"multi-factor-auth-required",{_serverResponse:o}),o}function h0(t,e,n,i){const s=`${e}${n}?${i}`;return t.config.emulator?Sm(t.config,s):`${t.config.apiScheme}://${s}`}function Pk(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Sk{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Qn(this.auth,"network-request-failed")),Ik.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function lc(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=Qn(t,e,i);return s.customData._tokenResponse=n,s}function av(t){return t!==void 0&&t.enterprise!==void 0}class Ak{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Pk(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function Ck(t,e){return Rr(t,"GET","/v2/recaptchaConfig",Cr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rk(t,e){return Rr(t,"POST","/v1/accounts:delete",e)}async function d0(t,e){return Rr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ol(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function kk(t,e=!1){const n=Vt(t),i=await n.getIdToken(e),s=Am(i);ce(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:s,token:i,authTime:ol($d(s.auth_time)),issuedAtTime:ol($d(s.iat)),expirationTime:ol($d(s.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function $d(t){return Number(t)*1e3}function Am(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Ac("JWT malformed, contained fewer than 3 sections"),null;try{const s=QE(n);return s?JSON.parse(s):(Ac("Failed to decode base64 JWT payload"),null)}catch(s){return Ac("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function lv(t){const e=Am(t);return ce(e,"internal-error"),ce(typeof e.exp<"u","internal-error"),ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nl(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Ni&&xk(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function xk({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ol(this.lastLoginAt),this.creationTime=ol(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hh(t){var e;const n=t.auth,i=await t.getIdToken(),s=await Nl(t,d0(n,{idToken:i}));ce(s==null?void 0:s.users.length,n,"internal-error");const o=s.users[0];t._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?f0(o.providerUserInfo):[],h=Nk(t.providerData,l),d=t.isAnonymous,m=!(t.email&&o.passwordHash)&&!(h!=null&&h.length),v=d?m:!1,y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new tp(o.createdAt,o.lastLoginAt),isAnonymous:v};Object.assign(t,y)}async function Ok(t){const e=Vt(t);await hh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Nk(t,e){return[...t.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function f0(t){return t.map(e=>{var{providerId:n}=e,i=Im(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mk(t,e){const n=await c0(t,{},async()=>{const i=Xl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=t.config,l=h0(t,s,"/v1/token",`key=${o}`),h=await t._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",u0.fetch()(l,{method:"POST",headers:h,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Dk(t,e){return Rr(t,"POST","/v2/accounts:revokeToken",Cr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ce(e.idToken,"internal-error"),ce(typeof e.idToken<"u","internal-error"),ce(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):lv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ce(e.length!==0,"internal-error");const n=lv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:s,expiresIn:o}=await Mk(e,n);this.updateTokensAndExpiration(i,s,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:s,expirationTime:o}=n,l=new yo;return i&&(ce(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),s&&(ce(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),o&&(ce(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new yo,this.toJSON())}_performRefresh(){return vi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qi(t,e){ce(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class yi{constructor(e){var{uid:n,auth:i,stsTokenManager:s}=e,o=Im(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Lk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new tp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Nl(this,this.stsTokenManager.getToken(this.auth,e));return ce(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return kk(this,e)}reload(){return Ok(this)}_assign(e){this!==e&&(ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new yi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await hh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Zn(this.auth.app))return Promise.reject(Ti(this.auth));const e=await this.getIdToken();return await Nl(this,Rk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,s,o,l,h,d,m,v;const y=(i=n.displayName)!==null&&i!==void 0?i:void 0,T=(s=n.email)!==null&&s!==void 0?s:void 0,N=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,D=(l=n.photoURL)!==null&&l!==void 0?l:void 0,b=(h=n.tenantId)!==null&&h!==void 0?h:void 0,U=(d=n._redirectEventId)!==null&&d!==void 0?d:void 0,A=(m=n.createdAt)!==null&&m!==void 0?m:void 0,P=(v=n.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:k,emailVerified:W,isAnonymous:G,providerData:X,stsTokenManager:C}=n;ce(k&&C,e,"internal-error");const I=yo.fromJSON(this.name,C);ce(typeof k=="string",e,"internal-error"),qi(y,e.name),qi(T,e.name),ce(typeof W=="boolean",e,"internal-error"),ce(typeof G=="boolean",e,"internal-error"),qi(N,e.name),qi(D,e.name),qi(b,e.name),qi(U,e.name),qi(A,e.name),qi(P,e.name);const S=new yi({uid:k,auth:e,email:T,emailVerified:W,displayName:y,isAnonymous:G,photoURL:D,phoneNumber:N,tenantId:b,stsTokenManager:I,createdAt:A,lastLoginAt:P});return X&&Array.isArray(X)&&(S.providerData=X.map(x=>Object.assign({},x))),U&&(S._redirectEventId=U),S}static async _fromIdTokenResponse(e,n,i=!1){const s=new yo;s.updateFromServerResponse(n);const o=new yi({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await hh(o),o}static async _fromGetAccountInfoResponse(e,n,i){const s=n.users[0];ce(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?f0(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),h=new yo;h.updateFromIdToken(i);const d=new yi({uid:s.localId,auth:e,stsTokenManager:h,isAnonymous:l}),m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new tp(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(d,m),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uv=new Map;function wi(t){ki(t instanceof Function,"Expected a class definition");let e=uv.get(t);return e?(ki(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,uv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}p0.type="NONE";const cv=p0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cc(t,e,n){return`firebase:${t}:${e}:${n}`}class wo{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:s,name:o}=this.auth;this.fullUserKey=Cc(this.userKey,s.apiKey,o),this.fullPersistenceKey=Cc("persistence",s.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?yi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new wo(wi(cv),e,i);const s=(await Promise.all(n.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let o=s[0]||wi(cv);const l=Cc(i,e.config.apiKey,e.name);let h=null;for(const m of n)try{const v=await m._get(l);if(v){const y=yi._fromJSON(e,v);m!==o&&(h=y),o=m;break}}catch{}const d=s.filter(m=>m._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new wo(o,e,i):(o=d[0],h&&await o._set(l,h.toJSON()),await Promise.all(n.map(async m=>{if(m!==o)try{await m._remove(l)}catch{}})),new wo(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(v0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(m0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(w0(e))return"Blackberry";if(E0(e))return"Webos";if(g0(e))return"Safari";if((e.includes("chrome/")||_0(e))&&!e.includes("edge/"))return"Chrome";if(y0(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function m0(t=bt()){return/firefox\//i.test(t)}function g0(t=bt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _0(t=bt()){return/crios\//i.test(t)}function v0(t=bt()){return/iemobile/i.test(t)}function y0(t=bt()){return/android/i.test(t)}function w0(t=bt()){return/blackberry/i.test(t)}function E0(t=bt()){return/webos/i.test(t)}function Cm(t=bt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function bk(t=bt()){var e;return Cm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Vk(){return YC()&&document.documentMode===10}function T0(t=bt()){return Cm(t)||y0(t)||E0(t)||w0(t)||/windows phone/i.test(t)||v0(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I0(t,e=[]){let n;switch(t){case"Browser":n=hv(bt());break;case"Worker":n=`${hv(bt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${jo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((l,h)=>{try{const d=e(o);l(d)}catch(d){h(d)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zk(t,e={}){return Rr(t,"GET","/v2/passwordPolicy",Cr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uk=6;class Bk{constructor(e){var n,i,s,o;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=l.minPasswordLength)!==null&&n!==void 0?n:Uk,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,s,o,l,h;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(n=d.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(i=d.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(s=d.containsLowercaseLetter)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(o=d.containsUppercaseLetter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(l=d.containsNumericCharacter)!==null&&l!==void 0?l:!0),d.isValid&&(d.isValid=(h=d.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),d}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(e,n,i,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new dv(this),this.idTokenSubscription=new dv(this),this.beforeStateQueue=new Fk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=a0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=wi(n)),this._initializationPromise=this.queue(async()=>{var i,s;if(!this._deleted&&(this.persistenceManager=await wo.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await d0(this,{idToken:e}),i=await yi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Zn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(h,h))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let s=i,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,h=s==null?void 0:s._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===h)&&(d!=null&&d.user)&&(s=d.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await hh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Ek()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Zn(this.app))return Promise.reject(Ti(this));const n=e?Vt(e):null;return n&&ce(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Zn(this.app)?Promise.reject(Ti(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Zn(this.app)?Promise.reject(Ti(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(wi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await zk(this),n=new Bk(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Yl("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await Dk(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&wi(e)||this._popupRedirectResolver;ce(n,this,"argument-error"),this.redirectPersistenceManager=await wo.create(this,[wi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,s){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let l=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(ce(h,this,"internal-error"),h.then(()=>{l||o(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,i,s);return()=>{l=!0,d()}}else{const d=e.addObserver(n);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=I0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&vk(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ps(t){return Vt(t)}class dv{constructor(e){this.auth=e,this.observer=null,this.addObserver=sR(n=>this.observer=n)}get next(){return ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Wk(t){Wh=t}function P0(t){return Wh.loadJS(t)}function Hk(){return Wh.recaptchaEnterpriseScript}function $k(){return Wh.gapiScript}function qk(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const Zk="recaptcha-enterprise",Kk="NO_RECAPTCHA";class Gk{constructor(e){this.type=Zk,this.auth=ps(e)}async verify(e="verify",n=!1){async function i(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,h)=>{Ck(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const m=new Ak(d);return o.tenantId==null?o._agentRecaptchaConfig=m:o._tenantRecaptchaConfigs[o.tenantId]=m,l(m.siteKey)}}).catch(d=>{h(d)})})}function s(o,l,h){const d=window.grecaptcha;av(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(m=>{l(m)}).catch(()=>{l(Kk)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,l)=>{i(this.auth).then(h=>{if(!n&&av(window.grecaptcha))s(h,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=Hk();d.length!==0&&(d+=h),P0(d).then(()=>{s(h,o,l)}).catch(m=>{l(m)})}}).catch(h=>{l(h)})})}}async function fv(t,e,n,i=!1){const s=new Gk(t);let o;try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const l=Object.assign({},e);return i?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function np(t,e,n,i){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await fv(t,e,n,n==="getOobCode");return i(t,o)}else return i(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await fv(t,e,n,n==="getOobCode");return i(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qk(t,e){const n=Tm(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),o=n.getOptions();if(lh(o,e??{}))return s;Vn(s,"already-initialized")}return n.initialize({options:e})}function Yk(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(wi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function Xk(t,e,n){const i=ps(t);ce(i._canInitEmulator,i,"emulator-config-failed"),ce(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,o=S0(e),{host:l,port:h}=Jk(e),d=h===null?"":`:${h}`;i.config.emulator={url:`${o}//${l}${d}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:l,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})}),e1()}function S0(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Jk(t){const e=S0(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const o=s[1];return{host:o,port:pv(i.substr(o.length+1))}}else{const[o,l]=i.split(":");return{host:o,port:pv(l)}}}function pv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function e1(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return vi("not implemented")}_getIdTokenResponse(e){return vi("not implemented")}_linkToIdToken(e,n){return vi("not implemented")}_getReauthenticationResolver(e){return vi("not implemented")}}async function t1(t,e){return Rr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n1(t,e){return eu(t,"POST","/v1/accounts:signInWithPassword",Cr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i1(t,e){return eu(t,"POST","/v1/accounts:signInWithEmailLink",Cr(t,e))}async function r1(t,e){return eu(t,"POST","/v1/accounts:signInWithEmailLink",Cr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml extends Rm{constructor(e,n,i,s=null){super("password",i),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Ml(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Ml(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return np(e,n,"signInWithPassword",n1);case"emailLink":return i1(e,{email:this._email,oobCode:this._password});default:Vn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return np(e,i,"signUpPassword",t1);case"emailLink":return r1(e,{idToken:n,email:this._email,oobCode:this._password});default:Vn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eo(t,e){return eu(t,"POST","/v1/accounts:signInWithIdp",Cr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1="http://localhost";class os extends Rm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new os(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Vn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s}=n,o=Im(n,["providerId","signInMethod"]);if(!i||!s)return null;const l=new os(i,s);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return Eo(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Eo(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Eo(e,n)}buildRequest(){const e={requestUri:s1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Xl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function a1(t){const e=$a(qa(t)).link,n=e?$a(qa(e)).deep_link_id:null,i=$a(qa(t)).deep_link_id;return(i?$a(qa(i)).link:null)||i||n||e||t}class km{constructor(e){var n,i,s,o,l,h;const d=$a(qa(e)),m=(n=d.apiKey)!==null&&n!==void 0?n:null,v=(i=d.oobCode)!==null&&i!==void 0?i:null,y=o1((s=d.mode)!==null&&s!==void 0?s:null);ce(m&&v&&y,"argument-error"),this.apiKey=m,this.operation=y,this.code=v,this.continueUrl=(o=d.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(l=d.languageCode)!==null&&l!==void 0?l:null,this.tenantId=(h=d.tenantId)!==null&&h!==void 0?h:null}static parseLink(e){const n=a1(e);try{return new km(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(){this.providerId=Wo.PROVIDER_ID}static credential(e,n){return Ml._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=km.parseLink(n);return ce(i,"argument-error"),Ml._fromEmailAndCode(e,i.code,i.tenantId)}}Wo.PROVIDER_ID="password";Wo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Wo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu extends A0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi extends tu{constructor(){super("facebook.com")}static credential(e){return os._fromParams({providerId:Yi.PROVIDER_ID,signInMethod:Yi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Yi.credentialFromTaggedObject(e)}static credentialFromError(e){return Yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Yi.credential(e.oauthAccessToken)}catch{return null}}}Yi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Yi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi extends tu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return os._fromParams({providerId:Xi.PROVIDER_ID,signInMethod:Xi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Xi.credentialFromTaggedObject(e)}static credentialFromError(e){return Xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Xi.credential(n,i)}catch{return null}}}Xi.GOOGLE_SIGN_IN_METHOD="google.com";Xi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji extends tu{constructor(){super("github.com")}static credential(e){return os._fromParams({providerId:Ji.PROVIDER_ID,signInMethod:Ji.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ji.credentialFromTaggedObject(e)}static credentialFromError(e){return Ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ji.credential(e.oauthAccessToken)}catch{return null}}}Ji.GITHUB_SIGN_IN_METHOD="github.com";Ji.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er extends tu{constructor(){super("twitter.com")}static credential(e,n){return os._fromParams({providerId:er.PROVIDER_ID,signInMethod:er.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return er.credentialFromTaggedObject(e)}static credentialFromError(e){return er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return er.credential(n,i)}catch{return null}}}er.TWITTER_SIGN_IN_METHOD="twitter.com";er.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l1(t,e){return eu(t,"POST","/v1/accounts:signUp",Cr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,s=!1){const o=await yi._fromIdTokenResponse(e,i,s),l=mv(i);return new as({user:o,providerId:l,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const s=mv(i);return new as({user:e,providerId:s,_tokenResponse:i,operationType:n})}}function mv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh extends Ni{constructor(e,n,i,s){var o;super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,dh.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,s){return new dh(e,n,i,s)}}function C0(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?dh._fromErrorAndOperation(t,o,e,i):o})}async function u1(t,e,n=!1){const i=await Nl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return as._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c1(t,e,n=!1){const{auth:i}=t;if(Zn(i.app))return Promise.reject(Ti(i));const s="reauthenticate";try{const o=await Nl(t,C0(i,s,e,t),n);ce(o.idToken,i,"internal-error");const l=Am(o.idToken);ce(l,i,"internal-error");const{sub:h}=l;return ce(t.uid===h,i,"user-mismatch"),as._forOperation(t,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Vn(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R0(t,e,n=!1){if(Zn(t.app))return Promise.reject(Ti(t));const i="signIn",s=await C0(t,i,e),o=await as._fromIdTokenResponse(t,i,s);return n||await t._updateCurrentUser(o.user),o}async function h1(t,e){return R0(ps(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k0(t){const e=ps(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function d1(t,e,n){if(Zn(t.app))return Promise.reject(Ti(t));const i=ps(t),l=await np(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",l1).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&k0(t),d}),h=await as._fromIdTokenResponse(i,"signIn",l);return await i._updateCurrentUser(h.user),h}function f1(t,e,n){return Zn(t.app)?Promise.reject(Ti(t)):h1(Vt(t),Wo.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&k0(t),i})}function p1(t,e,n,i){return Vt(t).onIdTokenChanged(e,n,i)}function m1(t,e,n){return Vt(t).beforeAuthStateChanged(e,n)}function g1(t,e,n,i){return Vt(t).onAuthStateChanged(e,n,i)}function x0(t){return Vt(t).signOut()}const fh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(fh,"1"),this.storage.removeItem(fh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1=1e3,v1=10;class O0 extends L0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=T0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&e(n,s,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,h,d)=>{this.notifyListeners(l,d)});return}const i=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(i);!n&&this.localCache[i]===l||this.notifyListeners(i,l)},o=this.storage.getItem(i);Vk()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,v1):s()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},_1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}O0.type="LOCAL";const y1=O0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0 extends L0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}N0.type="SESSION";const M0=N0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w1(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const i=new Hh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:s,data:o}=n.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const h=Array.from(l).map(async m=>m(n.origin,o)),d=await w1(h);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Hh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xm(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,l;return new Promise((h,d)=>{const m=xm("",20);s.port1.start();const v=setTimeout(()=>{d(new Error("unsupported_event"))},i);l={messageChannel:s,onMessage(y){const T=y;if(T.data.eventId===m)switch(T.data.status){case"ack":clearTimeout(v),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(T.data.response);break;default:clearTimeout(v),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:m,data:n},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yn(){return window}function T1(t){Yn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D0(){return typeof Yn().WorkerGlobalScope<"u"&&typeof Yn().importScripts=="function"}async function I1(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function P1(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function S1(){return D0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0="firebaseLocalStorageDb",A1=1,ph="firebaseLocalStorage",V0="fbase_key";class nu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function $h(t,e){return t.transaction([ph],e?"readwrite":"readonly").objectStore(ph)}function C1(){const t=indexedDB.deleteDatabase(b0);return new nu(t).toPromise()}function ip(){const t=indexedDB.open(b0,A1);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(ph,{keyPath:V0})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(ph)?e(i):(i.close(),await C1(),e(await ip()))})})}async function gv(t,e,n){const i=$h(t,!0).put({[V0]:e,value:n});return new nu(i).toPromise()}async function R1(t,e){const n=$h(t,!1).get(e),i=await new nu(n).toPromise();return i===void 0?null:i.value}function _v(t,e){const n=$h(t,!0).delete(e);return new nu(n).toPromise()}const k1=800,x1=3;class F0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ip(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>x1)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return D0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Hh._getInstance(S1()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await I1(),!this.activeServiceWorker)return;this.sender=new E1(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||P1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ip();return await gv(e,fh,"1"),await _v(e,fh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>gv(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>R1(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>_v(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=$h(s,!1).getAll();return new nu(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),k1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}F0.type="LOCAL";const L1=F0;new Jl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O1(t,e){return e?wi(e):(ce(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm extends Rm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Eo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Eo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Eo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function N1(t){return R0(t.auth,new Lm(t),t.bypassAuthState)}function M1(t){const{auth:e,user:n}=t;return ce(n,e,"internal-error"),c1(n,new Lm(t),t.bypassAuthState)}async function D1(t){const{auth:e,user:n}=t;return ce(n,e,"internal-error"),u1(n,new Lm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0{constructor(e,n,i,s,o=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:s,tenantId:o,error:l,type:h}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(d))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return N1;case"linkViaPopup":case"linkViaRedirect":return D1;case"reauthViaPopup":case"reauthViaRedirect":return M1;default:Vn(this.auth,"internal-error")}}resolve(e){ki(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ki(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1=new Jl(2e3,1e4);class ho extends z0{constructor(e,n,i,s,o){super(e,n,s,o),this.provider=i,this.authWindow=null,this.pollId=null,ho.currentPopupAction&&ho.currentPopupAction.cancel(),ho.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ce(e,this.auth,"internal-error"),e}async onExecution(){ki(this.filter.length===1,"Popup operations only handle one event");const e=xm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Qn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Qn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ho.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Qn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,b1.get())};e()}}ho.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1="pendingRedirect",Rc=new Map;class F1 extends z0{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Rc.get(this.auth._key());if(!e){try{const i=await z1(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Rc.set(this.auth._key(),e)}return this.bypassAuthState||Rc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function z1(t,e){const n=j1(e),i=B1(t);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}function U1(t,e){Rc.set(t._key(),e)}function B1(t){return wi(t._redirectPersistence)}function j1(t){return Cc(V1,t.config.apiKey,t.name)}async function W1(t,e,n=!1){if(Zn(t.app))return Promise.reject(Ti(t));const i=ps(t),s=O1(i,e),l=await new F1(i,s,n).execute();return l&&!n&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H1=10*60*1e3;class $1{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!q1(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!U0(e)){const s=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Qn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=H1&&this.cachedEventUids.clear(),this.cachedEventUids.has(vv(e))}saveEventToCache(e){this.cachedEventUids.add(vv(e)),this.lastProcessedEventTime=Date.now()}}function vv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function U0({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function q1(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return U0(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z1(t,e={}){return Rr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,G1=/^https?/;async function Q1(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Z1(t);for(const n of e)try{if(Y1(n))return}catch{}Vn(t,"unauthorized-domain")}function Y1(t){const e=ep(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===i}if(!G1.test(n))return!1;if(K1.test(t))return i===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1=new Jl(3e4,6e4);function yv(){const t=Yn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function J1(t){return new Promise((e,n)=>{var i,s,o;function l(){yv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{yv(),n(Qn(t,"network-request-failed"))},timeout:X1.get()})}if(!((s=(i=Yn().gapi)===null||i===void 0?void 0:i.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((o=Yn().gapi)===null||o===void 0)&&o.load)l();else{const h=qk("iframefcb");return Yn()[h]=()=>{gapi.load?l():n(Qn(t,"network-request-failed"))},P0(`${$k()}?onload=${h}`).catch(d=>n(d))}}).catch(e=>{throw kc=null,e})}let kc=null;function ex(t){return kc=kc||J1(t),kc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx=new Jl(5e3,15e3),nx="__/auth/iframe",ix="emulator/auth/iframe",rx={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},sx=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ox(t){const e=t.config;ce(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Sm(e,ix):`https://${t.config.authDomain}/${nx}`,i={apiKey:e.apiKey,appName:t.name,v:jo},s=sx.get(t.config.apiHost);s&&(i.eid=s);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${Xl(i).slice(1)}`}async function ax(t){const e=await ex(t),n=Yn().gapi;return ce(n,t,"internal-error"),e.open({where:document.body,url:ox(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:rx,dontclear:!0},i=>new Promise(async(s,o)=>{await i.restyle({setHideOnLeave:!1});const l=Qn(t,"network-request-failed"),h=Yn().setTimeout(()=>{o(l)},tx.get());function d(){Yn().clearTimeout(h),s(i)}i.ping(d).then(d,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lx={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ux=500,cx=600,hx="_blank",dx="http://localhost";class wv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function fx(t,e,n,i=ux,s=cx){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const d=Object.assign(Object.assign({},lx),{width:i.toString(),height:s.toString(),top:o,left:l}),m=bt().toLowerCase();n&&(h=_0(m)?hx:n),m0(m)&&(e=e||dx,d.scrollbars="yes");const v=Object.entries(d).reduce((T,[N,D])=>`${T}${N}=${D},`,"");if(bk(m)&&h!=="_self")return px(e||"",h),new wv(null);const y=window.open(e||"",h,v);ce(y,t,"popup-blocked");try{y.focus()}catch{}return new wv(y)}function px(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx="__/auth/handler",gx="emulator/auth/handler",_x=encodeURIComponent("fac");async function Ev(t,e,n,i,s,o){ce(t.config.authDomain,t,"auth-domain-config-required"),ce(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:jo,eventId:s};if(e instanceof A0){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",rR(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,y]of Object.entries({}))l[v]=y}if(e instanceof tu){const v=e.getScopes().filter(y=>y!=="");v.length>0&&(l.scopes=v.join(","))}t.tenantId&&(l.tid=t.tenantId);const h=l;for(const v of Object.keys(h))h[v]===void 0&&delete h[v];const d=await t._getAppCheckToken(),m=d?`#${_x}=${encodeURIComponent(d)}`:"";return`${vx(t)}?${Xl(h).slice(1)}${m}`}function vx({config:t}){return t.emulator?Sm(t,gx):`https://${t.authDomain}/${mx}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qd="webStorageSupport";class yx{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=M0,this._completeRedirectFn=W1,this._overrideRedirectResult=U1}async _openPopup(e,n,i,s){var o;ki((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await Ev(e,n,i,ep(),s);return fx(e,l,xm())}async _openRedirect(e,n,i,s){await this._originValidation(e);const o=await Ev(e,n,i,ep(),s);return T1(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:o}=this.eventManagers[n];return s?Promise.resolve(s):(ki(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await ax(e),i=new $1(e);return n.register("authEvent",s=>(ce(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(qd,{type:qd},s=>{var o;const l=(o=s==null?void 0:s[0])===null||o===void 0?void 0:o[qd];l!==void 0&&n(!!l),Vn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Q1(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return T0()||g0()||Cm()}}const wx=yx;var Tv="@firebase/auth",Iv="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Ix(t){xo(new ss("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:h}=i.options;ce(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:l,authDomain:h,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:I0(t)},m=new jk(i,s,o,d);return Yk(m,n),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),xo(new ss("auth-internal",e=>{const n=ps(e.getProvider("auth").getImmediate());return(i=>new Ex(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),gr(Tv,Iv,Tx(t)),gr(Tv,Iv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px=5*60,Sx=JE("authIdTokenMaxAge")||Px;let Pv=null;const Ax=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>Sx)return;const s=n==null?void 0:n.token;Pv!==s&&(Pv=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Cx(t=i0()){const e=Tm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Qk(t,{popupRedirectResolver:wx,persistence:[L1,y1,M0]}),i=JE("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const l=Ax(o.toString());m1(n,l,()=>l(n.currentUser)),p1(n,h=>l(h))}}const s=YE("auth");return s&&Xk(n,`http://${s}`),n}function Rx(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Wk({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=s=>{const o=Qn("internal-error");o.customData=s,n(o)},i.type="text/javascript",i.charset="UTF-8",Rx().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Ix("Browser");var Sv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Xr,B0;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,I){function S(){}S.prototype=I.prototype,C.D=I.prototype,C.prototype=new S,C.prototype.constructor=C,C.C=function(x,M,V){for(var O=Array(arguments.length-2),Ye=2;Ye<arguments.length;Ye++)O[Ye-2]=arguments[Ye];return I.prototype[M].apply(x,O)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(C,I,S){S||(S=0);var x=Array(16);if(typeof I=="string")for(var M=0;16>M;++M)x[M]=I.charCodeAt(S++)|I.charCodeAt(S++)<<8|I.charCodeAt(S++)<<16|I.charCodeAt(S++)<<24;else for(M=0;16>M;++M)x[M]=I[S++]|I[S++]<<8|I[S++]<<16|I[S++]<<24;I=C.g[0],S=C.g[1],M=C.g[2];var V=C.g[3],O=I+(V^S&(M^V))+x[0]+3614090360&4294967295;I=S+(O<<7&4294967295|O>>>25),O=V+(M^I&(S^M))+x[1]+3905402710&4294967295,V=I+(O<<12&4294967295|O>>>20),O=M+(S^V&(I^S))+x[2]+606105819&4294967295,M=V+(O<<17&4294967295|O>>>15),O=S+(I^M&(V^I))+x[3]+3250441966&4294967295,S=M+(O<<22&4294967295|O>>>10),O=I+(V^S&(M^V))+x[4]+4118548399&4294967295,I=S+(O<<7&4294967295|O>>>25),O=V+(M^I&(S^M))+x[5]+1200080426&4294967295,V=I+(O<<12&4294967295|O>>>20),O=M+(S^V&(I^S))+x[6]+2821735955&4294967295,M=V+(O<<17&4294967295|O>>>15),O=S+(I^M&(V^I))+x[7]+4249261313&4294967295,S=M+(O<<22&4294967295|O>>>10),O=I+(V^S&(M^V))+x[8]+1770035416&4294967295,I=S+(O<<7&4294967295|O>>>25),O=V+(M^I&(S^M))+x[9]+2336552879&4294967295,V=I+(O<<12&4294967295|O>>>20),O=M+(S^V&(I^S))+x[10]+4294925233&4294967295,M=V+(O<<17&4294967295|O>>>15),O=S+(I^M&(V^I))+x[11]+2304563134&4294967295,S=M+(O<<22&4294967295|O>>>10),O=I+(V^S&(M^V))+x[12]+1804603682&4294967295,I=S+(O<<7&4294967295|O>>>25),O=V+(M^I&(S^M))+x[13]+4254626195&4294967295,V=I+(O<<12&4294967295|O>>>20),O=M+(S^V&(I^S))+x[14]+2792965006&4294967295,M=V+(O<<17&4294967295|O>>>15),O=S+(I^M&(V^I))+x[15]+1236535329&4294967295,S=M+(O<<22&4294967295|O>>>10),O=I+(M^V&(S^M))+x[1]+4129170786&4294967295,I=S+(O<<5&4294967295|O>>>27),O=V+(S^M&(I^S))+x[6]+3225465664&4294967295,V=I+(O<<9&4294967295|O>>>23),O=M+(I^S&(V^I))+x[11]+643717713&4294967295,M=V+(O<<14&4294967295|O>>>18),O=S+(V^I&(M^V))+x[0]+3921069994&4294967295,S=M+(O<<20&4294967295|O>>>12),O=I+(M^V&(S^M))+x[5]+3593408605&4294967295,I=S+(O<<5&4294967295|O>>>27),O=V+(S^M&(I^S))+x[10]+38016083&4294967295,V=I+(O<<9&4294967295|O>>>23),O=M+(I^S&(V^I))+x[15]+3634488961&4294967295,M=V+(O<<14&4294967295|O>>>18),O=S+(V^I&(M^V))+x[4]+3889429448&4294967295,S=M+(O<<20&4294967295|O>>>12),O=I+(M^V&(S^M))+x[9]+568446438&4294967295,I=S+(O<<5&4294967295|O>>>27),O=V+(S^M&(I^S))+x[14]+3275163606&4294967295,V=I+(O<<9&4294967295|O>>>23),O=M+(I^S&(V^I))+x[3]+4107603335&4294967295,M=V+(O<<14&4294967295|O>>>18),O=S+(V^I&(M^V))+x[8]+1163531501&4294967295,S=M+(O<<20&4294967295|O>>>12),O=I+(M^V&(S^M))+x[13]+2850285829&4294967295,I=S+(O<<5&4294967295|O>>>27),O=V+(S^M&(I^S))+x[2]+4243563512&4294967295,V=I+(O<<9&4294967295|O>>>23),O=M+(I^S&(V^I))+x[7]+1735328473&4294967295,M=V+(O<<14&4294967295|O>>>18),O=S+(V^I&(M^V))+x[12]+2368359562&4294967295,S=M+(O<<20&4294967295|O>>>12),O=I+(S^M^V)+x[5]+4294588738&4294967295,I=S+(O<<4&4294967295|O>>>28),O=V+(I^S^M)+x[8]+2272392833&4294967295,V=I+(O<<11&4294967295|O>>>21),O=M+(V^I^S)+x[11]+1839030562&4294967295,M=V+(O<<16&4294967295|O>>>16),O=S+(M^V^I)+x[14]+4259657740&4294967295,S=M+(O<<23&4294967295|O>>>9),O=I+(S^M^V)+x[1]+2763975236&4294967295,I=S+(O<<4&4294967295|O>>>28),O=V+(I^S^M)+x[4]+1272893353&4294967295,V=I+(O<<11&4294967295|O>>>21),O=M+(V^I^S)+x[7]+4139469664&4294967295,M=V+(O<<16&4294967295|O>>>16),O=S+(M^V^I)+x[10]+3200236656&4294967295,S=M+(O<<23&4294967295|O>>>9),O=I+(S^M^V)+x[13]+681279174&4294967295,I=S+(O<<4&4294967295|O>>>28),O=V+(I^S^M)+x[0]+3936430074&4294967295,V=I+(O<<11&4294967295|O>>>21),O=M+(V^I^S)+x[3]+3572445317&4294967295,M=V+(O<<16&4294967295|O>>>16),O=S+(M^V^I)+x[6]+76029189&4294967295,S=M+(O<<23&4294967295|O>>>9),O=I+(S^M^V)+x[9]+3654602809&4294967295,I=S+(O<<4&4294967295|O>>>28),O=V+(I^S^M)+x[12]+3873151461&4294967295,V=I+(O<<11&4294967295|O>>>21),O=M+(V^I^S)+x[15]+530742520&4294967295,M=V+(O<<16&4294967295|O>>>16),O=S+(M^V^I)+x[2]+3299628645&4294967295,S=M+(O<<23&4294967295|O>>>9),O=I+(M^(S|~V))+x[0]+4096336452&4294967295,I=S+(O<<6&4294967295|O>>>26),O=V+(S^(I|~M))+x[7]+1126891415&4294967295,V=I+(O<<10&4294967295|O>>>22),O=M+(I^(V|~S))+x[14]+2878612391&4294967295,M=V+(O<<15&4294967295|O>>>17),O=S+(V^(M|~I))+x[5]+4237533241&4294967295,S=M+(O<<21&4294967295|O>>>11),O=I+(M^(S|~V))+x[12]+1700485571&4294967295,I=S+(O<<6&4294967295|O>>>26),O=V+(S^(I|~M))+x[3]+2399980690&4294967295,V=I+(O<<10&4294967295|O>>>22),O=M+(I^(V|~S))+x[10]+4293915773&4294967295,M=V+(O<<15&4294967295|O>>>17),O=S+(V^(M|~I))+x[1]+2240044497&4294967295,S=M+(O<<21&4294967295|O>>>11),O=I+(M^(S|~V))+x[8]+1873313359&4294967295,I=S+(O<<6&4294967295|O>>>26),O=V+(S^(I|~M))+x[15]+4264355552&4294967295,V=I+(O<<10&4294967295|O>>>22),O=M+(I^(V|~S))+x[6]+2734768916&4294967295,M=V+(O<<15&4294967295|O>>>17),O=S+(V^(M|~I))+x[13]+1309151649&4294967295,S=M+(O<<21&4294967295|O>>>11),O=I+(M^(S|~V))+x[4]+4149444226&4294967295,I=S+(O<<6&4294967295|O>>>26),O=V+(S^(I|~M))+x[11]+3174756917&4294967295,V=I+(O<<10&4294967295|O>>>22),O=M+(I^(V|~S))+x[2]+718787259&4294967295,M=V+(O<<15&4294967295|O>>>17),O=S+(V^(M|~I))+x[9]+3951481745&4294967295,C.g[0]=C.g[0]+I&4294967295,C.g[1]=C.g[1]+(M+(O<<21&4294967295|O>>>11))&4294967295,C.g[2]=C.g[2]+M&4294967295,C.g[3]=C.g[3]+V&4294967295}i.prototype.u=function(C,I){I===void 0&&(I=C.length);for(var S=I-this.blockSize,x=this.B,M=this.h,V=0;V<I;){if(M==0)for(;V<=S;)s(this,C,V),V+=this.blockSize;if(typeof C=="string"){for(;V<I;)if(x[M++]=C.charCodeAt(V++),M==this.blockSize){s(this,x),M=0;break}}else for(;V<I;)if(x[M++]=C[V++],M==this.blockSize){s(this,x),M=0;break}}this.h=M,this.o+=I},i.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var I=1;I<C.length-8;++I)C[I]=0;var S=8*this.o;for(I=C.length-8;I<C.length;++I)C[I]=S&255,S/=256;for(this.u(C),C=Array(16),I=S=0;4>I;++I)for(var x=0;32>x;x+=8)C[S++]=this.g[I]>>>x&255;return C};function o(C,I){var S=h;return Object.prototype.hasOwnProperty.call(S,C)?S[C]:S[C]=I(C)}function l(C,I){this.h=I;for(var S=[],x=!0,M=C.length-1;0<=M;M--){var V=C[M]|0;x&&V==I||(S[M]=V,x=!1)}this.g=S}var h={};function d(C){return-128<=C&&128>C?o(C,function(I){return new l([I|0],0>I?-1:0)}):new l([C|0],0>C?-1:0)}function m(C){if(isNaN(C)||!isFinite(C))return y;if(0>C)return U(m(-C));for(var I=[],S=1,x=0;C>=S;x++)I[x]=C/S|0,S*=4294967296;return new l(I,0)}function v(C,I){if(C.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(C.charAt(0)=="-")return U(v(C.substring(1),I));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=m(Math.pow(I,8)),x=y,M=0;M<C.length;M+=8){var V=Math.min(8,C.length-M),O=parseInt(C.substring(M,M+V),I);8>V?(V=m(Math.pow(I,V)),x=x.j(V).add(m(O))):(x=x.j(S),x=x.add(m(O)))}return x}var y=d(0),T=d(1),N=d(16777216);t=l.prototype,t.m=function(){if(b(this))return-U(this).m();for(var C=0,I=1,S=0;S<this.g.length;S++){var x=this.i(S);C+=(0<=x?x:4294967296+x)*I,I*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(D(this))return"0";if(b(this))return"-"+U(this).toString(C);for(var I=m(Math.pow(C,6)),S=this,x="";;){var M=W(S,I).g;S=A(S,M.j(I));var V=((0<S.g.length?S.g[0]:S.h)>>>0).toString(C);if(S=M,D(S))return V+x;for(;6>V.length;)V="0"+V;x=V+x}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function D(C){if(C.h!=0)return!1;for(var I=0;I<C.g.length;I++)if(C.g[I]!=0)return!1;return!0}function b(C){return C.h==-1}t.l=function(C){return C=A(this,C),b(C)?-1:D(C)?0:1};function U(C){for(var I=C.g.length,S=[],x=0;x<I;x++)S[x]=~C.g[x];return new l(S,~C.h).add(T)}t.abs=function(){return b(this)?U(this):this},t.add=function(C){for(var I=Math.max(this.g.length,C.g.length),S=[],x=0,M=0;M<=I;M++){var V=x+(this.i(M)&65535)+(C.i(M)&65535),O=(V>>>16)+(this.i(M)>>>16)+(C.i(M)>>>16);x=O>>>16,V&=65535,O&=65535,S[M]=O<<16|V}return new l(S,S[S.length-1]&-2147483648?-1:0)};function A(C,I){return C.add(U(I))}t.j=function(C){if(D(this)||D(C))return y;if(b(this))return b(C)?U(this).j(U(C)):U(U(this).j(C));if(b(C))return U(this.j(U(C)));if(0>this.l(N)&&0>C.l(N))return m(this.m()*C.m());for(var I=this.g.length+C.g.length,S=[],x=0;x<2*I;x++)S[x]=0;for(x=0;x<this.g.length;x++)for(var M=0;M<C.g.length;M++){var V=this.i(x)>>>16,O=this.i(x)&65535,Ye=C.i(M)>>>16,ti=C.i(M)&65535;S[2*x+2*M]+=O*ti,P(S,2*x+2*M),S[2*x+2*M+1]+=V*ti,P(S,2*x+2*M+1),S[2*x+2*M+1]+=O*Ye,P(S,2*x+2*M+1),S[2*x+2*M+2]+=V*Ye,P(S,2*x+2*M+2)}for(x=0;x<I;x++)S[x]=S[2*x+1]<<16|S[2*x];for(x=I;x<2*I;x++)S[x]=0;return new l(S,0)};function P(C,I){for(;(C[I]&65535)!=C[I];)C[I+1]+=C[I]>>>16,C[I]&=65535,I++}function k(C,I){this.g=C,this.h=I}function W(C,I){if(D(I))throw Error("division by zero");if(D(C))return new k(y,y);if(b(C))return I=W(U(C),I),new k(U(I.g),U(I.h));if(b(I))return I=W(C,U(I)),new k(U(I.g),I.h);if(30<C.g.length){if(b(C)||b(I))throw Error("slowDivide_ only works with positive integers.");for(var S=T,x=I;0>=x.l(C);)S=G(S),x=G(x);var M=X(S,1),V=X(x,1);for(x=X(x,2),S=X(S,2);!D(x);){var O=V.add(x);0>=O.l(C)&&(M=M.add(S),V=O),x=X(x,1),S=X(S,1)}return I=A(C,M.j(I)),new k(M,I)}for(M=y;0<=C.l(I);){for(S=Math.max(1,Math.floor(C.m()/I.m())),x=Math.ceil(Math.log(S)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),V=m(S),O=V.j(I);b(O)||0<O.l(C);)S-=x,V=m(S),O=V.j(I);D(V)&&(V=T),M=M.add(V),C=A(C,O)}return new k(M,C)}t.A=function(C){return W(this,C).h},t.and=function(C){for(var I=Math.max(this.g.length,C.g.length),S=[],x=0;x<I;x++)S[x]=this.i(x)&C.i(x);return new l(S,this.h&C.h)},t.or=function(C){for(var I=Math.max(this.g.length,C.g.length),S=[],x=0;x<I;x++)S[x]=this.i(x)|C.i(x);return new l(S,this.h|C.h)},t.xor=function(C){for(var I=Math.max(this.g.length,C.g.length),S=[],x=0;x<I;x++)S[x]=this.i(x)^C.i(x);return new l(S,this.h^C.h)};function G(C){for(var I=C.g.length+1,S=[],x=0;x<I;x++)S[x]=C.i(x)<<1|C.i(x-1)>>>31;return new l(S,C.h)}function X(C,I){var S=I>>5;I%=32;for(var x=C.g.length-S,M=[],V=0;V<x;V++)M[V]=0<I?C.i(V+S)>>>I|C.i(V+S+1)<<32-I:C.i(V+S);return new l(M,C.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,B0=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=m,l.fromString=v,Xr=l}).apply(typeof Sv<"u"?Sv:typeof self<"u"?self:typeof window<"u"?window:{});var uc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var j0,Za,W0,xc,rp,H0,$0,q0;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,_){return u==Array.prototype||u==Object.prototype||(u[p]=_.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof uc=="object"&&uc];for(var p=0;p<u.length;++p){var _=u[p];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=n(this);function s(u,p){if(p)e:{var _=i;u=u.split(".");for(var E=0;E<u.length-1;E++){var F=u[E];if(!(F in _))break e;_=_[F]}u=u[u.length-1],E=_[u],p=p(E),p!=E&&p!=null&&e(_,u,{configurable:!0,writable:!0,value:p})}}function o(u,p){u instanceof String&&(u+="");var _=0,E=!1,F={next:function(){if(!E&&_<u.length){var j=_++;return{value:p(j,u[j]),done:!1}}return E=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}s("Array.prototype.values",function(u){return u||function(){return o(this,function(p,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},h=this||self;function d(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function m(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function v(u,p,_){return u.call.apply(u.bind,arguments)}function y(u,p,_){if(!u)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,E),u.apply(p,F)}}return function(){return u.apply(p,arguments)}}function T(u,p,_){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:y,T.apply(null,arguments)}function N(u,p){var _=Array.prototype.slice.call(arguments,1);return function(){var E=_.slice();return E.push.apply(E,arguments),u.apply(this,E)}}function D(u,p){function _(){}_.prototype=p.prototype,u.aa=p.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(E,F,j){for(var J=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)J[Oe-2]=arguments[Oe];return p.prototype[F].apply(E,J)}}function b(u){const p=u.length;if(0<p){const _=Array(p);for(let E=0;E<p;E++)_[E]=u[E];return _}return[]}function U(u,p){for(let _=1;_<arguments.length;_++){const E=arguments[_];if(d(E)){const F=u.length||0,j=E.length||0;u.length=F+j;for(let J=0;J<j;J++)u[F+J]=E[J]}else u.push(E)}}class A{constructor(p,_){this.i=p,this.j=_,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function P(u){return/^[\s\xa0]*$/.test(u)}function k(){var u=h.navigator;return u&&(u=u.userAgent)?u:""}function W(u){return W[" "](u),u}W[" "]=function(){};var G=k().indexOf("Gecko")!=-1&&!(k().toLowerCase().indexOf("webkit")!=-1&&k().indexOf("Edge")==-1)&&!(k().indexOf("Trident")!=-1||k().indexOf("MSIE")!=-1)&&k().indexOf("Edge")==-1;function X(u,p,_){for(const E in u)p.call(_,u[E],E,u)}function C(u,p){for(const _ in u)p.call(void 0,u[_],_,u)}function I(u){const p={};for(const _ in u)p[_]=u[_];return p}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(u,p){let _,E;for(let F=1;F<arguments.length;F++){E=arguments[F];for(_ in E)u[_]=E[_];for(let j=0;j<S.length;j++)_=S[j],Object.prototype.hasOwnProperty.call(E,_)&&(u[_]=E[_])}}function M(u){var p=1;u=u.split(":");const _=[];for(;0<p&&u.length;)_.push(u.shift()),p--;return u.length&&_.push(u.join(":")),_}function V(u){h.setTimeout(()=>{throw u},0)}function O(){var u=ue;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class Ye{constructor(){this.h=this.g=null}add(p,_){const E=ti.get();E.set(p,_),this.h?this.h.next=E:this.g=E,this.h=E}}var ti=new A(()=>new ct,u=>u.reset());class ct{constructor(){this.next=this.g=this.h=null}set(p,_){this.h=p,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Ft,H=!1,ue=new Ye,Y=()=>{const u=h.Promise.resolve(void 0);Ft=()=>{u.then(he)}};var he=()=>{for(var u;u=O();){try{u.h.call(u.g)}catch(_){V(_)}var p=ti;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}H=!1};function ve(){this.s=this.s,this.C=this.C}ve.prototype.s=!1,ve.prototype.ma=function(){this.s||(this.s=!0,this.N())},ve.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ie(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}Ie.prototype.h=function(){this.defaultPrevented=!0};var Le=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};h.addEventListener("test",_,p),h.removeEventListener("test",_,p)}catch{}return u}();function ye(u,p){if(Ie.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,E=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(G){e:{try{W(p.nodeName);var F=!0;break e}catch{}F=!1}F||(p=null)}}else _=="mouseover"?p=u.fromElement:_=="mouseout"&&(p=u.toElement);this.relatedTarget=p,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:pe[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&ye.aa.h.call(this)}}D(ye,Ie);var pe={2:"touch",3:"pen",4:"mouse"};ye.prototype.h=function(){ye.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ht="closure_listenable_"+(1e6*Math.random()|0),zn=0;function uu(u,p,_,E,F){this.listener=u,this.proxy=null,this.src=p,this.type=_,this.capture=!!E,this.ha=F,this.key=++zn,this.da=this.fa=!1}function Mi(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Di(u){this.src=u,this.g={},this.h=0}Di.prototype.add=function(u,p,_,E,F){var j=u.toString();u=this.g[j],u||(u=this.g[j]=[],this.h++);var J=kr(u,p,E,F);return-1<J?(p=u[J],_||(p.fa=!1)):(p=new uu(p,this.src,j,!!E,F),p.fa=_,u.push(p)),p};function ni(u,p){var _=p.type;if(_ in u.g){var E=u.g[_],F=Array.prototype.indexOf.call(E,p,void 0),j;(j=0<=F)&&Array.prototype.splice.call(E,F,1),j&&(Mi(p),u.g[_].length==0&&(delete u.g[_],u.h--))}}function kr(u,p,_,E){for(var F=0;F<u.length;++F){var j=u[F];if(!j.da&&j.listener==p&&j.capture==!!_&&j.ha==E)return F}return-1}var Go="closure_lm_"+(1e6*Math.random()|0),vs={};function Qo(u,p,_,E,F){if(Array.isArray(p)){for(var j=0;j<p.length;j++)Qo(u,p[j],_,E,F);return null}return _=du(_),u&&u[ht]?u.K(p,_,m(E)?!!E.capture:!1,F):Yo(u,p,_,!1,E,F)}function Yo(u,p,_,E,F,j){if(!p)throw Error("Invalid event type");var J=m(F)?!!F.capture:!!F,Oe=Ts(u);if(Oe||(u[Go]=Oe=new Di(u)),_=Oe.add(p,_,E,J,j),_.proxy)return _;if(E=ys(),_.proxy=E,E.src=u,E.listener=_,u.addEventListener)Le||(F=J),F===void 0&&(F=!1),u.addEventListener(p.toString(),E,F);else if(u.attachEvent)u.attachEvent(Es(p.toString()),E);else if(u.addListener&&u.removeListener)u.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return _}function ys(){function u(_){return p.call(u.src,u.listener,_)}const p=hu;return u}function cu(u,p,_,E,F){if(Array.isArray(p))for(var j=0;j<p.length;j++)cu(u,p[j],_,E,F);else E=m(E)?!!E.capture:!!E,_=du(_),u&&u[ht]?(u=u.i,p=String(p).toString(),p in u.g&&(j=u.g[p],_=kr(j,_,E,F),-1<_&&(Mi(j[_]),Array.prototype.splice.call(j,_,1),j.length==0&&(delete u.g[p],u.h--)))):u&&(u=Ts(u))&&(p=u.g[p.toString()],u=-1,p&&(u=kr(p,_,E,F)),(_=-1<u?p[u]:null)&&ws(_))}function ws(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[ht])ni(p.i,u);else{var _=u.type,E=u.proxy;p.removeEventListener?p.removeEventListener(_,E,u.capture):p.detachEvent?p.detachEvent(Es(_),E):p.addListener&&p.removeListener&&p.removeListener(E),(_=Ts(p))?(ni(_,u),_.h==0&&(_.src=null,p[Go]=null)):Mi(u)}}}function Es(u){return u in vs?vs[u]:vs[u]="on"+u}function hu(u,p){if(u.da)u=!0;else{p=new ye(p,this);var _=u.listener,E=u.ha||u.src;u.fa&&ws(u),u=_.call(E,p)}return u}function Ts(u){return u=u[Go],u instanceof Di?u:null}var Xo="__closure_events_fn_"+(1e9*Math.random()>>>0);function du(u){return typeof u=="function"?u:(u[Xo]||(u[Xo]=function(p){return u.handleEvent(p)}),u[Xo])}function it(){ve.call(this),this.i=new Di(this),this.M=this,this.F=null}D(it,ve),it.prototype[ht]=!0,it.prototype.removeEventListener=function(u,p,_,E){cu(this,u,p,_,E)};function mt(u,p){var _,E=u.F;if(E)for(_=[];E;E=E.F)_.push(E);if(u=u.M,E=p.type||p,typeof p=="string")p=new Ie(p,u);else if(p instanceof Ie)p.target=p.target||u;else{var F=p;p=new Ie(E,u),x(p,F)}if(F=!0,_)for(var j=_.length-1;0<=j;j--){var J=p.g=_[j];F=xr(J,E,!0,p)&&F}if(J=p.g=u,F=xr(J,E,!0,p)&&F,F=xr(J,E,!1,p)&&F,_)for(j=0;j<_.length;j++)J=p.g=_[j],F=xr(J,E,!1,p)&&F}it.prototype.N=function(){if(it.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var _=u.g[p],E=0;E<_.length;E++)Mi(_[E]);delete u.g[p],u.h--}}this.F=null},it.prototype.K=function(u,p,_,E){return this.i.add(String(u),p,!1,_,E)},it.prototype.L=function(u,p,_,E){return this.i.add(String(u),p,!0,_,E)};function xr(u,p,_,E){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var F=!0,j=0;j<p.length;++j){var J=p[j];if(J&&!J.da&&J.capture==_){var Oe=J.listener,rt=J.ha||J.src;J.fa&&ni(u.i,J),F=Oe.call(rt,E)!==!1&&F}}return F&&!E.defaultPrevented}function fu(u,p,_){if(typeof u=="function")_&&(u=T(u,_));else if(u&&typeof u.handleEvent=="function")u=T(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:h.setTimeout(u,p||0)}function Jo(u){u.g=fu(()=>{u.g=null,u.i&&(u.i=!1,Jo(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class pu extends ve{constructor(p,_){super(),this.m=p,this.l=_,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Jo(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Lr(u){ve.call(this),this.h=u,this.g={}}D(Lr,ve);var ea=[];function Is(u){X(u.g,function(p,_){this.g.hasOwnProperty(_)&&ws(p)},u),u.g={}}Lr.prototype.N=function(){Lr.aa.N.call(this),Is(this)},Lr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ps=h.JSON.stringify,sd=h.JSON.parse,Or=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function ta(){}ta.prototype.h=null;function mu(u){return u.h||(u.h=u.i())}function na(){}var bi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ss(){Ie.call(this,"d")}D(Ss,Ie);function ia(){Ie.call(this,"c")}D(ia,Ie);var ii={},gu=null;function As(){return gu=gu||new it}ii.La="serverreachability";function _u(u){Ie.call(this,ii.La,u)}D(_u,Ie);function Nr(u){const p=As();mt(p,new _u(p))}ii.STAT_EVENT="statevent";function Cs(u,p){Ie.call(this,ii.STAT_EVENT,u),this.stat=p}D(Cs,Ie);function Et(u){const p=As();mt(p,new Cs(p,u))}ii.Ma="timingevent";function vu(u,p){Ie.call(this,ii.Ma,u),this.size=p}D(vu,Ie);function Mr(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},p)}function Dr(){this.g=!0}Dr.prototype.xa=function(){this.g=!1};function un(u,p,_,E,F,j){u.info(function(){if(u.g)if(j)for(var J="",Oe=j.split("&"),rt=0;rt<Oe.length;rt++){var Ce=Oe[rt].split("=");if(1<Ce.length){var be=Ce[0];Ce=Ce[1];var qe=be.split("_");J=2<=qe.length&&qe[1]=="type"?J+(be+"="+Ce+"&"):J+(be+"=redacted&")}}else J=null;else J=j;return"XMLHTTP REQ ("+E+") [attempt "+F+"]: "+p+`
`+_+`
`+J})}function se(u,p,_,E,F,j,J){u.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+F+"]: "+p+`
`+_+`
`+j+" "+J})}function ri(u,p,_,E){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+wu(u,_)+(E?" "+E:"")})}function yu(u,p){u.info(function(){return"TIMEOUT: "+p})}Dr.prototype.info=function(){};function wu(u,p){if(!u.g)return p;if(!p)return null;try{var _=JSON.parse(p);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var E=_[u];if(!(2>E.length)){var F=E[1];if(Array.isArray(F)&&!(1>F.length)){var j=F[0];if(j!="noop"&&j!="stop"&&j!="close")for(var J=1;J<F.length;J++)F[J]=""}}}}return Ps(_)}catch{return p}}var br={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Rs={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ks;function Pn(){}D(Pn,ta),Pn.prototype.g=function(){return new XMLHttpRequest},Pn.prototype.i=function(){return{}},ks=new Pn;function Sn(u,p,_,E){this.j=u,this.i=p,this.l=_,this.R=E||1,this.U=new Lr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Eu}function Eu(){this.i=null,this.g="",this.h=!1}var Tu={},ra={};function sa(u,p,_){u.L=1,u.v=hn(Xe(p)),u.m=_,u.P=!0,oa(u,null)}function oa(u,p){u.F=Date.now(),Ls(u),u.A=Xe(u.v);var _=u.A,E=u.R;Array.isArray(E)||(E=[String(E)]),Su(_.i,"t",E),u.C=0,_=u.j.J,u.h=new Eu,u.g=Ou(u.j,_?p:null,!u.m),0<u.O&&(u.M=new pu(T(u.Y,u,u.g),u.O)),p=u.U,_=u.g,E=u.ca;var F="readystatechange";Array.isArray(F)||(F&&(ea[0]=F.toString()),F=ea);for(var j=0;j<F.length;j++){var J=Qo(_,F[j],E||p.handleEvent,!1,p.h||p);if(!J)break;p.g[J.key]=J}p=u.H?I(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),Nr(),un(u.i,u.u,u.A,u.l,u.R,u.m)}Sn.prototype.ca=function(u){u=u.target;const p=this.M;p&&zt(u)==3?p.j():this.Y(u)},Sn.prototype.Y=function(u){try{if(u==this.g)e:{const qe=zt(this.g);var p=this.g.Ba();const Wi=this.g.Z();if(!(3>qe)&&(qe!=3||this.g&&(this.h.h||this.g.oa()||Ta(this.g)))){this.J||qe!=4||p==7||(p==8||0>=Wi?Nr(3):Nr(2)),aa(this);var _=this.g.Z();this.X=_;t:if(Iu(this)){var E=Ta(this.g);u="";var F=E.length,j=zt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){si(this),Vr(this);var J="";break t}this.h.i=new h.TextDecoder}for(p=0;p<F;p++)this.h.h=!0,u+=this.h.i.decode(E[p],{stream:!(j&&p==F-1)});E.length=0,this.h.g+=u,this.C=0,J=this.h.g}else J=this.g.oa();if(this.o=_==200,se(this.i,this.u,this.A,this.l,this.R,qe,_),this.o){if(this.T&&!this.K){t:{if(this.g){var Oe,rt=this.g;if((Oe=rt.g?rt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(Oe)){var Ce=Oe;break t}}Ce=null}if(_=Ce)ri(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Fr(this,_);else{this.o=!1,this.s=3,Et(12),si(this),Vr(this);break e}}if(this.P){_=!0;let et;for(;!this.J&&this.C<J.length;)if(et=xs(this,J),et==ra){qe==4&&(this.s=4,Et(14),_=!1),ri(this.i,this.l,null,"[Incomplete Response]");break}else if(et==Tu){this.s=4,Et(15),ri(this.i,this.l,J,"[Invalid Chunk]"),_=!1;break}else ri(this.i,this.l,et,null),Fr(this,et);if(Iu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),qe!=4||J.length!=0||this.h.h||(this.s=1,Et(16),_=!1),this.o=this.o&&_,!_)ri(this.i,this.l,J,"[Invalid Chunked Response]"),si(this),Vr(this);else if(0<J.length&&!this.W){this.W=!0;var be=this.j;be.g==this&&be.ba&&!be.M&&(be.j.info("Great, no buffering proxy detected. Bytes received: "+J.length),Us(be),be.M=!0,Et(11))}}else ri(this.i,this.l,J,null),Fr(this,J);qe==4&&si(this),this.o&&!this.J&&(qe==4?Pa(this.j,this):(this.o=!1,Ls(this)))}else od(this.g),_==400&&0<J.indexOf("Unknown SID")?(this.s=3,Et(12)):(this.s=0,Et(13)),si(this),Vr(this)}}}catch{}finally{}};function Iu(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function xs(u,p){var _=u.C,E=p.indexOf(`
`,_);return E==-1?ra:(_=Number(p.substring(_,E)),isNaN(_)?Tu:(E+=1,E+_>p.length?ra:(p=p.slice(E,E+_),u.C=E+_,p)))}Sn.prototype.cancel=function(){this.J=!0,si(this)};function Ls(u){u.S=Date.now()+u.I,Pu(u,u.I)}function Pu(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Mr(T(u.ba,u),p)}function aa(u){u.B&&(h.clearTimeout(u.B),u.B=null)}Sn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(yu(this.i,this.A),this.L!=2&&(Nr(),Et(17)),si(this),this.s=2,Vr(this)):Pu(this,this.S-u)};function Vr(u){u.j.G==0||u.J||Pa(u.j,u)}function si(u){aa(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,Is(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function Fr(u,p){try{var _=u.j;if(_.G!=0&&(_.g==u||Pe(_.h,u))){if(!u.K&&Pe(_.h,u)&&_.G==3){try{var E=_.Da.g.parse(p)}catch{E=null}if(Array.isArray(E)&&E.length==3){var F=E;if(F[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)js(_),Fs(_);else break e;zs(_),Et(18)}}else _.za=F[1],0<_.za-_.T&&37500>F[2]&&_.F&&_.v==0&&!_.C&&(_.C=Mr(T(_.Za,_),6e3));if(1>=Vi(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else ci(_,11)}else if((u.K||_.g==u)&&js(_),!P(p))for(F=_.Da.g.parse(p),p=0;p<F.length;p++){let Ce=F[p];if(_.T=Ce[0],Ce=Ce[1],_.G==2)if(Ce[0]=="c"){_.K=Ce[1],_.ia=Ce[2];const be=Ce[3];be!=null&&(_.la=be,_.j.info("VER="+_.la));const qe=Ce[4];qe!=null&&(_.Aa=qe,_.j.info("SVER="+_.Aa));const Wi=Ce[5];Wi!=null&&typeof Wi=="number"&&0<Wi&&(E=1.5*Wi,_.L=E,_.j.info("backChannelRequestTimeoutMs_="+E)),E=_;const et=u.g;if(et){const Hs=et.g?et.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Hs){var j=E.h;j.g||Hs.indexOf("spdy")==-1&&Hs.indexOf("quic")==-1&&Hs.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(Ve(j,j.h),j.h=null))}if(E.D){const jn=et.g?et.g.getResponseHeader("X-HTTP-Session-Id"):null;jn&&(E.ya=jn,de(E.I,E.D,jn))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),E=_;var J=u;if(E.qa=Ws(E,E.J?E.ia:null,E.W),J.K){Ur(E.h,J);var Oe=J,rt=E.L;rt&&(Oe.I=rt),Oe.B&&(aa(Oe),Ls(Oe)),E.g=J}else Rn(E);0<_.i.length&&ji(_)}else Ce[0]!="stop"&&Ce[0]!="close"||ci(_,7);else _.G==3&&(Ce[0]=="stop"||Ce[0]=="close"?Ce[0]=="stop"?ci(_,7):Vs(_):Ce[0]!="noop"&&_.l&&_.l.ta(Ce),_.v=0)}}Nr(4)}catch{}}var zr=class{constructor(u,p){this.g=u,this.map=p}};function la(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ua(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Vi(u){return u.h?1:u.g?u.g.size:0}function Pe(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function Ve(u,p){u.g?u.g.add(p):u.h=p}function Ur(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}la.prototype.cancel=function(){if(this.i=oi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function oi(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const _ of u.g.values())p=p.concat(_.D);return p}return b(u.i)}function Fi(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(d(u)){for(var p=[],_=u.length,E=0;E<_;E++)p.push(u[E]);return p}p=[],_=0;for(E in u)p[_++]=u[E];return p}function ca(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(d(u)||typeof u=="string"){var p=[];u=u.length;for(var _=0;_<u;_++)p.push(_);return p}p=[],_=0;for(const E in u)p[_++]=E;return p}}}function _e(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(d(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var _=ca(u),E=Fi(u),F=E.length,j=0;j<F;j++)p.call(void 0,E[j],_&&_[j],u)}var je=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ha(u,p){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var E=u[_].indexOf("="),F=null;if(0<=E){var j=u[_].substring(0,E);F=u[_].substring(E+1)}else j=u[_];p(j,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function cn(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof cn){this.h=u.h,Os(this,u.j),this.o=u.o,this.g=u.g,ai(this,u.s),this.l=u.l;var p=u.i,_=new li;_.i=p.i,p.g&&(_.g=new Map(p.g),_.h=p.h),Un(this,_),this.m=u.m}else u&&(p=String(u).match(je))?(this.h=!1,Os(this,p[1]||"",!0),this.o=An(p[2]||""),this.g=An(p[3]||"",!0),ai(this,p[4]),this.l=An(p[5]||"",!0),Un(this,p[6]||"",!0),this.m=An(p[7]||"")):(this.h=!1,this.i=new li(null,this.h))}cn.prototype.toString=function(){var u=[],p=this.j;p&&u.push(Cn(p,zi,!0),":");var _=this.g;return(_||p=="file")&&(u.push("//"),(p=this.o)&&u.push(Cn(p,zi,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(Cn(_,_.charAt(0)=="/"?pa:fa,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",Cn(_,ma)),u.join("")};function Xe(u){return new cn(u)}function Os(u,p,_){u.j=_?An(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function ai(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function Un(u,p,_){p instanceof li?(u.i=p,dn(u.i,u.h)):(_||(p=Cn(p,Ns)),u.i=new li(p,u.h))}function de(u,p,_){u.i.set(p,_)}function hn(u){return de(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function An(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Cn(u,p,_){return typeof u=="string"?(u=encodeURI(u).replace(p,da),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function da(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var zi=/[#\/\?@]/g,fa=/[#\?:]/g,pa=/[#\?]/g,Ns=/[#\?@]/g,ma=/#/g;function li(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function Xt(u){u.g||(u.g=new Map,u.h=0,u.i&&ha(u.i,function(p,_){u.add(decodeURIComponent(p.replace(/\+/g," ")),_)}))}t=li.prototype,t.add=function(u,p){Xt(this),this.i=null,u=ae(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(p),this.h+=1,this};function ga(u,p){Xt(u),p=ae(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function Ms(u,p){return Xt(u),p=ae(u,p),u.g.has(p)}t.forEach=function(u,p){Xt(this),this.g.forEach(function(_,E){_.forEach(function(F){u.call(p,F,E,this)},this)},this)},t.na=function(){Xt(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),_=[];for(let E=0;E<p.length;E++){const F=u[E];for(let j=0;j<F.length;j++)_.push(p[E])}return _},t.V=function(u){Xt(this);let p=[];if(typeof u=="string")Ms(this,u)&&(p=p.concat(this.g.get(ae(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)p=p.concat(u[_])}return p},t.set=function(u,p){return Xt(this),this.i=null,u=ae(this,u),Ms(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},t.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function Su(u,p,_){ga(u,p),0<_.length&&(u.i=null,u.g.set(ae(u,p),b(_)),u.h+=_.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var _=0;_<p.length;_++){var E=p[_];const j=encodeURIComponent(String(E)),J=this.V(E);for(E=0;E<J.length;E++){var F=j;J[E]!==""&&(F+="="+encodeURIComponent(String(J[E]))),u.push(F)}}return this.i=u.join("&")};function ae(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function dn(u,p){p&&!u.j&&(Xt(u),u.i=null,u.g.forEach(function(_,E){var F=E.toLowerCase();E!=F&&(ga(this,E),Su(this,F,_))},u)),u.j=p}function De(u,p){const _=new Dr;if(h.Image){const E=new Image;E.onload=N(fn,_,"TestLoadImage: loaded",!0,p,E),E.onerror=N(fn,_,"TestLoadImage: error",!1,p,E),E.onabort=N(fn,_,"TestLoadImage: abort",!1,p,E),E.ontimeout=N(fn,_,"TestLoadImage: timeout",!1,p,E),h.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=u}else p(!1)}function Au(u,p){const _=new Dr,E=new AbortController,F=setTimeout(()=>{E.abort(),fn(_,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:E.signal}).then(j=>{clearTimeout(F),j.ok?fn(_,"TestPingServer: ok",!0,p):fn(_,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(F),fn(_,"TestPingServer: error",!1,p)})}function fn(u,p,_,E,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),E(_)}catch{}}function _a(){this.g=new Or}function va(u,p,_){const E=_||"";try{_e(u,function(F,j){let J=F;m(F)&&(J=Ps(F)),p.push(E+j+"="+encodeURIComponent(J))})}catch(F){throw p.push(E+"type="+encodeURIComponent("_badmap")),F}}function pn(u){this.l=u.Ub||null,this.j=u.eb||!1}D(pn,ta),pn.prototype.g=function(){return new Ui(this.l,this.j)},pn.prototype.i=function(u){return function(){return u}}({});function Ui(u,p){it.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(Ui,it),t=Ui.prototype,t.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,Jt(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||h).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,$e(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Jt(this)),this.g&&(this.readyState=3,Jt(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Bi(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Bi(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?$e(this):Jt(this),this.readyState==3&&Bi(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,$e(this))},t.Qa=function(u){this.g&&(this.response=u,$e(this))},t.ga=function(){this.g&&$e(this)};function $e(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Jt(u)}t.setRequestHeader=function(u,p){this.u.append(u,p)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var _=p.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=p.next();return u.join(`\r
`)};function Jt(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ui.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function ya(u){let p="";return X(u,function(_,E){p+=E,p+=":",p+=_,p+=`\r
`}),p}function Ds(u,p,_){e:{for(E in _){var E=!1;break e}E=!0}E||(_=ya(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):de(u,p,_))}function We(u){it.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(We,it);var Cu=/^https?$/i,wa=["POST","PUT"];t=We.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,p,_,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ks.g(),this.v=this.o?mu(this.o):mu(ks),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(j){Ru(this,j);return}if(u=_||"",_=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var F in E)_.set(F,E[F]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const j of E.keys())_.set(j,E.get(j));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(_.keys()).find(j=>j.toLowerCase()=="content-type"),F=h.FormData&&u instanceof h.FormData,!(0<=Array.prototype.indexOf.call(wa,p,void 0))||E||F||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,J]of _)this.g.setRequestHeader(j,J);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$t(this),this.u=!0,this.g.send(u),this.u=!1}catch(j){Ru(this,j)}};function Ru(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,Ea(u),bs(u)}function Ea(u){u.A||(u.A=!0,mt(u,"complete"),mt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,mt(this,"complete"),mt(this,"abort"),bs(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),bs(this,!0)),We.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ee(this):this.bb())},t.bb=function(){Ee(this)};function Ee(u){if(u.h&&typeof l<"u"&&(!u.v[1]||zt(u)!=4||u.Z()!=2)){if(u.u&&zt(u)==4)fu(u.Ea,0,u);else if(mt(u,"readystatechange"),zt(u)==4){u.h=!1;try{const J=u.Z();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var _;if(!(_=p)){var E;if(E=J===0){var F=String(u.D).match(je)[1]||null;!F&&h.self&&h.self.location&&(F=h.self.location.protocol.slice(0,-1)),E=!Cu.test(F?F.toLowerCase():"")}_=E}if(_)mt(u,"complete"),mt(u,"success");else{u.m=6;try{var j=2<zt(u)?u.g.statusText:""}catch{j=""}u.l=j+" ["+u.Z()+"]",Ea(u)}}finally{bs(u)}}}}function bs(u,p){if(u.g){$t(u);const _=u.g,E=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||mt(u,"ready");try{_.onreadystatechange=E}catch{}}}function $t(u){u.I&&(h.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function zt(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<zt(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),sd(p)}};function Ta(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function od(u){const p={};u=(u.g&&2<=zt(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<u.length;E++){if(P(u[E]))continue;var _=M(u[E]);const F=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const j=p[F]||[];p[F]=j,j.push(_)}C(p,function(E){return E.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ui(u,p,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||p}function ku(u){this.Aa=0,this.i=[],this.j=new Dr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ui("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ui("baseRetryDelayMs",5e3,u),this.cb=ui("retryDelaySeedMs",1e4,u),this.Wa=ui("forwardChannelMaxRetries",2,u),this.wa=ui("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new la(u&&u.concurrentRequestLimit),this.Da=new _a,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ku.prototype,t.la=8,t.G=1,t.connect=function(u,p,_,E){Et(0),this.W=u,this.H=p||{},_&&E!==void 0&&(this.H.OSID=_,this.H.OAID=E),this.F=this.X,this.I=Ws(this,null,this.W),ji(this)};function Vs(u){if(xu(u),u.G==3){var p=u.U++,_=Xe(u.I);if(de(_,"SID",u.K),de(_,"RID",p),de(_,"TYPE","terminate"),Br(u,_),p=new Sn(u,u.j,p),p.L=2,p.v=hn(Xe(_)),_=!1,h.navigator&&h.navigator.sendBeacon)try{_=h.navigator.sendBeacon(p.v.toString(),"")}catch{}!_&&h.Image&&(new Image().src=p.v,_=!0),_||(p.g=Ou(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Ls(p)}Lu(u)}function Fs(u){u.g&&(Us(u),u.g.cancel(),u.g=null)}function xu(u){Fs(u),u.u&&(h.clearTimeout(u.u),u.u=null),js(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&h.clearTimeout(u.s),u.s=null)}function ji(u){if(!ua(u.h)&&!u.s){u.s=!0;var p=u.Ga;Ft||Y(),H||(Ft(),H=!0),ue.add(p,u),u.B=0}}function ad(u,p){return Vi(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Mr(T(u.Ga,u,p),Sa(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const F=new Sn(this,this.j,u);let j=this.o;if(this.S&&(j?(j=I(j),x(j,this.S)):j=this.S),this.m!==null||this.O||(F.H=j,j=null),this.P)e:{for(var p=0,_=0;_<this.i.length;_++){t:{var E=this.i[_];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(p+=E,4096<p){p=_;break e}if(p===4096||_===this.i.length-1){p=_+1;break e}}p=1e3}else p=1e3;p=Ia(this,F,p),_=Xe(this.I),de(_,"RID",u),de(_,"CVER",22),this.D&&de(_,"X-HTTP-Session-Id",this.D),Br(this,_),j&&(this.O?p="headers="+encodeURIComponent(String(ya(j)))+"&"+p:this.m&&Ds(_,this.m,j)),Ve(this.h,F),this.Ua&&de(_,"TYPE","init"),this.P?(de(_,"$req",p),de(_,"SID","null"),F.T=!0,sa(F,_,null)):sa(F,_,p),this.G=2}}else this.G==3&&(u?en(this,u):this.i.length==0||ua(this.h)||en(this))};function en(u,p){var _;p?_=p.l:_=u.U++;const E=Xe(u.I);de(E,"SID",u.K),de(E,"RID",_),de(E,"AID",u.T),Br(u,E),u.m&&u.o&&Ds(E,u.m,u.o),_=new Sn(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),p&&(u.i=p.D.concat(u.i)),p=Ia(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Ve(u.h,_),sa(_,E,p)}function Br(u,p){u.H&&X(u.H,function(_,E){de(p,E,_)}),u.l&&_e({},function(_,E){de(p,E,_)})}function Ia(u,p,_){_=Math.min(u.i.length,_);var E=u.l?T(u.l.Na,u.l,u):null;e:{var F=u.i;let j=-1;for(;;){const J=["count="+_];j==-1?0<_?(j=F[0].g,J.push("ofs="+j)):j=0:J.push("ofs="+j);let Oe=!0;for(let rt=0;rt<_;rt++){let Ce=F[rt].g;const be=F[rt].map;if(Ce-=j,0>Ce)j=Math.max(0,F[rt].g-100),Oe=!1;else try{va(be,J,"req"+Ce+"_")}catch{E&&E(be)}}if(Oe){E=J.join("&");break e}}}return u=u.i.splice(0,_),p.D=u,E}function Rn(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;Ft||Y(),H||(Ft(),H=!0),ue.add(p,u),u.v=0}}function zs(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Mr(T(u.Fa,u),Sa(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,Bs(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Mr(T(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Et(10),Fs(this),Bs(this))};function Us(u){u.A!=null&&(h.clearTimeout(u.A),u.A=null)}function Bs(u){u.g=new Sn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=Xe(u.qa);de(p,"RID","rpc"),de(p,"SID",u.K),de(p,"AID",u.T),de(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&de(p,"TO",u.ja),de(p,"TYPE","xmlhttp"),Br(u,p),u.m&&u.o&&Ds(p,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=hn(Xe(p)),_.m=null,_.P=!0,oa(_,u)}t.Za=function(){this.C!=null&&(this.C=null,Fs(this),zs(this),Et(19))};function js(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function Pa(u,p){var _=null;if(u.g==p){js(u),Us(u),u.g=null;var E=2}else if(Pe(u.h,p))_=p.D,Ur(u.h,p),E=1;else return;if(u.G!=0){if(p.o)if(E==1){_=p.m?p.m.length:0,p=Date.now()-p.F;var F=u.B;E=As(),mt(E,new vu(E,_)),ji(u)}else Rn(u);else if(F=p.s,F==3||F==0&&0<p.X||!(E==1&&ad(u,p)||E==2&&zs(u)))switch(_&&0<_.length&&(p=u.h,p.i=p.i.concat(_)),F){case 1:ci(u,5);break;case 4:ci(u,10);break;case 3:ci(u,6);break;default:ci(u,2)}}}function Sa(u,p){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*p}function ci(u,p){if(u.j.info("Error code "+p),p==2){var _=T(u.fb,u),E=u.Xa;const F=!E;E=new cn(E||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Os(E,"https"),hn(E),F?De(E.toString(),_):Au(E.toString(),_)}else Et(2);u.G=0,u.l&&u.l.sa(p),Lu(u),xu(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Et(2)):(this.j.info("Failed to ping google.com"),Et(1))};function Lu(u){if(u.G=0,u.ka=[],u.l){const p=oi(u.h);(p.length!=0||u.i.length!=0)&&(U(u.ka,p),U(u.ka,u.i),u.h.i.length=0,b(u.i),u.i.length=0),u.l.ra()}}function Ws(u,p,_){var E=_ instanceof cn?Xe(_):new cn(_);if(E.g!="")p&&(E.g=p+"."+E.g),ai(E,E.s);else{var F=h.location;E=F.protocol,p=p?p+"."+F.hostname:F.hostname,F=+F.port;var j=new cn(null);E&&Os(j,E),p&&(j.g=p),F&&ai(j,F),_&&(j.l=_),E=j}return _=u.D,p=u.ya,_&&p&&de(E,_,p),de(E,"VER",u.la),Br(u,E),E}function Ou(u,p,_){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new We(new pn({eb:_})):new We(u.pa),p.Ha(u.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Aa(){}t=Aa.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function jr(){}jr.prototype.g=function(u,p){return new gt(u,p)};function gt(u,p){it.call(this),this.g=new ku(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!P(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!P(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new mn(this)}D(gt,it),gt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gt.prototype.close=function(){Vs(this.g)},gt.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=Ps(u),u=_);p.i.push(new zr(p.Ya++,u)),p.G==3&&ji(p)},gt.prototype.N=function(){this.g.l=null,delete this.j,Vs(this.g),delete this.g,gt.aa.N.call(this)};function Bn(u){Ss.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const _ in p){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}D(Bn,Ss);function Nu(){ia.call(this),this.status=1}D(Nu,ia);function mn(u){this.g=u}D(mn,Aa),mn.prototype.ua=function(){mt(this.g,"a")},mn.prototype.ta=function(u){mt(this.g,new Bn(u))},mn.prototype.sa=function(u){mt(this.g,new Nu)},mn.prototype.ra=function(){mt(this.g,"b")},jr.prototype.createWebChannel=jr.prototype.g,gt.prototype.send=gt.prototype.o,gt.prototype.open=gt.prototype.m,gt.prototype.close=gt.prototype.close,q0=function(){return new jr},$0=function(){return As()},H0=ii,rp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},br.NO_ERROR=0,br.TIMEOUT=8,br.HTTP_ERROR=6,xc=br,Rs.COMPLETE="complete",W0=Rs,na.EventType=bi,bi.OPEN="a",bi.CLOSE="b",bi.ERROR="c",bi.MESSAGE="d",it.prototype.listen=it.prototype.K,Za=na,We.prototype.listenOnce=We.prototype.L,We.prototype.getLastError=We.prototype.Ka,We.prototype.getLastErrorCode=We.prototype.Ba,We.prototype.getStatus=We.prototype.Z,We.prototype.getResponseJson=We.prototype.Oa,We.prototype.getResponseText=We.prototype.oa,We.prototype.send=We.prototype.ea,We.prototype.setWithCredentials=We.prototype.Ha,j0=We}).apply(typeof uc<"u"?uc:typeof self<"u"?self:typeof window<"u"?window:{});const Av="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ot.UNAUTHENTICATED=new Ot(null),Ot.GOOGLE_CREDENTIALS=new Ot("google-credentials-uid"),Ot.FIRST_PARTY=new Ot("first-party-uid"),Ot.MOCK_USER=new Ot("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ho="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ls=new wm("@firebase/firestore");function za(){return ls.logLevel}function ie(t,...e){if(ls.logLevel<=Ae.DEBUG){const n=e.map(Om);ls.debug(`Firestore (${Ho}): ${t}`,...n)}}function xi(t,...e){if(ls.logLevel<=Ae.ERROR){const n=e.map(Om);ls.error(`Firestore (${Ho}): ${t}`,...n)}}function Lo(t,...e){if(ls.logLevel<=Ae.WARN){const n=e.map(Om);ls.warn(`Firestore (${Ho}): ${t}`,...n)}}function Om(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fe(t="Unexpected state"){const e=`FIRESTORE (${Ho}) INTERNAL ASSERTION FAILED: `+t;throw xi(e),new Error(e)}function Me(t,e){t||fe()}function ge(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ne extends Ni{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class kx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ot.UNAUTHENTICATED))}shutdown(){}}class xx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Lx{constructor(e){this.t=e,this.currentUser=Ot.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Me(this.o===void 0);let i=this.i;const s=d=>this.i!==i?(i=this.i,n(d)):Promise.resolve();let o=new Jr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Jr,e.enqueueRetryable(()=>s(this.currentUser))};const l=()=>{const d=o;e.enqueueRetryable(async()=>{await d.promise,await s(this.currentUser)})},h=d=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(d=>h(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?h(d):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Jr)}},0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Me(typeof i.accessToken=="string"),new Z0(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Me(e===null||typeof e=="string"),new Ot(e)}}class Ox{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=Ot.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Nx{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new Ox(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ot.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Mx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Dx{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Me(this.o===void 0);const i=o=>{o.error!=null&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.R;return this.R=o.token,ie("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const s=o=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?s(o):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Me(typeof n.token=="string"),this.R=n.token,new Mx(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bx(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const s=bx(40);for(let o=0;o<s.length;++o)i.length<20&&s[o]<n&&(i+=e.charAt(s[o]%e.length))}return i}}function xe(t,e){return t<e?-1:t>e?1:0}function Oo(t,e,n){return t.length===e.length&&t.every((i,s)=>n(i,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ne(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ne(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ne(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ne(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return pt.fromMillis(Date.now())}static fromDate(e){return pt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new pt(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?xe(this.nanoseconds,e.nanoseconds):xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.timestamp=e}static fromTimestamp(e){return new me(e)}static min(){return new me(new pt(0,0))}static max(){return new me(new pt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e,n,i){n===void 0?n=0:n>e.length&&fe(),i===void 0?i=e.length-n:i>e.length-n&&fe(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Dl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Dl?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let s=0;s<i;s++){const o=e.get(s),l=n.get(s);if(o<l)return-1;if(o>l)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ue extends Dl{construct(e,n,i){return new Ue(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new ne(q.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(s=>s.length>0))}return new Ue(n)}static emptyPath(){return new Ue([])}}const Vx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pt extends Dl{construct(e,n,i){return new Pt(e,n,i)}static isValidIdentifier(e){return Vx.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Pt(["__name__"])}static fromServerFormat(e){const n=[];let i="",s=0;const o=()=>{if(i.length===0)throw new ne(q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let l=!1;for(;s<e.length;){const h=e[s];if(h==="\\"){if(s+1===e.length)throw new ne(q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ne(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=d,s+=2}else h==="`"?(l=!l,s++):h!=="."||l?(i+=h,s++):(o(),s++)}if(o(),l)throw new ne(q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pt(n)}static emptyPath(){return new Pt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.path=e}static fromPath(e){return new oe(Ue.fromString(e))}static fromName(e){return new oe(Ue.fromString(e).popFirst(5))}static empty(){return new oe(Ue.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ue.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ue.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new oe(new Ue(e.slice()))}}function Fx(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,s=me.fromTimestamp(i===1e9?new pt(n+1,0):new pt(n,i));return new wr(s,oe.empty(),e)}function zx(t){return new wr(t.readTime,t.key,-1)}class wr{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new wr(me.min(),oe.empty(),-1)}static max(){return new wr(me.max(),oe.empty(),-1)}}function Ux(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=oe.comparator(t.documentKey,e.documentKey),n!==0?n:xe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class jx{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iu(t){if(t.code!==q.FAILED_PRECONDITION||t.message!==Bx)throw t;ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&fe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new K((i,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,s)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof K?n:K.resolve(n)}catch(n){return K.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):K.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):K.reject(n)}static resolve(e){return new K((n,i)=>{n(e)})}static reject(e){return new K((n,i)=>{i(e)})}static waitFor(e){return new K((n,i)=>{let s=0,o=0,l=!1;e.forEach(h=>{++s,h.next(()=>{++o,l&&o===s&&n()},d=>i(d))}),l=!0,o===s&&n()})}static or(e){let n=K.resolve(!1);for(const i of e)n=n.next(s=>s?K.resolve(s):i());return n}static forEach(e,n){const i=[];return e.forEach((s,o)=>{i.push(n.call(this,s,o))}),this.waitFor(i)}static mapArray(e,n){return new K((i,s)=>{const o=e.length,l=new Array(o);let h=0;for(let d=0;d<o;d++){const m=d;n(e[m]).next(v=>{l[m]=v,++h,h===o&&i(l)},v=>s(v))}})}static doWhile(e,n){return new K((i,s)=>{const o=()=>{e()===!0?n().next(()=>{o()},s):i()};o()})}}function Wx(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ru(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Nm.oe=-1;function qh(t){return t==null}function mh(t){return t===0&&1/t==-1/0}function Hx(t){return typeof t=="number"&&Number.isInteger(t)&&!mh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function $o(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function G0(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e,n){this.comparator=e,this.root=n||It.EMPTY}insert(e,n){return new Qe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,It.BLACK,null,null))}remove(e){return new Qe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,It.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new cc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new cc(this.root,e,this.comparator,!1)}getReverseIterator(){return new cc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new cc(this.root,e,this.comparator,!0)}}class cc{constructor(e,n,i,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class It{constructor(e,n,i,s,o){this.key=e,this.value=n,this.color=i??It.RED,this.left=s??It.EMPTY,this.right=o??It.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,s,o){return new It(e??this.key,n??this.value,i??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let s=this;const o=i(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,n,i),null):o===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return It.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return It.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,It.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,It.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw fe();const e=this.left.check();if(e!==this.right.check())throw fe();return e+(this.isRed()?0:1)}}It.EMPTY=null,It.RED=!0,It.BLACK=!1;It.EMPTY=new class{constructor(){this.size=0}get key(){throw fe()}get value(){throw fe()}get color(){throw fe()}get left(){throw fe()}get right(){throw fe()}copy(e,n,i,s,o){return this}insert(e,n,i){return new It(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.comparator=e,this.data=new Qe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Rv(this.data.getIterator())}getIteratorFrom(e){return new Rv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof At)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=i.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new At(this.comparator);return n.data=e,n}}class Rv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.fields=e,e.sort(Pt.comparator)}static empty(){return new Nn([])}unionWith(e){let n=new At(Pt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Nn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Oo(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Q0("Invalid base64 string: "+o):o}}(e);return new Rt(n)}static fromUint8Array(e){const n=function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o}(e);return new Rt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Rt.EMPTY_BYTE_STRING=new Rt("");const $x=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Er(t){if(Me(!!t),typeof t=="string"){let e=0;const n=$x.exec(t);if(Me(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:tt(t.seconds),nanos:tt(t.nanos)}}function tt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function us(t){return typeof t=="string"?Rt.fromBase64String(t):Rt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Dm(t){const e=t.mapValue.fields.__previous_value__;return Mm(e)?Dm(e):e}function bl(t){const e=Er(t.mapValue.fields.__local_write_time__.timestampValue);return new pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(e,n,i,s,o,l,h,d,m){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.longPollingOptions=d,this.useFetchStreams=m}}class Vl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Vl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Vl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hc={mapValue:{}};function cs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Mm(t)?4:Kx(t)?9007199254740991:Zx(t)?10:11:fe()}function ei(t,e){if(t===e)return!0;const n=cs(t);if(n!==cs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return bl(t).isEqual(bl(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const l=Er(s.timestampValue),h=Er(o.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,o){return us(s.bytesValue).isEqual(us(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,o){return tt(s.geoPointValue.latitude)===tt(o.geoPointValue.latitude)&&tt(s.geoPointValue.longitude)===tt(o.geoPointValue.longitude)}(t,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return tt(s.integerValue)===tt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const l=tt(s.doubleValue),h=tt(o.doubleValue);return l===h?mh(l)===mh(h):isNaN(l)&&isNaN(h)}return!1}(t,e);case 9:return Oo(t.arrayValue.values||[],e.arrayValue.values||[],ei);case 10:case 11:return function(s,o){const l=s.mapValue.fields||{},h=o.mapValue.fields||{};if(Cv(l)!==Cv(h))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(h[d]===void 0||!ei(l[d],h[d])))return!1;return!0}(t,e);default:return fe()}}function Fl(t,e){return(t.values||[]).find(n=>ei(n,e))!==void 0}function No(t,e){if(t===e)return 0;const n=cs(t),i=cs(e);if(n!==i)return xe(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return xe(t.booleanValue,e.booleanValue);case 2:return function(o,l){const h=tt(o.integerValue||o.doubleValue),d=tt(l.integerValue||l.doubleValue);return h<d?-1:h>d?1:h===d?0:isNaN(h)?isNaN(d)?0:-1:1}(t,e);case 3:return kv(t.timestampValue,e.timestampValue);case 4:return kv(bl(t),bl(e));case 5:return xe(t.stringValue,e.stringValue);case 6:return function(o,l){const h=us(o),d=us(l);return h.compareTo(d)}(t.bytesValue,e.bytesValue);case 7:return function(o,l){const h=o.split("/"),d=l.split("/");for(let m=0;m<h.length&&m<d.length;m++){const v=xe(h[m],d[m]);if(v!==0)return v}return xe(h.length,d.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,l){const h=xe(tt(o.latitude),tt(l.latitude));return h!==0?h:xe(tt(o.longitude),tt(l.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return xv(t.arrayValue,e.arrayValue);case 10:return function(o,l){var h,d,m,v;const y=o.fields||{},T=l.fields||{},N=(h=y.value)===null||h===void 0?void 0:h.arrayValue,D=(d=T.value)===null||d===void 0?void 0:d.arrayValue,b=xe(((m=N==null?void 0:N.values)===null||m===void 0?void 0:m.length)||0,((v=D==null?void 0:D.values)===null||v===void 0?void 0:v.length)||0);return b!==0?b:xv(N,D)}(t.mapValue,e.mapValue);case 11:return function(o,l){if(o===hc.mapValue&&l===hc.mapValue)return 0;if(o===hc.mapValue)return 1;if(l===hc.mapValue)return-1;const h=o.fields||{},d=Object.keys(h),m=l.fields||{},v=Object.keys(m);d.sort(),v.sort();for(let y=0;y<d.length&&y<v.length;++y){const T=xe(d[y],v[y]);if(T!==0)return T;const N=No(h[d[y]],m[v[y]]);if(N!==0)return N}return xe(d.length,v.length)}(t.mapValue,e.mapValue);default:throw fe()}}function kv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return xe(t,e);const n=Er(t),i=Er(e),s=xe(n.seconds,i.seconds);return s!==0?s:xe(n.nanos,i.nanos)}function xv(t,e){const n=t.values||[],i=e.values||[];for(let s=0;s<n.length&&s<i.length;++s){const o=No(n[s],i[s]);if(o)return o}return xe(n.length,i.length)}function Mo(t){return sp(t)}function sp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Er(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return us(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return oe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",s=!0;for(const o of n.values||[])s?s=!1:i+=",",i+=sp(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let s="{",o=!0;for(const l of i)o?o=!1:s+=",",s+=`${l}:${sp(n.fields[l])}`;return s+"}"}(t.mapValue):fe()}function Lv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function op(t){return!!t&&"integerValue"in t}function bm(t){return!!t&&"arrayValue"in t}function Ov(t){return!!t&&"nullValue"in t}function Nv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Lc(t){return!!t&&"mapValue"in t}function Zx(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function al(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return $o(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=al(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=al(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Kx(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.value=e}static empty(){return new yn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Lc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=al(n)}setAll(e){let n=Pt.emptyPath(),i={},s=[];e.forEach((l,h)=>{if(!n.isImmediateParentOf(h)){const d=this.getFieldsMap(n);this.applyChanges(d,i,s),i={},s=[],n=h.popLast()}l?i[h.lastSegment()]=al(l):s.push(h.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,s)}delete(e){const n=this.field(e.popLast());Lc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ei(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=n.mapValue.fields[e.get(i)];Lc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,i){$o(n,(s,o)=>e[s]=o);for(const s of i)delete e[s]}clone(){return new yn(al(this.value))}}function Y0(t){const e=[];return $o(t.fields,(n,i)=>{const s=new Pt([n]);if(Lc(i)){const o=Y0(i.mapValue).fields;if(o.length===0)e.push(s);else for(const l of o)e.push(s.child(l))}else e.push(s)}),new Nn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e,n,i,s,o,l,h){this.key=e,this.documentType=n,this.version=i,this.readTime=s,this.createTime=o,this.data=l,this.documentState=h}static newInvalidDocument(e){return new Mt(e,0,me.min(),me.min(),me.min(),yn.empty(),0)}static newFoundDocument(e,n,i,s){return new Mt(e,1,n,me.min(),i,s,0)}static newNoDocument(e,n){return new Mt(e,2,n,me.min(),me.min(),yn.empty(),0)}static newUnknownDocument(e,n){return new Mt(e,3,n,me.min(),me.min(),yn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Mt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Mt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(e,n){this.position=e,this.inclusive=n}}function Mv(t,e,n){let i=0;for(let s=0;s<t.position.length;s++){const o=e[s],l=t.position[s];if(o.field.isKeyField()?i=oe.comparator(oe.fromName(l.referenceValue),n.key):i=No(l,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function Dv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ei(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(e,n="asc"){this.field=e,this.dir=n}}function Gx(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{}class lt extends X0{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new Yx(e,n,i):n==="array-contains"?new eL(e,i):n==="in"?new tL(e,i):n==="not-in"?new nL(e,i):n==="array-contains-any"?new iL(e,i):new lt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new Xx(e,i):new Jx(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(No(n,this.value)):n!==null&&cs(this.value)===cs(n)&&this.matchesComparison(No(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return fe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Fn extends X0{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Fn(e,n)}matches(e){return J0(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function J0(t){return t.op==="and"}function eT(t){return Qx(t)&&J0(t)}function Qx(t){for(const e of t.filters)if(e instanceof Fn)return!1;return!0}function ap(t){if(t instanceof lt)return t.field.canonicalString()+t.op.toString()+Mo(t.value);if(eT(t))return t.filters.map(e=>ap(e)).join(",");{const e=t.filters.map(n=>ap(n)).join(",");return`${t.op}(${e})`}}function tT(t,e){return t instanceof lt?function(i,s){return s instanceof lt&&i.op===s.op&&i.field.isEqual(s.field)&&ei(i.value,s.value)}(t,e):t instanceof Fn?function(i,s){return s instanceof Fn&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((o,l,h)=>o&&tT(l,s.filters[h]),!0):!1}(t,e):void fe()}function nT(t){return t instanceof lt?function(n){return`${n.field.canonicalString()} ${n.op} ${Mo(n.value)}`}(t):t instanceof Fn?function(n){return n.op.toString()+" {"+n.getFilters().map(nT).join(" ,")+"}"}(t):"Filter"}class Yx extends lt{constructor(e,n,i){super(e,n,i),this.key=oe.fromName(i.referenceValue)}matches(e){const n=oe.comparator(e.key,this.key);return this.matchesComparison(n)}}class Xx extends lt{constructor(e,n){super(e,"in",n),this.keys=iT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Jx extends lt{constructor(e,n){super(e,"not-in",n),this.keys=iT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function iT(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>oe.fromName(i.referenceValue))}class eL extends lt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return bm(n)&&Fl(n.arrayValue,this.value)}}class tL extends lt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Fl(this.value.arrayValue,n)}}class nL extends lt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Fl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Fl(this.value.arrayValue,n)}}class iL extends lt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!bm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Fl(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rL{constructor(e,n=null,i=[],s=[],o=null,l=null,h=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=o,this.startAt=l,this.endAt=h,this.ue=null}}function bv(t,e=null,n=[],i=[],s=null,o=null,l=null){return new rL(t,e,n,i,s,o,l)}function Vm(t){const e=ge(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>ap(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),qh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Mo(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Mo(i)).join(",")),e.ue=n}return e.ue}function Fm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Gx(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!tT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Dv(t.startAt,e.startAt)&&Dv(t.endAt,e.endAt)}function lp(t){return oe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e,n=null,i=[],s=[],o=null,l="F",h=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=o,this.limitType=l,this.startAt=h,this.endAt=d,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function sL(t,e,n,i,s,o,l,h){return new qo(t,e,n,i,s,o,l,h)}function zm(t){return new qo(t)}function Vv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function rT(t){return t.collectionGroup!==null}function ll(t){const e=ge(t);if(e.ce===null){e.ce=[];const n=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let h=new At(Pt.comparator);return l.filters.forEach(d=>{d.getFlattenedFilters().forEach(m=>{m.isInequality()&&(h=h.add(m.field))})}),h})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new zl(o,i))}),n.has(Pt.keyField().canonicalString())||e.ce.push(new zl(Pt.keyField(),i))}return e.ce}function Xn(t){const e=ge(t);return e.le||(e.le=oL(e,ll(t))),e.le}function oL(t,e){if(t.limitType==="F")return bv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new zl(s.field,o)});const n=t.endAt?new gh(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new gh(t.startAt.position,t.startAt.inclusive):null;return bv(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function up(t,e){const n=t.filters.concat([e]);return new qo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function cp(t,e,n){return new qo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Zh(t,e){return Fm(Xn(t),Xn(e))&&t.limitType===e.limitType}function sT(t){return`${Vm(Xn(t))}|lt:${t.limitType}`}function Qs(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(s=>nT(s)).join(", ")}]`),qh(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(s=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(s)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(s=>Mo(s)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(s=>Mo(s)).join(",")),`Target(${i})`}(Xn(t))}; limitType=${t.limitType})`}function Kh(t,e){return e.isFoundDocument()&&function(i,s){const o=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):oe.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,s){for(const o of ll(i))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,s){for(const o of i.filters)if(!o.matches(s))return!1;return!0}(t,e)&&function(i,s){return!(i.startAt&&!function(l,h,d){const m=Mv(l,h,d);return l.inclusive?m<=0:m<0}(i.startAt,ll(i),s)||i.endAt&&!function(l,h,d){const m=Mv(l,h,d);return l.inclusive?m>=0:m>0}(i.endAt,ll(i),s))}(t,e)}function aL(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function oT(t){return(e,n)=>{let i=!1;for(const s of ll(t)){const o=lL(s,e,n);if(o!==0)return o;i=i||s.field.isKeyField()}return 0}}function lL(t,e,n){const i=t.field.isKeyField()?oe.comparator(e.key,n.key):function(o,l,h){const d=l.data.field(o),m=h.data.field(o);return d!==null&&m!==null?No(d,m):fe()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return fe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[s,o]of i)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){$o(this.inner,(n,i)=>{for(const[s,o]of i)e(s,o)})}isEmpty(){return G0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uL=new Qe(oe.comparator);function Li(){return uL}const aT=new Qe(oe.comparator);function Ka(...t){let e=aT;for(const n of t)e=e.insert(n.key,n);return e}function lT(t){let e=aT;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Gr(){return ul()}function uT(){return ul()}function ul(){return new Zo(t=>t.toString(),(t,e)=>t.isEqual(e))}const cL=new Qe(oe.comparator),hL=new At(oe.comparator);function Se(...t){let e=hL;for(const n of t)e=e.add(n);return e}const dL=new At(xe);function fL(){return dL}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Um(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mh(e)?"-0":e}}function cT(t){return{integerValue:""+t}}function pL(t,e){return Hx(e)?cT(e):Um(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(){this._=void 0}}function mL(t,e,n){return t instanceof Ul?function(s,o){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&Mm(o)&&(o=Dm(o)),o&&(l.fields.__previous_value__=o),{mapValue:l}}(n,e):t instanceof Bl?dT(t,e):t instanceof jl?fT(t,e):function(s,o){const l=hT(s,o),h=Fv(l)+Fv(s.Pe);return op(l)&&op(s.Pe)?cT(h):Um(s.serializer,h)}(t,e)}function gL(t,e,n){return t instanceof Bl?dT(t,e):t instanceof jl?fT(t,e):n}function hT(t,e){return t instanceof _h?function(i){return op(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class Ul extends Gh{}class Bl extends Gh{constructor(e){super(),this.elements=e}}function dT(t,e){const n=pT(e);for(const i of t.elements)n.some(s=>ei(s,i))||n.push(i);return{arrayValue:{values:n}}}class jl extends Gh{constructor(e){super(),this.elements=e}}function fT(t,e){let n=pT(e);for(const i of t.elements)n=n.filter(s=>!ei(s,i));return{arrayValue:{values:n}}}class _h extends Gh{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Fv(t){return tt(t.integerValue||t.doubleValue)}function pT(t){return bm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _L{constructor(e,n){this.field=e,this.transform=n}}function vL(t,e){return t.field.isEqual(e.field)&&function(i,s){return i instanceof Bl&&s instanceof Bl||i instanceof jl&&s instanceof jl?Oo(i.elements,s.elements,ei):i instanceof _h&&s instanceof _h?ei(i.Pe,s.Pe):i instanceof Ul&&s instanceof Ul}(t.transform,e.transform)}class yL{constructor(e,n){this.version=e,this.transformResults=n}}class Ii{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ii}static exists(e){return new Ii(void 0,e)}static updateTime(e){return new Ii(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Oc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Qh{}function mT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new _T(t.key,Ii.none()):new su(t.key,t.data,Ii.none());{const n=t.data,i=yn.empty();let s=new At(Pt.comparator);for(let o of e.fields)if(!s.has(o)){let l=n.field(o);l===null&&o.length>1&&(o=o.popLast(),l=n.field(o)),l===null?i.delete(o):i.set(o,l),s=s.add(o)}return new ms(t.key,i,new Nn(s.toArray()),Ii.none())}}function wL(t,e,n){t instanceof su?function(s,o,l){const h=s.value.clone(),d=Uv(s.fieldTransforms,o,l.transformResults);h.setAll(d),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(t,e,n):t instanceof ms?function(s,o,l){if(!Oc(s.precondition,o))return void o.convertToUnknownDocument(l.version);const h=Uv(s.fieldTransforms,o,l.transformResults),d=o.data;d.setAll(gT(s)),d.setAll(h),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(t,e,n):function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,n)}function cl(t,e,n,i){return t instanceof su?function(o,l,h,d){if(!Oc(o.precondition,l))return h;const m=o.value.clone(),v=Bv(o.fieldTransforms,d,l);return m.setAll(v),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),null}(t,e,n,i):t instanceof ms?function(o,l,h,d){if(!Oc(o.precondition,l))return h;const m=Bv(o.fieldTransforms,d,l),v=l.data;return v.setAll(gT(o)),v.setAll(m),l.convertToFoundDocument(l.version,v).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(y=>y.field))}(t,e,n,i):function(o,l,h){return Oc(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):h}(t,e,n)}function EL(t,e){let n=null;for(const i of t.fieldTransforms){const s=e.data.field(i.field),o=hT(i.transform,s||null);o!=null&&(n===null&&(n=yn.empty()),n.set(i.field,o))}return n||null}function zv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&Oo(i,s,(o,l)=>vL(o,l))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class su extends Qh{constructor(e,n,i,s=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ms extends Qh{constructor(e,n,i,s,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function gT(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function Uv(t,e,n){const i=new Map;Me(t.length===n.length);for(let s=0;s<n.length;s++){const o=t[s],l=o.transform,h=e.data.field(o.field);i.set(o.field,gL(l,h,n[s]))}return i}function Bv(t,e,n){const i=new Map;for(const s of t){const o=s.transform,l=n.data.field(s.field);i.set(s.field,mL(o,l,e))}return i}class _T extends Qh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class TL extends Qh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IL{constructor(e,n,i,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&wL(o,e,i[s])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=cl(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=cl(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=uT();return this.mutations.forEach(s=>{const o=e.get(s.key),l=o.overlayedDocument;let h=this.applyToLocalView(l,o.mutatedFields);h=n.has(s.key)?null:h;const d=mT(l,h);d!==null&&i.set(s.key,d),l.isValidDocument()||l.convertToNoDocument(me.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Se())}isEqual(e){return this.batchId===e.batchId&&Oo(this.mutations,e.mutations,(n,i)=>zv(n,i))&&Oo(this.baseMutations,e.baseMutations,(n,i)=>zv(n,i))}}class Bm{constructor(e,n,i,s){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(e,n,i){Me(e.mutations.length===i.length);let s=function(){return cL}();const o=e.mutations;for(let l=0;l<o.length;l++)s=s.insert(o[l].key,i[l].version);return new Bm(e,n,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PL{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SL{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ot,Re;function AL(t){switch(t){default:return fe();case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0}}function vT(t){if(t===void 0)return xi("GRPC error has no .code"),q.UNKNOWN;switch(t){case ot.OK:return q.OK;case ot.CANCELLED:return q.CANCELLED;case ot.UNKNOWN:return q.UNKNOWN;case ot.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case ot.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case ot.INTERNAL:return q.INTERNAL;case ot.UNAVAILABLE:return q.UNAVAILABLE;case ot.UNAUTHENTICATED:return q.UNAUTHENTICATED;case ot.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case ot.NOT_FOUND:return q.NOT_FOUND;case ot.ALREADY_EXISTS:return q.ALREADY_EXISTS;case ot.PERMISSION_DENIED:return q.PERMISSION_DENIED;case ot.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case ot.ABORTED:return q.ABORTED;case ot.OUT_OF_RANGE:return q.OUT_OF_RANGE;case ot.UNIMPLEMENTED:return q.UNIMPLEMENTED;case ot.DATA_LOSS:return q.DATA_LOSS;default:return fe()}}(Re=ot||(ot={}))[Re.OK=0]="OK",Re[Re.CANCELLED=1]="CANCELLED",Re[Re.UNKNOWN=2]="UNKNOWN",Re[Re.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Re[Re.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Re[Re.NOT_FOUND=5]="NOT_FOUND",Re[Re.ALREADY_EXISTS=6]="ALREADY_EXISTS",Re[Re.PERMISSION_DENIED=7]="PERMISSION_DENIED",Re[Re.UNAUTHENTICATED=16]="UNAUTHENTICATED",Re[Re.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Re[Re.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Re[Re.ABORTED=10]="ABORTED",Re[Re.OUT_OF_RANGE=11]="OUT_OF_RANGE",Re[Re.UNIMPLEMENTED=12]="UNIMPLEMENTED",Re[Re.INTERNAL=13]="INTERNAL",Re[Re.UNAVAILABLE=14]="UNAVAILABLE",Re[Re.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CL(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RL=new Xr([4294967295,4294967295],0);function jv(t){const e=CL().encode(t),n=new B0;return n.update(e),new Uint8Array(n.digest())}function Wv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Xr([n,i],0),new Xr([s,o],0)]}class jm{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Ga(`Invalid padding: ${n}`);if(i<0)throw new Ga(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Ga(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Ga(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Xr.fromNumber(this.Ie)}Ee(e,n,i){let s=e.add(n.multiply(Xr.fromNumber(i)));return s.compare(RL)===1&&(s=new Xr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=jv(e),[i,s]=Wv(n);for(let o=0;o<this.hashCount;o++){const l=this.Ee(i,s,o);if(!this.de(l))return!1}return!0}static create(e,n,i){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new jm(o,s,n);return i.forEach(h=>l.insert(h)),l}insert(e){if(this.Ie===0)return;const n=jv(e),[i,s]=Wv(n);for(let o=0;o<this.hashCount;o++){const l=this.Ee(i,s,o);this.Ae(l)}}Ae(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Ga extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,n,i,s,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const s=new Map;return s.set(e,ou.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Yh(me.min(),s,new Qe(xe),Li(),Se())}}class ou{constructor(e,n,i,s,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new ou(i,n,Se(),Se(),Se())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e,n,i,s){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=s}}class yT{constructor(e,n){this.targetId=e,this.me=n}}class wT{constructor(e,n,i=Rt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=s}}class Hv{constructor(){this.fe=0,this.ge=qv(),this.pe=Rt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Se(),n=Se(),i=Se();return this.ge.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:fe()}}),new ou(this.pe,this.ye,e,n,i)}Ce(){this.we=!1,this.ge=qv()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Me(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class kL{constructor(e){this.Le=e,this.Be=new Map,this.ke=Li(),this.qe=$v(),this.Qe=new Qe(xe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:fe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,i=e.me.count,s=this.Je(n);if(s){const o=s.target;if(lp(o))if(i===0){const l=new oe(o.path);this.Ue(n,l,Mt.newNoDocument(l,me.min()))}else Me(i===1);else{const l=this.Ye(n);if(l!==i){const h=this.Ze(e),d=h?this.Xe(h,e,l):1;if(d!==0){this.je(n);const m=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,m)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=n;let l,h;try{l=us(i).toUint8Array()}catch(d){if(d instanceof Q0)return Lo("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{h=new jm(l,s,o)}catch(d){return Lo(d instanceof Ga?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return h.Ie===0?null:h}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let s=0;return i.forEach(o=>{const l=this.Le.tt(),h=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.Ue(n,o,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((o,l)=>{const h=this.Je(l);if(h){if(o.current&&lp(h.target)){const d=new oe(h.target.path);this.ke.get(d)!==null||this.it(l,d)||this.Ue(l,d,Mt.newNoDocument(d,e))}o.be&&(n.set(l,o.ve()),o.Ce())}});let i=Se();this.qe.forEach((o,l)=>{let h=!0;l.forEachWhile(d=>{const m=this.Je(d);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(i=i.add(o))}),this.ke.forEach((o,l)=>l.setReadTime(e));const s=new Yh(e,n,this.Qe,this.ke,i);return this.ke=Li(),this.qe=$v(),this.Qe=new Qe(xe),s}$e(e,n){if(!this.ze(e))return;const i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Hv,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new At(xe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ie("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Hv),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function $v(){return new Qe(oe.comparator)}function qv(){return new Qe(oe.comparator)}const xL={asc:"ASCENDING",desc:"DESCENDING"},LL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},OL={and:"AND",or:"OR"};class NL{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function hp(t,e){return t.useProto3Json||qh(e)?e:{value:e}}function vh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ET(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function ML(t,e){return vh(t,e.toTimestamp())}function Jn(t){return Me(!!t),me.fromTimestamp(function(n){const i=Er(n);return new pt(i.seconds,i.nanos)}(t))}function Wm(t,e){return dp(t,e).canonicalString()}function dp(t,e){const n=function(s){return new Ue(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function TT(t){const e=Ue.fromString(t);return Me(CT(e)),e}function fp(t,e){return Wm(t.databaseId,e.path)}function Zd(t,e){const n=TT(e);if(n.get(1)!==t.databaseId.projectId)throw new ne(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ne(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new oe(PT(n))}function IT(t,e){return Wm(t.databaseId,e)}function DL(t){const e=TT(t);return e.length===4?Ue.emptyPath():PT(e)}function pp(t){return new Ue(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function PT(t){return Me(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Zv(t,e,n){return{name:fp(t,e),fields:n.value.mapValue.fields}}function bL(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:fe()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(m,v){return m.useProto3Json?(Me(v===void 0||typeof v=="string"),Rt.fromBase64String(v||"")):(Me(v===void 0||v instanceof Buffer||v instanceof Uint8Array),Rt.fromUint8Array(v||new Uint8Array))}(t,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(m){const v=m.code===void 0?q.UNKNOWN:vT(m.code);return new ne(v,m.message||"")}(l);n=new wT(i,s,o,h||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=Zd(t,i.document.name),o=Jn(i.document.updateTime),l=i.document.createTime?Jn(i.document.createTime):me.min(),h=new yn({mapValue:{fields:i.document.fields}}),d=Mt.newFoundDocument(s,o,l,h),m=i.targetIds||[],v=i.removedTargetIds||[];n=new Nc(m,v,d.key,d)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=Zd(t,i.document),o=i.readTime?Jn(i.readTime):me.min(),l=Mt.newNoDocument(s,o),h=i.removedTargetIds||[];n=new Nc([],h,l.key,l)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=Zd(t,i.document),o=i.removedTargetIds||[];n=new Nc([],o,s,null)}else{if(!("filter"in e))return fe();{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:o}=i,l=new SL(s,o),h=i.targetId;n=new yT(h,l)}}return n}function VL(t,e){let n;if(e instanceof su)n={update:Zv(t,e.key,e.value)};else if(e instanceof _T)n={delete:fp(t,e.key)};else if(e instanceof ms)n={update:Zv(t,e.key,e.data),updateMask:qL(e.fieldMask)};else{if(!(e instanceof TL))return fe();n={verify:fp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,l){const h=l.transform;if(h instanceof Ul)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Bl)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof jl)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof _h)return{fieldPath:l.field.canonicalString(),increment:h.Pe};throw fe()}(0,i))),e.precondition.isNone||(n.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:ML(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:fe()}(t,e.precondition)),n}function FL(t,e){return t&&t.length>0?(Me(e!==void 0),t.map(n=>function(s,o){let l=s.updateTime?Jn(s.updateTime):Jn(o);return l.isEqual(me.min())&&(l=Jn(o)),new yL(l,s.transformResults||[])}(n,e))):[]}function zL(t,e){return{documents:[IT(t,e.path)]}}function UL(t,e){const n={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=IT(t,s);const o=function(m){if(m.length!==0)return AT(Fn.create(m,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const l=function(m){if(m.length!==0)return m.map(v=>function(T){return{field:Ys(T.field),direction:WL(T.dir)}}(v))}(e.orderBy);l&&(n.structuredQuery.orderBy=l);const h=hp(t,e.limit);return h!==null&&(n.structuredQuery.limit=h),e.startAt&&(n.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(e.endAt)),{_t:n,parent:s}}function BL(t){let e=DL(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){Me(i===1);const v=n.from[0];v.allDescendants?s=v.collectionId:e=e.child(v.collectionId)}let o=[];n.where&&(o=function(y){const T=ST(y);return T instanceof Fn&&eT(T)?T.getFilters():[T]}(n.where));let l=[];n.orderBy&&(l=function(y){return y.map(T=>function(D){return new zl(Xs(D.field),function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(T))}(n.orderBy));let h=null;n.limit&&(h=function(y){let T;return T=typeof y=="object"?y.value:y,qh(T)?null:T}(n.limit));let d=null;n.startAt&&(d=function(y){const T=!!y.before,N=y.values||[];return new gh(N,T)}(n.startAt));let m=null;return n.endAt&&(m=function(y){const T=!y.before,N=y.values||[];return new gh(N,T)}(n.endAt)),sL(e,s,l,o,h,"F",d,m)}function jL(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function ST(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Xs(n.unaryFilter.field);return lt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=Xs(n.unaryFilter.field);return lt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Xs(n.unaryFilter.field);return lt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Xs(n.unaryFilter.field);return lt.create(l,"!=",{nullValue:"NULL_VALUE"});default:return fe()}}(t):t.fieldFilter!==void 0?function(n){return lt.create(Xs(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return fe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Fn.create(n.compositeFilter.filters.map(i=>ST(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return fe()}}(n.compositeFilter.op))}(t):fe()}function WL(t){return xL[t]}function HL(t){return LL[t]}function $L(t){return OL[t]}function Ys(t){return{fieldPath:t.canonicalString()}}function Xs(t){return Pt.fromServerFormat(t.fieldPath)}function AT(t){return t instanceof lt?function(n){if(n.op==="=="){if(Nv(n.value))return{unaryFilter:{field:Ys(n.field),op:"IS_NAN"}};if(Ov(n.value))return{unaryFilter:{field:Ys(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Nv(n.value))return{unaryFilter:{field:Ys(n.field),op:"IS_NOT_NAN"}};if(Ov(n.value))return{unaryFilter:{field:Ys(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ys(n.field),op:HL(n.op),value:n.value}}}(t):t instanceof Fn?function(n){const i=n.getFilters().map(s=>AT(s));return i.length===1?i[0]:{compositeFilter:{op:$L(n.op),filters:i}}}(t):fe()}function qL(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function CT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e,n,i,s,o=me.min(),l=me.min(),h=Rt.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h,this.expectedCount=d}withSequenceNumber(e){return new rr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new rr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new rr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new rr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZL{constructor(e){this.ct=e}}function KL(t){const e=BL({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?cp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GL{constructor(){this.un=new QL}addToCollectionParentIndex(e,n){return this.un.add(n),K.resolve()}getCollectionParents(e,n){return K.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return K.resolve()}deleteFieldIndex(e,n){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,n){return K.resolve()}getDocumentsMatchingTarget(e,n){return K.resolve(null)}getIndexType(e,n){return K.resolve(0)}getFieldIndexes(e,n){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,n){return K.resolve(wr.min())}getMinOffsetFromCollectionGroup(e,n){return K.resolve(wr.min())}updateCollectionGroup(e,n,i){return K.resolve()}updateIndexEntries(e,n){return K.resolve()}}class QL{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n]||new At(Ue.comparator),o=!s.has(i);return this.index[n]=s.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(e){return(this.index[e]||new At(Ue.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Do(0)}static kn(){return new Do(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YL{constructor(){this.changes=new Zo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Mt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?K.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XL{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JL{constructor(e,n,i,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(i!==null&&cl(i.mutation,s,Nn.empty(),pt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Se()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Se()){const s=Gr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,i).next(o=>{let l=Ka();return o.forEach((h,d)=>{l=l.insert(h,d.overlayedDocument)}),l}))}getOverlayedDocuments(e,n){const i=Gr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Se()))}populateOverlays(e,n,i){const s=[];return i.forEach(o=>{n.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((l,h)=>{n.set(l,h)})})}computeViews(e,n,i,s){let o=Li();const l=ul(),h=function(){return ul()}();return n.forEach((d,m)=>{const v=i.get(m.key);s.has(m.key)&&(v===void 0||v.mutation instanceof ms)?o=o.insert(m.key,m):v!==void 0?(l.set(m.key,v.mutation.getFieldMask()),cl(v.mutation,m,v.mutation.getFieldMask(),pt.now())):l.set(m.key,Nn.empty())}),this.recalculateAndSaveOverlays(e,o).next(d=>(d.forEach((m,v)=>l.set(m,v)),n.forEach((m,v)=>{var y;return h.set(m,new XL(v,(y=l.get(m))!==null&&y!==void 0?y:null))}),h))}recalculateAndSaveOverlays(e,n){const i=ul();let s=new Qe((l,h)=>l-h),o=Se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(l=>{for(const h of l)h.keys().forEach(d=>{const m=n.get(d);if(m===null)return;let v=i.get(d)||Nn.empty();v=h.applyToLocalView(m,v),i.set(d,v);const y=(s.get(h.batchId)||Se()).add(d);s=s.insert(h.batchId,y)})}).next(()=>{const l=[],h=s.getReverseIterator();for(;h.hasNext();){const d=h.getNext(),m=d.key,v=d.value,y=uT();v.forEach(T=>{if(!o.has(T)){const N=mT(n.get(T),i.get(T));N!==null&&y.set(T,N),o=o.add(T)}}),l.push(this.documentOverlayCache.saveOverlays(e,m,y))}return K.waitFor(l)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,s){return function(l){return oe.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):rT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,s):this.getDocumentsMatchingCollectionQuery(e,n,i,s)}getNextDocuments(e,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,s).next(o=>{const l=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,s-o.size):K.resolve(Gr());let h=-1,d=o;return l.next(m=>K.forEach(m,(v,y)=>(h<y.largestBatchId&&(h=y.largestBatchId),o.get(v)?K.resolve():this.remoteDocumentCache.getEntry(e,v).next(T=>{d=d.insert(v,T)}))).next(()=>this.populateOverlays(e,m,o)).next(()=>this.computeViews(e,d,m,Se())).next(v=>({batchId:h,changes:lT(v)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new oe(n)).next(i=>{let s=Ka();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,i,s){const o=n.collectionGroup;let l=Ka();return this.indexManager.getCollectionParents(e,o).next(h=>K.forEach(h,d=>{const m=function(y,T){return new qo(T,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(n,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,m,i,s).next(v=>{v.forEach((y,T)=>{l=l.insert(y,T)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,n,i,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,s))).next(l=>{o.forEach((d,m)=>{const v=m.getKey();l.get(v)===null&&(l=l.insert(v,Mt.newInvalidDocument(v)))});let h=Ka();return l.forEach((d,m)=>{const v=o.get(d);v!==void 0&&cl(v.mutation,m,Nn.empty(),pt.now()),Kh(n,m)&&(h=h.insert(d,m))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return K.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Jn(s.createTime)}}(n)),K.resolve()}getNamedQuery(e,n){return K.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:KL(s.bundledQuery),readTime:Jn(s.readTime)}}(n)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(){this.overlays=new Qe(oe.comparator),this.Ir=new Map}getOverlay(e,n){return K.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Gr();return K.forEach(n,s=>this.getOverlay(e,s).next(o=>{o!==null&&i.set(s,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((s,o)=>{this.ht(e,n,o)}),K.resolve()}removeOverlaysForBatchId(e,n,i){const s=this.Ir.get(i);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(i)),K.resolve()}getOverlaysForCollection(e,n,i){const s=Gr(),o=n.length+1,l=new oe(n.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const d=h.getNext().value,m=d.getKey();if(!n.isPrefixOf(m.path))break;m.path.length===o&&d.largestBatchId>i&&s.set(d.getKey(),d)}return K.resolve(s)}getOverlaysForCollectionGroup(e,n,i,s){let o=new Qe((m,v)=>m-v);const l=this.overlays.getIterator();for(;l.hasNext();){const m=l.getNext().value;if(m.getKey().getCollectionGroup()===n&&m.largestBatchId>i){let v=o.get(m.largestBatchId);v===null&&(v=Gr(),o=o.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const h=Gr(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((m,v)=>h.set(m,v)),!(h.size()>=s)););return K.resolve(h)}ht(e,n,i){const s=this.overlays.get(i.key);if(s!==null){const l=this.Ir.get(s.largestBatchId).delete(i.key);this.Ir.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new PL(n,i));let o=this.Ir.get(n);o===void 0&&(o=Se(),this.Ir.set(n,o)),this.Ir.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(){this.sessionToken=Rt.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(){this.Tr=new At(vt.Er),this.dr=new At(vt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const i=new vt(e,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Vr(new vt(e,n))}mr(e,n){e.forEach(i=>this.removeReference(i,n))}gr(e){const n=new oe(new Ue([])),i=new vt(n,e),s=new vt(n,e+1),o=[];return this.dr.forEachInRange([i,s],l=>{this.Vr(l),o.push(l.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new oe(new Ue([])),i=new vt(n,e),s=new vt(n,e+1);let o=Se();return this.dr.forEachInRange([i,s],l=>{o=o.add(l.key)}),o}containsKey(e){const n=new vt(e,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class vt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return oe.comparator(e.key,n.key)||xe(e.wr,n.wr)}static Ar(e,n){return xe(e.wr,n.wr)||oe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new At(vt.Er)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,s){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new IL(o,n,i,s);this.mutationQueue.push(l);for(const h of s)this.br=this.br.add(new vt(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return K.resolve(l)}lookupMutationBatch(e,n){return K.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,s=this.vr(i),o=s<0?0:s;return K.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new vt(n,0),s=new vt(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([i,s],l=>{const h=this.Dr(l.wr);o.push(h)}),K.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new At(xe);return n.forEach(s=>{const o=new vt(s,0),l=new vt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,l],h=>{i=i.add(h.wr)})}),K.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,s=i.length+1;let o=i;oe.isDocumentKey(o)||(o=o.child(""));const l=new vt(new oe(o),0);let h=new At(xe);return this.br.forEachWhile(d=>{const m=d.key.path;return!!i.isPrefixOf(m)&&(m.length===s&&(h=h.add(d.wr)),!0)},l),K.resolve(this.Cr(h))}Cr(e){const n=[];return e.forEach(i=>{const s=this.Dr(i);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Me(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return K.forEach(n.mutations,s=>{const o=new vt(s.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,n){const i=new vt(n,0),s=this.br.firstAfterOrEqual(i);return K.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(e){this.Mr=e,this.docs=function(){return new Qe(oe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,s=this.docs.get(i),o=s?s.size:0,l=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return K.resolve(i?i.document.mutableCopy():Mt.newInvalidDocument(n))}getEntries(e,n){let i=Li();return n.forEach(s=>{const o=this.docs.get(s);i=i.insert(s,o?o.document.mutableCopy():Mt.newInvalidDocument(s))}),K.resolve(i)}getDocumentsMatchingQuery(e,n,i,s){let o=Li();const l=n.path,h=new oe(l.child("")),d=this.docs.getIteratorFrom(h);for(;d.hasNext();){const{key:m,value:{document:v}}=d.getNext();if(!l.isPrefixOf(m.path))break;m.path.length>l.length+1||Ux(zx(v),i)<=0||(s.has(v.key)||Kh(n,v))&&(o=o.insert(v.key,v.mutableCopy()))}return K.resolve(o)}getAllFromCollectionGroup(e,n,i,s){fe()}Or(e,n){return K.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new sO(this)}getSize(e){return K.resolve(this.size)}}class sO extends YL{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(i)}),K.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oO{constructor(e){this.persistence=e,this.Nr=new Zo(n=>Vm(n),Fm),this.lastRemoteSnapshotVersion=me.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Hm,this.targetCount=0,this.kr=Do.Bn()}forEachTarget(e,n){return this.Nr.forEach((i,s)=>n(s)),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),K.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Do(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,K.resolve()}updateTargetData(e,n){return this.Kn(n),K.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,n,i){let s=0;const o=[];return this.Nr.forEach((l,h)=>{h.sequenceNumber<=n&&i.get(h.targetId)===null&&(this.Nr.delete(l),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),s++)}),K.waitFor(o).next(()=>s)}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,n){const i=this.Nr.get(n)||null;return K.resolve(i)}addMatchingKeys(e,n,i){return this.Br.Rr(n,i),K.resolve()}removeMatchingKeys(e,n,i){this.Br.mr(n,i);const s=this.persistence.referenceDelegate,o=[];return s&&n.forEach(l=>{o.push(s.markPotentiallyOrphaned(e,l))}),K.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),K.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Br.yr(n);return K.resolve(i)}containsKey(e,n){return K.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Nm(0),this.Kr=!1,this.Kr=!0,this.$r=new nO,this.referenceDelegate=e(this),this.Ur=new oO(this),this.indexManager=new GL,this.remoteDocumentCache=function(s){return new rO(s)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new ZL(n),this.Gr=new eO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new tO,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.qr[e.toKey()];return i||(i=new iO(n,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,i){ie("MemoryPersistence","Starting transaction:",e);const s=new lO(this.Qr.next());return this.referenceDelegate.zr(),i(s).next(o=>this.referenceDelegate.jr(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}Hr(e,n){return K.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,n)))}}class lO extends jx{constructor(e){super(),this.currentSequenceNumber=e}}class $m{constructor(e){this.persistence=e,this.Jr=new Hm,this.Yr=null}static Zr(e){return new $m(e)}get Xr(){if(this.Yr)return this.Yr;throw fe()}addReference(e,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),K.resolve()}removeReference(e,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),K.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),K.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(o=>this.Xr.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.Xr,i=>{const s=oe.fromPath(i);return this.ei(e,s).next(o=>{o||n.removeEntry(s,me.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return K.or([()=>K.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(e,n,i,s){this.targetId=e,this.fromCache=n,this.$i=i,this.Ui=s}static Wi(e,n){let i=Se(),s=Se();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new qm(e,n.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return XC()?8:Wx(bt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,i,s){const o={result:null};return this.Yi(e,n).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.Zi(e,n,s,i).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new uO;return this.Xi(e,n,l).next(h=>{if(o.result=h,this.zi)return this.es(e,n,l,h.size)})}).next(()=>o.result)}es(e,n,i,s){return i.documentReadCount<this.ji?(za()<=Ae.DEBUG&&ie("QueryEngine","SDK will not create cache indexes for query:",Qs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),K.resolve()):(za()<=Ae.DEBUG&&ie("QueryEngine","Query:",Qs(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.Hi*s?(za()<=Ae.DEBUG&&ie("QueryEngine","The SDK decides to create cache indexes for query:",Qs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Xn(n))):K.resolve())}Yi(e,n){if(Vv(n))return K.resolve(null);let i=Xn(n);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=cp(n,null,"F"),i=Xn(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const l=Se(...o);return this.Ji.getDocuments(e,l).next(h=>this.indexManager.getMinOffset(e,i).next(d=>{const m=this.ts(n,h);return this.ns(n,m,l,d.readTime)?this.Yi(e,cp(n,null,"F")):this.rs(e,m,n,d)}))})))}Zi(e,n,i,s){return Vv(n)||s.isEqual(me.min())?K.resolve(null):this.Ji.getDocuments(e,i).next(o=>{const l=this.ts(n,o);return this.ns(n,l,i,s)?K.resolve(null):(za()<=Ae.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Qs(n)),this.rs(e,l,n,Fx(s,-1)).next(h=>h))})}ts(e,n){let i=new At(oT(e));return n.forEach((s,o)=>{Kh(e,o)&&(i=i.add(o))}),i}ns(e,n,i,s){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Xi(e,n,i){return za()<=Ae.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",Qs(n)),this.Ji.getDocumentsMatchingQuery(e,n,wr.min(),i)}rs(e,n,i,s){return this.Ji.getDocumentsMatchingQuery(e,i,s).next(o=>(n.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(e,n,i,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Qe(xe),this._s=new Zo(o=>Vm(o),Fm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new JL(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function dO(t,e,n,i){return new hO(t,e,n,i)}async function RT(t,e){const n=ge(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next(o=>(s=o,n.ls(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const l=[],h=[];let d=Se();for(const m of s){l.push(m.batchId);for(const v of m.mutations)d=d.add(v.key)}for(const m of o){h.push(m.batchId);for(const v of m.mutations)d=d.add(v.key)}return n.localDocuments.getDocuments(i,d).next(m=>({hs:m,removedBatchIds:l,addedBatchIds:h}))})})}function fO(t,e){const n=ge(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return function(h,d,m,v){const y=m.batch,T=y.keys();let N=K.resolve();return T.forEach(D=>{N=N.next(()=>v.getEntry(d,D)).next(b=>{const U=m.docVersions.get(D);Me(U!==null),b.version.compareTo(U)<0&&(y.applyToRemoteDocument(b,m),b.isValidDocument()&&(b.setReadTime(m.commitVersion),v.addEntry(b)))})}),N.next(()=>h.mutationQueue.removeMutationBatch(d,y))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(h){let d=Se();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(d=d.add(h.batch.mutations[m].key));return d}(e))).next(()=>n.localDocuments.getDocuments(i,s))})}function kT(t){const e=ge(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function pO(t,e){const n=ge(t),i=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const h=[];e.targetChanges.forEach((v,y)=>{const T=s.get(y);if(!T)return;h.push(n.Ur.removeMatchingKeys(o,v.removedDocuments,y).next(()=>n.Ur.addMatchingKeys(o,v.addedDocuments,y)));let N=T.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?N=N.withResumeToken(Rt.EMPTY_BYTE_STRING,me.min()).withLastLimboFreeSnapshotVersion(me.min()):v.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(v.resumeToken,i)),s=s.insert(y,N),function(b,U,A){return b.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=3e8?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(T,N,v)&&h.push(n.Ur.updateTargetData(o,N))});let d=Li(),m=Se();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(o,v))}),h.push(mO(o,l,e.documentUpdates).next(v=>{d=v.Ps,m=v.Is})),!i.isEqual(me.min())){const v=n.Ur.getLastRemoteSnapshotVersion(o).next(y=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,i));h.push(v)}return K.waitFor(h).next(()=>l.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,d,m)).next(()=>d)}).then(o=>(n.os=s,o))}function mO(t,e,n){let i=Se(),s=Se();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let l=Li();return n.forEach((h,d)=>{const m=o.get(h);d.isFoundDocument()!==m.isFoundDocument()&&(s=s.add(h)),d.isNoDocument()&&d.version.isEqual(me.min())?(e.removeEntry(h,d.readTime),l=l.insert(h,d)):!m.isValidDocument()||d.version.compareTo(m.version)>0||d.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(d),l=l.insert(h,d)):ie("LocalStore","Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",d.version)}),{Ps:l,Is:s}})}function gO(t,e){const n=ge(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function _O(t,e){const n=ge(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return n.Ur.getTargetData(i,e).next(o=>o?(s=o,K.resolve(s)):n.Ur.allocateTargetId(i).next(l=>(s=new rr(e,l,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=n.os.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(e,i.targetId)),i})}async function mp(t,e,n){const i=ge(t),s=i.os.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,l=>i.persistence.referenceDelegate.removeTarget(l,s))}catch(l){if(!ru(l))throw l;ie("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}i.os=i.os.remove(e),i._s.delete(s.target)}function Kv(t,e,n){const i=ge(t);let s=me.min(),o=Se();return i.persistence.runTransaction("Execute query","readwrite",l=>function(d,m,v){const y=ge(d),T=y._s.get(v);return T!==void 0?K.resolve(y.os.get(T)):y.Ur.getTargetData(m,v)}(i,l,Xn(e)).next(h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(l,h.targetId).next(d=>{o=d})}).next(()=>i.ss.getDocumentsMatchingQuery(l,e,n?s:me.min(),n?o:Se())).next(h=>(vO(i,aL(e),h),{documents:h,Ts:o})))}function vO(t,e,n){let i=t.us.get(e)||me.min();n.forEach((s,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.us.set(e,i)}class Gv{constructor(){this.activeTargetIds=fL()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class yO{constructor(){this.so=new Gv,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,i){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Gv,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ie("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ie("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dc=null;function Kd(){return dc===null?dc=function(){return 268435456+Math.round(2147483648*Math.random())}():dc++,"0x"+dc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lt="WebChannelConnection";class IO extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${s}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${o}`}get Fo(){return!1}Mo(n,i,s,o,l){const h=Kd(),d=this.xo(n,i.toUriEncodedString());ie("RestConnection",`Sending RPC '${n}' ${h}:`,d,s);const m={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(m,o,l),this.No(n,d,m,s).then(v=>(ie("RestConnection",`Received RPC '${n}' ${h}: `,v),v),v=>{throw Lo("RestConnection",`RPC '${n}' ${h} failed with error: `,v,"url: ",d,"request:",s),v})}Lo(n,i,s,o,l,h){return this.Mo(n,i,s,o,l)}Oo(n,i,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ho}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,l)=>n[l]=o),s&&s.headers.forEach((o,l)=>n[l]=o)}xo(n,i){const s=EO[n];return`${this.Do}/v1/${i}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,i,s){const o=Kd();return new Promise((l,h)=>{const d=new j0;d.setWithCredentials(!0),d.listenOnce(W0.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case xc.NO_ERROR:const v=d.getResponseJson();ie(Lt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(v)),l(v);break;case xc.TIMEOUT:ie(Lt,`RPC '${e}' ${o} timed out`),h(new ne(q.DEADLINE_EXCEEDED,"Request time out"));break;case xc.HTTP_ERROR:const y=d.getStatus();if(ie(Lt,`RPC '${e}' ${o} failed with status:`,y,"response text:",d.getResponseText()),y>0){let T=d.getResponseJson();Array.isArray(T)&&(T=T[0]);const N=T==null?void 0:T.error;if(N&&N.status&&N.message){const D=function(U){const A=U.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(A)>=0?A:q.UNKNOWN}(N.status);h(new ne(D,N.message))}else h(new ne(q.UNKNOWN,"Server responded with status "+d.getStatus()))}else h(new ne(q.UNAVAILABLE,"Connection failed."));break;default:fe()}}finally{ie(Lt,`RPC '${e}' ${o} completed.`)}});const m=JSON.stringify(s);ie(Lt,`RPC '${e}' ${o} sending request:`,s),d.send(n,"POST",m,i,15)})}Bo(e,n,i){const s=Kd(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=q0(),h=$0(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(d.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Oo(d.initMessageHeaders,n,i),d.encodeInitMessageHeaders=!0;const v=o.join("");ie(Lt,`Creating RPC '${e}' stream ${s}: ${v}`,d);const y=l.createWebChannel(v,d);let T=!1,N=!1;const D=new TO({Io:U=>{N?ie(Lt,`Not sending because RPC '${e}' stream ${s} is closed:`,U):(T||(ie(Lt,`Opening RPC '${e}' stream ${s} transport.`),y.open(),T=!0),ie(Lt,`RPC '${e}' stream ${s} sending:`,U),y.send(U))},To:()=>y.close()}),b=(U,A,P)=>{U.listen(A,k=>{try{P(k)}catch(W){setTimeout(()=>{throw W},0)}})};return b(y,Za.EventType.OPEN,()=>{N||(ie(Lt,`RPC '${e}' stream ${s} transport opened.`),D.yo())}),b(y,Za.EventType.CLOSE,()=>{N||(N=!0,ie(Lt,`RPC '${e}' stream ${s} transport closed`),D.So())}),b(y,Za.EventType.ERROR,U=>{N||(N=!0,Lo(Lt,`RPC '${e}' stream ${s} transport errored:`,U),D.So(new ne(q.UNAVAILABLE,"The operation could not be completed")))}),b(y,Za.EventType.MESSAGE,U=>{var A;if(!N){const P=U.data[0];Me(!!P);const k=P,W=k.error||((A=k[0])===null||A===void 0?void 0:A.error);if(W){ie(Lt,`RPC '${e}' stream ${s} received error:`,W);const G=W.status;let X=function(S){const x=ot[S];if(x!==void 0)return vT(x)}(G),C=W.message;X===void 0&&(X=q.INTERNAL,C="Unknown error status: "+G+" with message "+W.message),N=!0,D.So(new ne(X,C)),y.close()}else ie(Lt,`RPC '${e}' stream ${s} received:`,P),D.bo(P)}}),b(h,H0.STAT_EVENT,U=>{U.stat===rp.PROXY?ie(Lt,`RPC '${e}' stream ${s} detected buffering proxy`):U.stat===rp.NOPROXY&&ie(Lt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{D.wo()},0),D}}function Gd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xh(t){return new NL(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(e,n,i=1e3,s=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=s,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-i);s>0&&ie("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(e,n,i,s,o,l,h,d){this.ui=e,this.Ho=i,this.Jo=s,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=d,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new xT(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===q.RESOURCE_EXHAUSTED?(xi(n.toString()),xi("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.Yo===n&&this.P_(i,s)},i=>{e(()=>{const s=new ne(q.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(s)})})}P_(e,n){const i=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{i(()=>this.I_(s))}),this.stream.onMessage(s=>{i(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ie("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(ie("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class PO extends LT{constructor(e,n,i,s,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,l),this.serializer=o}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=bL(this.serializer,e),i=function(o){if(!("targetChange"in o))return me.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?me.min():l.readTime?Jn(l.readTime):me.min()}(e);return this.listener.d_(n,i)}A_(e){const n={};n.database=pp(this.serializer),n.addTarget=function(o,l){let h;const d=l.target;if(h=lp(d)?{documents:zL(o,d)}:{query:UL(o,d)._t},h.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){h.resumeToken=ET(o,l.resumeToken);const m=hp(o,l.expectedCount);m!==null&&(h.expectedCount=m)}else if(l.snapshotVersion.compareTo(me.min())>0){h.readTime=vh(o,l.snapshotVersion.toTimestamp());const m=hp(o,l.expectedCount);m!==null&&(h.expectedCount=m)}return h}(this.serializer,e);const i=jL(this.serializer,e);i&&(n.labels=i),this.a_(n)}R_(e){const n={};n.database=pp(this.serializer),n.removeTarget=e,this.a_(n)}}class SO extends LT{constructor(e,n,i,s,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,l),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Me(!!e.streamToken),this.lastStreamToken=e.streamToken,Me(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Me(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=FL(e.writeResults,e.commitTime),i=Jn(e.commitTime);return this.listener.g_(i,n)}p_(){const e={};e.database=pp(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>VL(this.serializer,i))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO extends class{}{constructor(e,n,i,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new ne(q.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Mo(e,dp(n,i),s,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ne(q.UNKNOWN,o.toString())})}Lo(e,n,i,s,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.Lo(e,dp(n,i),s,l,h,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ne(q.UNKNOWN,l.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class CO{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(xi(n),this.D_=!1):ie("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RO{constructor(e,n,i,s,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(l=>{i.enqueueAndForget(async()=>{gs(this)&&(ie("RemoteStore","Restarting streams for network reachability change."),await async function(d){const m=ge(d);m.L_.add(4),await au(m),m.q_.set("Unknown"),m.L_.delete(4),await Jh(m)}(this))})}),this.q_=new CO(i,s)}}async function Jh(t){if(gs(t))for(const e of t.B_)await e(!0)}async function au(t){for(const e of t.B_)await e(!1)}function OT(t,e){const n=ge(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Qm(n)?Gm(n):Ko(n).r_()&&Km(n,e))}function Zm(t,e){const n=ge(t),i=Ko(n);n.N_.delete(e),i.r_()&&NT(n,e),n.N_.size===0&&(i.r_()?i.o_():gs(n)&&n.q_.set("Unknown"))}function Km(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(me.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ko(t).A_(e)}function NT(t,e){t.Q_.xe(e),Ko(t).R_(e)}function Gm(t){t.Q_=new kL({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ko(t).start(),t.q_.v_()}function Qm(t){return gs(t)&&!Ko(t).n_()&&t.N_.size>0}function gs(t){return ge(t).L_.size===0}function MT(t){t.Q_=void 0}async function kO(t){t.q_.set("Online")}async function xO(t){t.N_.forEach((e,n)=>{Km(t,e)})}async function LO(t,e){MT(t),Qm(t)?(t.q_.M_(e),Gm(t)):t.q_.set("Unknown")}async function OO(t,e,n){if(t.q_.set("Online"),e instanceof wT&&e.state===2&&e.cause)try{await async function(s,o){const l=o.cause;for(const h of o.targetIds)s.N_.has(h)&&(await s.remoteSyncer.rejectListen(h,l),s.N_.delete(h),s.Q_.removeTarget(h))}(t,e)}catch(i){ie("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await yh(t,i)}else if(e instanceof Nc?t.Q_.Ke(e):e instanceof yT?t.Q_.He(e):t.Q_.We(e),!n.isEqual(me.min()))try{const i=await kT(t.localStore);n.compareTo(i)>=0&&await function(o,l){const h=o.Q_.rt(l);return h.targetChanges.forEach((d,m)=>{if(d.resumeToken.approximateByteSize()>0){const v=o.N_.get(m);v&&o.N_.set(m,v.withResumeToken(d.resumeToken,l))}}),h.targetMismatches.forEach((d,m)=>{const v=o.N_.get(d);if(!v)return;o.N_.set(d,v.withResumeToken(Rt.EMPTY_BYTE_STRING,v.snapshotVersion)),NT(o,d);const y=new rr(v.target,d,m,v.sequenceNumber);Km(o,y)}),o.remoteSyncer.applyRemoteEvent(h)}(t,n)}catch(i){ie("RemoteStore","Failed to raise snapshot:",i),await yh(t,i)}}async function yh(t,e,n){if(!ru(e))throw e;t.L_.add(1),await au(t),t.q_.set("Offline"),n||(n=()=>kT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ie("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Jh(t)})}function DT(t,e){return e().catch(n=>yh(t,n,e))}async function ed(t){const e=ge(t),n=Tr(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;NO(e);)try{const s=await gO(e.localStore,i);if(s===null){e.O_.length===0&&n.o_();break}i=s.batchId,MO(e,s)}catch(s){await yh(e,s)}bT(e)&&VT(e)}function NO(t){return gs(t)&&t.O_.length<10}function MO(t,e){t.O_.push(e);const n=Tr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function bT(t){return gs(t)&&!Tr(t).n_()&&t.O_.length>0}function VT(t){Tr(t).start()}async function DO(t){Tr(t).p_()}async function bO(t){const e=Tr(t);for(const n of t.O_)e.m_(n.mutations)}async function VO(t,e,n){const i=t.O_.shift(),s=Bm.from(i,e,n);await DT(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await ed(t)}async function FO(t,e){e&&Tr(t).V_&&await async function(i,s){if(function(l){return AL(l)&&l!==q.ABORTED}(s.code)){const o=i.O_.shift();Tr(i).s_(),await DT(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),await ed(i)}}(t,e),bT(t)&&VT(t)}async function Yv(t,e){const n=ge(t);n.asyncQueue.verifyOperationInProgress(),ie("RemoteStore","RemoteStore received new credentials");const i=gs(n);n.L_.add(3),await au(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Jh(n)}async function zO(t,e){const n=ge(t);e?(n.L_.delete(2),await Jh(n)):e||(n.L_.add(2),await au(n),n.q_.set("Unknown"))}function Ko(t){return t.K_||(t.K_=function(n,i,s){const o=ge(n);return o.w_(),new PO(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{Eo:kO.bind(null,t),Ro:xO.bind(null,t),mo:LO.bind(null,t),d_:OO.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Qm(t)?Gm(t):t.q_.set("Unknown")):(await t.K_.stop(),MT(t))})),t.K_}function Tr(t){return t.U_||(t.U_=function(n,i,s){const o=ge(n);return o.w_(),new SO(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:DO.bind(null,t),mo:FO.bind(null,t),f_:bO.bind(null,t),g_:VO.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await ed(t)):(await t.U_.stop(),t.O_.length>0&&(ie("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(e,n,i,s,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=o,this.deferred=new Jr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,s,o){const l=Date.now()+i,h=new Ym(e,n,l,s,o);return h.start(i),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ne(q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Xm(t,e){if(xi("AsyncQueue",`${e}: ${t}`),ru(t))return new ne(q.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e){this.comparator=e?(n,i)=>e(n,i)||oe.comparator(n.key,i.key):(n,i)=>oe.comparator(n.key,i.key),this.keyedMap=Ka(),this.sortedSet=new Qe(this.comparator)}static emptySet(e){return new To(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof To)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=i.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new To;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(){this.W_=new Qe(oe.comparator)}track(e){const n=e.doc.key,i=this.W_.get(n);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(n,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(n):e.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):fe():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,i)=>{e.push(i)}),e}}class bo{constructor(e,n,i,s,o,l,h,d,m){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=d,this.hasCachedResults=m}static fromInitialDocuments(e,n,i,s,o){const l=[];return n.forEach(h=>{l.push({type:0,doc:h})}),new bo(e,n,To.emptySet(n),l,i,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UO{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class BO{constructor(){this.queries=Jv(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){const s=ge(n),o=s.queries;s.queries=Jv(),o.forEach((l,h)=>{for(const d of h.j_)d.onError(i)})})(this,new ne(q.ABORTED,"Firestore shutting down"))}}function Jv(){return new Zo(t=>sT(t),Zh)}async function jO(t,e){const n=ge(t);let i=3;const s=e.query;let o=n.queries.get(s);o?!o.H_()&&e.J_()&&(i=2):(o=new UO,i=e.J_()?0:1);try{switch(i){case 0:o.z_=await n.onListen(s,!0);break;case 1:o.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(l){const h=Xm(l,`Initialization of query '${Qs(e.query)}' failed`);return void e.onError(h)}n.queries.set(s,o),o.j_.push(e),e.Z_(n.onlineState),o.z_&&e.X_(o.z_)&&Jm(n)}async function WO(t,e){const n=ge(t),i=e.query;let s=3;const o=n.queries.get(i);if(o){const l=o.j_.indexOf(e);l>=0&&(o.j_.splice(l,1),o.j_.length===0?s=e.J_()?0:1:!o.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function HO(t,e){const n=ge(t);let i=!1;for(const s of e){const o=s.query,l=n.queries.get(o);if(l){for(const h of l.j_)h.X_(s)&&(i=!0);l.z_=s}}i&&Jm(n)}function $O(t,e,n){const i=ge(t),s=i.queries.get(e);if(s)for(const o of s.j_)o.onError(n);i.queries.delete(e)}function Jm(t){t.Y_.forEach(e=>{e.next()})}var gp,ey;(ey=gp||(gp={})).ea="default",ey.Cache="cache";class qO{constructor(e,n,i){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new bo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const i=n!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=bo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==gp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e){this.key=e}}class zT{constructor(e){this.key=e}}class ZO{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Se(),this.mutatedKeys=Se(),this.Aa=oT(e),this.Ra=new To(this.Aa)}get Va(){return this.Ta}ma(e,n){const i=n?n.fa:new Xv,s=n?n.Ra:this.Ra;let o=n?n.mutatedKeys:this.mutatedKeys,l=s,h=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,m=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((v,y)=>{const T=s.get(v),N=Kh(this.query,y)?y:null,D=!!T&&this.mutatedKeys.has(T.key),b=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let U=!1;T&&N?T.data.isEqual(N.data)?D!==b&&(i.track({type:3,doc:N}),U=!0):this.ga(T,N)||(i.track({type:2,doc:N}),U=!0,(d&&this.Aa(N,d)>0||m&&this.Aa(N,m)<0)&&(h=!0)):!T&&N?(i.track({type:0,doc:N}),U=!0):T&&!N&&(i.track({type:1,doc:T}),U=!0,(d||m)&&(h=!0)),U&&(N?(l=l.add(N),o=b?o.add(v):o.delete(v)):(l=l.delete(v),o=o.delete(v)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const v=this.query.limitType==="F"?l.last():l.first();l=l.delete(v.key),o=o.delete(v.key),i.track({type:1,doc:v})}return{Ra:l,fa:i,ns:h,mutatedKeys:o}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,s){const o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const l=e.fa.G_();l.sort((v,y)=>function(N,D){const b=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fe()}};return b(N)-b(D)}(v.type,y.type)||this.Aa(v.doc,y.doc)),this.pa(i),s=s!=null&&s;const h=n&&!s?this.ya():[],d=this.da.size===0&&this.current&&!s?1:0,m=d!==this.Ea;return this.Ea=d,l.length!==0||m?{snapshot:new bo(this.query,e.Ra,o,l,e.mutatedKeys,d===0,m,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:h}:{wa:h}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Xv,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Se(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const n=[];return e.forEach(i=>{this.da.has(i)||n.push(new zT(i))}),this.da.forEach(i=>{e.has(i)||n.push(new FT(i))}),n}ba(e){this.Ta=e.Ts,this.da=Se();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return bo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class KO{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class GO{constructor(e){this.key=e,this.va=!1}}class QO{constructor(e,n,i,s,o,l){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Ca={},this.Fa=new Zo(h=>sT(h),Zh),this.Ma=new Map,this.xa=new Set,this.Oa=new Qe(oe.comparator),this.Na=new Map,this.La=new Hm,this.Ba={},this.ka=new Map,this.qa=Do.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function YO(t,e,n=!0){const i=$T(t);let s;const o=i.Fa.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.Da()):s=await UT(i,e,n,!0),s}async function XO(t,e){const n=$T(t);await UT(n,e,!0,!1)}async function UT(t,e,n,i){const s=await _O(t.localStore,Xn(e)),o=s.targetId,l=t.sharedClientState.addLocalQueryTarget(o,n);let h;return i&&(h=await JO(t,e,o,l==="current",s.resumeToken)),t.isPrimaryClient&&n&&OT(t.remoteStore,s),h}async function JO(t,e,n,i,s){t.Ka=(y,T,N)=>async function(b,U,A,P){let k=U.view.ma(A);k.ns&&(k=await Kv(b.localStore,U.query,!1).then(({documents:C})=>U.view.ma(C,k)));const W=P&&P.targetChanges.get(U.targetId),G=P&&P.targetMismatches.get(U.targetId)!=null,X=U.view.applyChanges(k,b.isPrimaryClient,W,G);return ny(b,U.targetId,X.wa),X.snapshot}(t,y,T,N);const o=await Kv(t.localStore,e,!0),l=new ZO(e,o.Ts),h=l.ma(o.documents),d=ou.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",s),m=l.applyChanges(h,t.isPrimaryClient,d);ny(t,n,m.wa);const v=new KO(e,n,l);return t.Fa.set(e,v),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),m.snapshot}async function eN(t,e,n){const i=ge(t),s=i.Fa.get(e),o=i.Ma.get(s.targetId);if(o.length>1)return i.Ma.set(s.targetId,o.filter(l=>!Zh(l,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await mp(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),n&&Zm(i.remoteStore,s.targetId),_p(i,s.targetId)}).catch(iu)):(_p(i,s.targetId),await mp(i.localStore,s.targetId,!0))}async function tN(t,e){const n=ge(t),i=n.Fa.get(e),s=n.Ma.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Zm(n.remoteStore,i.targetId))}async function nN(t,e,n){const i=uN(t);try{const s=await function(l,h){const d=ge(l),m=pt.now(),v=h.reduce((N,D)=>N.add(D.key),Se());let y,T;return d.persistence.runTransaction("Locally write mutations","readwrite",N=>{let D=Li(),b=Se();return d.cs.getEntries(N,v).next(U=>{D=U,D.forEach((A,P)=>{P.isValidDocument()||(b=b.add(A))})}).next(()=>d.localDocuments.getOverlayedDocuments(N,D)).next(U=>{y=U;const A=[];for(const P of h){const k=EL(P,y.get(P.key).overlayedDocument);k!=null&&A.push(new ms(P.key,k,Y0(k.value.mapValue),Ii.exists(!0)))}return d.mutationQueue.addMutationBatch(N,m,A,h)}).next(U=>{T=U;const A=U.applyToLocalDocumentSet(y,b);return d.documentOverlayCache.saveOverlays(N,U.batchId,A)})}).then(()=>({batchId:T.batchId,changes:lT(y)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(l,h,d){let m=l.Ba[l.currentUser.toKey()];m||(m=new Qe(xe)),m=m.insert(h,d),l.Ba[l.currentUser.toKey()]=m}(i,s.batchId,n),await lu(i,s.changes),await ed(i.remoteStore)}catch(s){const o=Xm(s,"Failed to persist write");n.reject(o)}}async function BT(t,e){const n=ge(t);try{const i=await pO(n.localStore,e);e.targetChanges.forEach((s,o)=>{const l=n.Na.get(o);l&&(Me(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?l.va=!0:s.modifiedDocuments.size>0?Me(l.va):s.removedDocuments.size>0&&(Me(l.va),l.va=!1))}),await lu(n,i,e)}catch(i){await iu(i)}}function ty(t,e,n){const i=ge(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.Fa.forEach((o,l)=>{const h=l.view.Z_(e);h.snapshot&&s.push(h.snapshot)}),function(l,h){const d=ge(l);d.onlineState=h;let m=!1;d.queries.forEach((v,y)=>{for(const T of y.j_)T.Z_(h)&&(m=!0)}),m&&Jm(d)}(i.eventManager,e),s.length&&i.Ca.d_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function iN(t,e,n){const i=ge(t);i.sharedClientState.updateQueryState(e,"rejected",n);const s=i.Na.get(e),o=s&&s.key;if(o){let l=new Qe(oe.comparator);l=l.insert(o,Mt.newNoDocument(o,me.min()));const h=Se().add(o),d=new Yh(me.min(),new Map,new Qe(xe),l,h);await BT(i,d),i.Oa=i.Oa.remove(o),i.Na.delete(e),eg(i)}else await mp(i.localStore,e,!1).then(()=>_p(i,e,n)).catch(iu)}async function rN(t,e){const n=ge(t),i=e.batch.batchId;try{const s=await fO(n.localStore,e);WT(n,i,null),jT(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await lu(n,s)}catch(s){await iu(s)}}async function sN(t,e,n){const i=ge(t);try{const s=await function(l,h){const d=ge(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let v;return d.mutationQueue.lookupMutationBatch(m,h).next(y=>(Me(y!==null),v=y.keys(),d.mutationQueue.removeMutationBatch(m,y))).next(()=>d.mutationQueue.performConsistencyCheck(m)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(m,v,h)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v)).next(()=>d.localDocuments.getDocuments(m,v))})}(i.localStore,e);WT(i,e,n),jT(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await lu(i,s)}catch(s){await iu(s)}}function jT(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function WT(t,e,n){const i=ge(t);let s=i.Ba[i.currentUser.toKey()];if(s){const o=s.get(e);o&&(n?o.reject(n):o.resolve(),s=s.remove(e)),i.Ba[i.currentUser.toKey()]=s}}function _p(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Ma.get(e))t.Fa.delete(i),n&&t.Ca.$a(i,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(i=>{t.La.containsKey(i)||HT(t,i)})}function HT(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Zm(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),eg(t))}function ny(t,e,n){for(const i of n)i instanceof FT?(t.La.addReference(i.key,e),oN(t,i)):i instanceof zT?(ie("SyncEngine","Document no longer in limbo: "+i.key),t.La.removeReference(i.key,e),t.La.containsKey(i.key)||HT(t,i.key)):fe()}function oN(t,e){const n=e.key,i=n.path.canonicalString();t.Oa.get(n)||t.xa.has(i)||(ie("SyncEngine","New document in limbo: "+n),t.xa.add(i),eg(t))}function eg(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new oe(Ue.fromString(e)),i=t.qa.next();t.Na.set(i,new GO(n)),t.Oa=t.Oa.insert(n,i),OT(t.remoteStore,new rr(Xn(zm(n.path)),i,"TargetPurposeLimboResolution",Nm.oe))}}async function lu(t,e,n){const i=ge(t),s=[],o=[],l=[];i.Fa.isEmpty()||(i.Fa.forEach((h,d)=>{l.push(i.Ka(d,e,n).then(m=>{var v;if((m||n)&&i.isPrimaryClient){const y=m?!m.fromCache:(v=n==null?void 0:n.targetChanges.get(d.targetId))===null||v===void 0?void 0:v.current;i.sharedClientState.updateQueryState(d.targetId,y?"current":"not-current")}if(m){s.push(m);const y=qm.Wi(d.targetId,m);o.push(y)}}))}),await Promise.all(l),i.Ca.d_(s),await async function(d,m){const v=ge(d);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>K.forEach(m,T=>K.forEach(T.$i,N=>v.persistence.referenceDelegate.addReference(y,T.targetId,N)).next(()=>K.forEach(T.Ui,N=>v.persistence.referenceDelegate.removeReference(y,T.targetId,N)))))}catch(y){if(!ru(y))throw y;ie("LocalStore","Failed to update sequence numbers: "+y)}for(const y of m){const T=y.targetId;if(!y.fromCache){const N=v.os.get(T),D=N.snapshotVersion,b=N.withLastLimboFreeSnapshotVersion(D);v.os=v.os.insert(T,b)}}}(i.localStore,o))}async function aN(t,e){const n=ge(t);if(!n.currentUser.isEqual(e)){ie("SyncEngine","User change. New user:",e.toKey());const i=await RT(n.localStore,e);n.currentUser=e,function(o,l){o.ka.forEach(h=>{h.forEach(d=>{d.reject(new ne(q.CANCELLED,l))})}),o.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await lu(n,i.hs)}}function lN(t,e){const n=ge(t),i=n.Na.get(e);if(i&&i.va)return Se().add(i.key);{let s=Se();const o=n.Ma.get(e);if(!o)return s;for(const l of o){const h=n.Fa.get(l);s=s.unionWith(h.view.Va)}return s}}function $T(t){const e=ge(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=BT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=lN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=iN.bind(null,e),e.Ca.d_=HO.bind(null,e.eventManager),e.Ca.$a=$O.bind(null,e.eventManager),e}function uN(t){const e=ge(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=rN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sN.bind(null,e),e}class wh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Xh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return dO(this.persistence,new cO,e.initialUser,this.serializer)}Ga(e){return new aO($m.Zr,this.serializer)}Wa(e){return new yO}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wh.provider={build:()=>new wh};class vp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>ty(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=aN.bind(null,this.syncEngine),await zO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new BO}()}createDatastore(e){const n=Xh(e.databaseInfo.databaseId),i=function(o){return new IO(o)}(e.databaseInfo);return function(o,l,h,d){return new AO(o,l,h,d)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,s,o,l,h){return new RO(i,s,o,l,h)}(this.localStore,this.datastore,e.asyncQueue,n=>ty(this.syncEngine,n,0),function(){return Qv.D()?new Qv:new wO}())}createSyncEngine(e,n){return function(s,o,l,h,d,m,v){const y=new QO(s,o,l,h,d,m);return v&&(y.Qa=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const o=ge(s);ie("RemoteStore","RemoteStore shutting down."),o.L_.add(5),await au(o),o.k_.shutdown(),o.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}vp.provider={build:()=>new vp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):xi("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e,n,i,s,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=Ot.UNAUTHENTICATED,this.clientId=K0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async l=>{ie("FirestoreClient","Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(i,l=>(ie("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Jr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Xm(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Qd(t,e){t.asyncQueue.verifyOperationInProgress(),ie("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async s=>{i.isEqual(s)||(await RT(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function iy(t,e){t.asyncQueue.verifyOperationInProgress();const n=await dN(t);ie("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>Yv(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>Yv(e.remoteStore,s)),t._onlineComponents=e}async function dN(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ie("FirestoreClient","Using user provided OfflineComponentProvider");try{await Qd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===q.FAILED_PRECONDITION||s.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Lo("Error using user provided cache. Falling back to memory cache: "+n),await Qd(t,new wh)}}else ie("FirestoreClient","Using default OfflineComponentProvider"),await Qd(t,new wh);return t._offlineComponents}async function qT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ie("FirestoreClient","Using user provided OnlineComponentProvider"),await iy(t,t._uninitializedComponentsProvider._online)):(ie("FirestoreClient","Using default OnlineComponentProvider"),await iy(t,new vp))),t._onlineComponents}function fN(t){return qT(t).then(e=>e.syncEngine)}async function ry(t){const e=await qT(t),n=e.eventManager;return n.onListen=YO.bind(null,e.syncEngine),n.onUnlisten=eN.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=XO.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=tN.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sy=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KT(t,e,n){if(!n)throw new ne(q.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function pN(t,e,n,i){if(e===!0&&i===!0)throw new ne(q.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function oy(t){if(!oe.isDocumentKey(t))throw new ne(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function ay(t){if(oe.isDocumentKey(t))throw new ne(q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function td(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":fe()}function hl(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ne(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=td(t);throw new ne(q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ne(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ne(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}pN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ZT((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ne(q.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ne(q.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ne(q.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class nd{constructor(e,n,i,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ly({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ne(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ne(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ly(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new kx;switch(i.type){case"firstParty":return new Nx(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ne(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=sy.get(n);i&&(ie("ComponentProvider","Removing Datastore"),sy.delete(n),i.terminate())}(this),Promise.resolve()}}function mN(t,e,n,i={}){var s;const o=(t=hl(t,nd))._getSettings(),l=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==l&&Lo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:l,ssl:!1})),i.mockUserToken){let h,d;if(typeof i.mockUserToken=="string")h=i.mockUserToken,d=Ot.MOCK_USER;else{h=$C(i.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const m=i.mockUserToken.sub||i.mockUserToken.user_id;if(!m)throw new ne(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Ot(m)}t._authCredentials=new xx(new Z0(h,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new _s(this.firestore,e,this._query)}}class sn{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _r(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new sn(this.firestore,e,this._key)}}class _r extends _s{constructor(e,n,i){super(e,n,zm(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new sn(this.firestore,null,new oe(e))}withConverter(e){return new _r(this.firestore,e,this._path)}}function Eh(t,e,...n){if(t=Vt(t),KT("collection","path",e),t instanceof nd){const i=Ue.fromString(e,...n);return ay(i),new _r(t,null,i)}{if(!(t instanceof sn||t instanceof _r))throw new ne(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ue.fromString(e,...n));return ay(i),new _r(t.firestore,null,i)}}function GT(t,e,...n){if(t=Vt(t),arguments.length===1&&(e=K0.newId()),KT("doc","path",e),t instanceof nd){const i=Ue.fromString(e,...n);return oy(i),new sn(t,null,new oe(i))}{if(!(t instanceof sn||t instanceof _r))throw new ne(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ue.fromString(e,...n));return oy(i),new sn(t.firestore,t instanceof _r?t.converter:null,new oe(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new xT(this,"async_queue_retry"),this.Vu=()=>{const i=Gd();i&&ie("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const n=Gd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Gd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Jr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ru(e))throw e;ie("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;const s=function(l){let h=l.message||"";return l.stack&&(h=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),h}(i);throw xi("INTERNAL UNHANDLED ERROR: ",s),i}).then(i=>(this.du=!1,i))));return this.mu=n,n}enqueueAfterDelay(e,n,i){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Ym.createAndSchedule(this,e,n,i,o=>this.yu(o));return this.Tu.push(s),s}fu(){this.Eu&&fe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function cy(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const s=n;for(const o of i)if(o in s&&typeof s[o]=="function")return!0;return!1}(t,["next","error","complete"])}class Th extends nd{constructor(e,n,i,s){super(e,n,i,s),this.type="firestore",this._queue=new uy,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new uy(e),this._firestoreClient=void 0,await e}}}function gN(t,e){const n=typeof t=="object"?t:i0(),i=typeof t=="string"?t:"(default)",s=Tm(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const o=WC("firestore");o&&mN(s,...o)}return s}function QT(t){if(t._terminated)throw new ne(q.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||_N(t),t._firestoreClient}function _N(t){var e,n,i;const s=t._freezeSettings(),o=function(h,d,m,v){return new qx(h,d,m,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,ZT(v.experimentalLongPollingOptions),v.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=s.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new hN(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(h){const d=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(d),_online:d}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vo(Rt.fromBase64String(e))}catch(n){throw new ne(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Vo(Rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ne(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ne(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ne(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return xe(this._lat,e._lat)||xe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,s){if(i.length!==s.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==s[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN=/^__.*__$/;class yN{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new ms(e,this.data,this.fieldMask,n,this.fieldTransforms):new su(e,this.data,n,this.fieldTransforms)}}function YT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fe()}}class sg{constructor(e,n,i,s,o,l){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new sg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:i,xu:!1});return s.Ou(e),s}Nu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:i,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Ih(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(YT(this.Cu)&&vN.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class wN{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Xh(e)}Qu(e,n,i,s=!1){return new sg({Cu:e,methodName:n,qu:i,path:Pt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function XT(t){const e=t._freezeSettings(),n=Xh(t._databaseId);return new wN(t._databaseId,!!e.ignoreUndefinedProperties,n)}function EN(t,e,n,i,s,o={}){const l=t.Qu(o.merge||o.mergeFields?2:0,e,n,s);tI("Data must be an object, but it was:",l,i);const h=JT(i,l);let d,m;if(o.merge)d=new Nn(l.fieldMask),m=l.fieldTransforms;else if(o.mergeFields){const v=[];for(const y of o.mergeFields){const T=IN(e,y,n);if(!l.contains(T))throw new ne(q.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);SN(v,T)||v.push(T)}d=new Nn(v),m=l.fieldTransforms.filter(y=>d.covers(y.field))}else d=null,m=l.fieldTransforms;return new yN(new yn(h),d,m)}class og extends ng{_toFieldTransform(e){return new _L(e.path,new Ul)}isEqual(e){return e instanceof og}}function TN(t,e,n,i=!1){return ag(n,t.Qu(i?4:3,e))}function ag(t,e){if(eI(t=Vt(t)))return tI("Unsupported field value:",e,t),JT(t,e);if(t instanceof ng)return function(i,s){if(!YT(s.Cu))throw s.Bu(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,s){const o=[];let l=0;for(const h of i){let d=ag(h,s.Lu(l));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),l++}return{arrayValue:{values:o}}}(t,e)}return function(i,s){if((i=Vt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return pL(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=pt.fromDate(i);return{timestampValue:vh(s.serializer,o)}}if(i instanceof pt){const o=new pt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:vh(s.serializer,o)}}if(i instanceof ig)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Vo)return{bytesValue:ET(s.serializer,i._byteString)};if(i instanceof sn){const o=s.databaseId,l=i.firestore._databaseId;if(!l.isEqual(o))throw s.Bu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Wm(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof rg)return function(l,h){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:l.toArray().map(d=>{if(typeof d!="number")throw h.Bu("VectorValues must only contain numeric values.");return Um(h.serializer,d)})}}}}}}(i,s);throw s.Bu(`Unsupported field value: ${td(i)}`)}(t,e)}function JT(t,e){const n={};return G0(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$o(t,(i,s)=>{const o=ag(s,e.Mu(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function eI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof pt||t instanceof ig||t instanceof Vo||t instanceof sn||t instanceof ng||t instanceof rg)}function tI(t,e,n){if(!eI(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const i=td(n);throw i==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+i)}}function IN(t,e,n){if((e=Vt(e))instanceof tg)return e._internalPath;if(typeof e=="string")return nI(t,e);throw Ih("Field path arguments must be of type string or ",t,!1,void 0,n)}const PN=new RegExp("[~\\*/\\[\\]]");function nI(t,e,n){if(e.search(PN)>=0)throw Ih(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new tg(...e.split("."))._internalPath}catch{throw Ih(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ih(t,e,n,i,s){const o=i&&!i.isEmpty(),l=s!==void 0;let h=`Function ${e}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let d="";return(o||l)&&(d+=" (found",o&&(d+=` in field ${i}`),l&&(d+=` in document ${s}`),d+=")"),new ne(q.INVALID_ARGUMENT,h+t+d)}function SN(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e,n,i,s,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new sn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new AN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(id("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class AN extends iI{data(){return super.data()}}function id(t,e){return typeof e=="string"?nI(t,e):e instanceof tg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ne(q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class lg{}class rI extends lg{}function sI(t,e,...n){let i=[];e instanceof lg&&i.push(e),i=i.concat(n),function(o){const l=o.filter(d=>d instanceof ug).length,h=o.filter(d=>d instanceof rd).length;if(l>1||l>0&&h>0)throw new ne(q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const s of i)t=s._apply(t);return t}class rd extends rI{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new rd(e,n,i)}_apply(e){const n=this._parse(e);return aI(e._query,n),new _s(e.firestore,e.converter,up(e._query,n))}_parse(e){const n=XT(e.firestore);return function(o,l,h,d,m,v,y){let T;if(m.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new ne(q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){dy(y,v);const N=[];for(const D of y)N.push(hy(d,o,D));T={arrayValue:{values:N}}}else T=hy(d,o,y)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||dy(y,v),T=TN(h,l,y,v==="in"||v==="not-in");return lt.create(m,v,T)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function RN(t,e,n){const i=e,s=id("where",t);return rd._create(s,i,n)}class ug extends lg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ug(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Fn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,o){let l=s;const h=o.getFlattenedFilters();for(const d of h)aI(l,d),l=up(l,d)}(e._query,n),new _s(e.firestore,e.converter,up(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class cg extends rI{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new cg(e,n)}_apply(e){const n=function(s,o,l){if(s.startAt!==null)throw new ne(q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ne(q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new zl(o,l)}(e._query,this._field,this._direction);return new _s(e.firestore,e.converter,function(s,o){const l=s.explicitOrderBy.concat([o]);return new qo(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function oI(t,e="asc"){const n=e,i=id("orderBy",t);return cg._create(i,n)}function hy(t,e,n){if(typeof(n=Vt(n))=="string"){if(n==="")throw new ne(q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!rT(e)&&n.indexOf("/")!==-1)throw new ne(q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Ue.fromString(n));if(!oe.isDocumentKey(i))throw new ne(q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Lv(t,new oe(i))}if(n instanceof sn)return Lv(t,n._key);throw new ne(q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${td(n)}.`)}function dy(t,e){if(!Array.isArray(t)||t.length===0)throw new ne(q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function aI(t,e){const n=function(s,o){for(const l of s)for(const h of l.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ne(q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ne(q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class kN{convertValue(e,n="none"){switch(cs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(us(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw fe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return $o(e,(s,o)=>{i[s]=this.convertValue(o,n)}),i}convertVectorValue(e){var n,i,s;const o=(s=(i=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||s===void 0?void 0:s.map(l=>tt(l.doubleValue));return new rg(o)}convertGeoPoint(e){return new ig(tt(e.latitude),tt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Dm(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(bl(e));default:return null}}convertTimestamp(e){const n=Er(e);return new pt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Ue.fromString(e);Me(CT(i));const s=new Vl(i.get(1),i.get(3)),o=new oe(i.popFirst(5));return s.isEqual(n)||xi(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xN(t,e,n){let i;return i=t?t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class lI extends iI{constructor(e,n,i,s,o,l){super(e,n,i,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Mc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(id("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class Mc extends lI{data(e={}){return super.data(e)}}class LN{constructor(e,n,i,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Qa(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Mc(this._firestore,this._userDataWriter,i.key,i,new Qa(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ne(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(h=>{const d=new Mc(s._firestore,s._userDataWriter,h.doc.key,h.doc,new Qa(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);return h.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}})}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(h=>o||h.type!==3).map(h=>{const d=new Mc(s._firestore,s._userDataWriter,h.doc.key,h.doc,new Qa(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);let m=-1,v=-1;return h.type!==0&&(m=l.indexOf(h.doc.key),l=l.delete(h.doc.key)),h.type!==1&&(l=l.add(h.doc),v=l.indexOf(h.doc.key)),{type:ON(h.type),doc:d,oldIndex:m,newIndex:v}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function ON(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fe()}}class uI extends kN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new sn(this.firestore,null,n)}}function cI(t,e){const n=hl(t.firestore,Th),i=GT(t),s=xN(t.converter,e);return NN(n,[EN(XT(t.firestore),"addDoc",i._key,s,t.converter!==null,{}).toMutation(i._key,Ii.exists(!1))]).then(()=>i)}function yp(t,...e){var n,i,s;t=Vt(t);let o={includeMetadataChanges:!1,source:"default"},l=0;typeof e[l]!="object"||cy(e[l])||(o=e[l],l++);const h={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(cy(e[l])){const y=e[l];e[l]=(n=y.next)===null||n===void 0?void 0:n.bind(y),e[l+1]=(i=y.error)===null||i===void 0?void 0:i.bind(y),e[l+2]=(s=y.complete)===null||s===void 0?void 0:s.bind(y)}let d,m,v;if(t instanceof sn)m=hl(t.firestore,Th),v=zm(t._key.path),d={next:y=>{e[l]&&e[l](MN(m,t,y))},error:e[l+1],complete:e[l+2]};else{const y=hl(t,_s);m=hl(y.firestore,Th),v=y._query;const T=new uI(m);d={next:N=>{e[l]&&e[l](new LN(m,T,y,N))},error:e[l+1],complete:e[l+2]},CN(t._query)}return function(T,N,D,b){const U=new cN(b),A=new qO(N,U,D);return T.asyncQueue.enqueueAndForget(async()=>jO(await ry(T),A)),()=>{U.Za(),T.asyncQueue.enqueueAndForget(async()=>WO(await ry(T),A))}}(QT(m),v,h,d)}function NN(t,e){return function(i,s){const o=new Jr;return i.asyncQueue.enqueueAndForget(async()=>nN(await fN(i),s,o)),o.promise}(QT(t),e)}function MN(t,e,n){const i=n.docs.get(e._key),s=new uI(t);return new lI(t,s,e._key,i,new Qa(n.hasPendingWrites,n.fromCache),e.converter)}function hI(){return new og("serverTimestamp")}(function(e,n=!0){(function(s){Ho=s})(jo),xo(new ss("firestore",(i,{instanceIdentifier:s,options:o})=>{const l=i.getProvider("app").getImmediate(),h=new Th(new Lx(i.getProvider("auth-internal")),new Dx(i.getProvider("app-check-internal")),function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new ne(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vl(m.options.projectId,v)}(l,s),l);return o=Object.assign({useFetchStreams:n},o),h._setSettings(o),h},"PUBLIC").setMultipleInstances(!0)),gr(Av,"4.7.3",e),gr(Av,"4.7.3","esm2017")})();IC.Icon.Default.mergeOptions({iconUrl:MC,shadowUrl:DC});const DN={apiKey:"AIzaSyAPcdwpdfDEzZ2RXD6Sr35488hRtg5Co_8",authDomain:"selfmap-d948d.firebaseapp.com",projectId:"selfmap-d948d",storageBucket:"selfmap-d948d.firebasestorage.app",messagingSenderId:"492340350388",appId:"1:492340350388:web:f847717f5a0b5e9419b6e1",measurementId:"G-S8QV830559"},dI=n0(DN),Wl=Cx(dI),dl=gN(dI);async function bN(t,e){try{const n=`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${t}&lon=${e}`,i=await fetch(n,{headers:{Accept:"application/json"}});return i.ok&&(await i.json()).display_name||""}catch(n){return console.error("reverseGeocode error",n),""}}function fc(){const[t,e]=$.useState(""),[n,i]=$.useState(""),[s,o]=$.useState("signin"),[l,h]=$.useState(""),d=gm();async function m(y){y.preventDefault(),h("");try{await d1(Wl,t,n),d("/maps")}catch(T){h(T.message)}}async function v(y){y.preventDefault(),h("");try{await f1(Wl,t,n),d("/maps")}catch(T){h(T.message)}}return re.jsxs("div",{style:{padding:16,maxWidth:420,margin:"0 auto"},children:[re.jsx("h2",{style:{textAlign:"center"},children:" App"}),re.jsxs("div",{style:{display:"flex",gap:8,justifyContent:"center",marginBottom:12},children:[re.jsx("button",{onClick:()=>o("signin"),disabled:s==="signin",children:""}),re.jsx("button",{onClick:()=>o("signup"),disabled:s==="signup",children:""})]}),re.jsxs("form",{onSubmit:s==="signin"?v:m,children:[re.jsxs("label",{children:["",re.jsx("input",{type:"email",value:t,onChange:y=>e(y.target.value),required:!0})]}),re.jsxs("label",{children:["",re.jsx("input",{type:"password",value:n,onChange:y=>i(y.target.value),required:!0})]}),re.jsx("div",{style:{marginTop:12},children:re.jsx("button",{type:"submit",children:s==="signin"?"":""})})]}),l&&re.jsx("p",{style:{color:"red"},children:l})]})}function fy({user:t}){const[e,n]=$.useState([]),[i,s]=$.useState(!1),[o,l]=$.useState(""),h=gm();$.useEffect(()=>{if(!t)return;const m=sI(Eh(dl,"maps"),RN("ownerUid","==",t.uid),oI("createdAt","desc")),v=yp(m,y=>{n(y.docs.map(T=>({id:T.id,...T.data()})))});return()=>v()},[t]);async function d(){if(o.trim()){s(!0);try{const m=await cI(Eh(dl,"maps"),{title:o.trim(),ownerUid:t.uid,createdAt:hI()});l(""),h(`/map/${m.id}`)}catch(m){console.error(m),alert("")}finally{s(!1)}}}return re.jsxs("div",{style:{padding:12},children:[re.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[re.jsx("h3",{children:""}),re.jsx("button",{onClick:()=>x0(Wl),children:""})]}),re.jsxs("div",{style:{marginTop:12},children:[re.jsx("input",{value:o,onChange:m=>l(m.target.value),placeholder:""}),re.jsx("button",{onClick:d,disabled:i,children:""})]}),re.jsx("ul",{style:{marginTop:16},children:e.map(m=>re.jsx("li",{style:{padding:8,borderBottom:"1px solid #ddd"},children:re.jsx(BE,{to:`/map/${m.id}`,children:m.title||"()"})},m.id))}),e.length===0&&re.jsx("p",{style:{marginTop:12},children:"  "})]})}function VN({user:t}){const{mapId:e}=WA(),[n,i]=$.useState(null),[s,o]=$.useState([]),l=$.useRef(),[h,d]=$.useState(null),[m,v]=$.useState(!1);$.useEffect(()=>{if(!e)return;const D=yp(GT(dl,"maps",e),b=>{i(b.exists()?{id:b.id,...b.data()}:null)});return()=>D()},[e]),$.useEffect(()=>{if(!e)return;const D=sI(Eh(dl,"maps",e,"markers"),oI("createdAt","asc")),b=yp(D,U=>{o(U.docs.map(A=>({id:A.id,...A.data()})))});return()=>b()},[e]);function y(){if(!navigator.geolocation){alert(" GPS");return}navigator.geolocation.getCurrentPosition(D=>{d({lat:D.coords.latitude,lng:D.coords.longitude}),l.current&&l.current.click()},D=>alert(""+D.message),{enableHighAccuracy:!0,timeout:1e4})}async function T(D){var U;const b=(U=D.target.files)==null?void 0:U[0];if(!(!b||!h)){v(!0);try{const A=await new Promise((k,W)=>{const G=new FileReader;G.onload=()=>k(G.result),G.onerror=W,G.readAsDataURL(b)}),P=await bN(h.lat,h.lng);await cI(Eh(dl,"maps",e,"markers"),{lat:h.lat,lng:h.lng,photoBase64:A,address:P,createdAt:hI()}),d(null),D.target.value=null}catch(A){console.error(A),alert(""+A.message)}finally{v(!1)}}}const N=s.length>0?[s[s.length-1].lat,s[s.length-1].lng]:[25.033,121.5654];return re.jsxs("div",{style:{height:"100vh",display:"flex",flexDirection:"column"},children:[re.jsxs("header",{style:{padding:8,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[re.jsxs("div",{children:[re.jsx(BE,{to:"/maps",children:" "}),re.jsx("strong",{style:{marginLeft:8},children:(n==null?void 0:n.title)||""})]}),re.jsx("div",{children:re.jsx("button",{onClick:()=>x0(Wl),children:""})})]}),re.jsx("div",{style:{flex:1},children:re.jsxs(xC,{center:N,zoom:15,style:{height:"100%",width:"100%"},children:[re.jsx(NC,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:" OpenStreetMap contributors"}),s.map(D=>{var b;return re.jsx(LC,{position:[D.lat,D.lng],children:re.jsx(OC,{children:re.jsxs("div",{style:{maxWidth:240},children:[re.jsx("div",{style:{fontSize:12,color:"#444"},children:D.address}),re.jsx("div",{style:{fontSize:12,color:"#666"},children:(b=D.createdAt)!=null&&b.toDate?D.createdAt.toDate().toLocaleString():""}),D.photoBase64&&re.jsx("img",{src:D.photoBase64,alt:"site",style:{width:"100%",marginTop:8,borderRadius:6}})]})})},D.id)})]})}),re.jsxs("div",{style:{padding:8,display:"flex",gap:8,justifyContent:"center"},children:[re.jsx("input",{ref:l,type:"file",accept:"image/*",capture:"environment",style:{display:"none"},onChange:T}),re.jsx("button",{onClick:y,disabled:m,children:m?"...":" GPS + "})]})]})}function FN(){const[t,e]=$.useState(null),[n,i]=$.useState(!0);return $.useEffect(()=>{const s=g1(Wl,o=>{e(o),i(!1)});return()=>s()},[]),n?re.jsx("div",{style:{padding:20},children:""}):re.jsx(dC,{basename:"/selfMap/",children:re.jsxs(sC,{children:[re.jsx(Ha,{path:"/",element:t?re.jsx(fy,{user:t}):re.jsx(fc,{})}),re.jsx(Ha,{path:"/login",element:re.jsx(fc,{})}),re.jsx(Ha,{path:"/maps",element:t?re.jsx(fy,{user:t}):re.jsx(fc,{})}),re.jsx(Ha,{path:"/map/:mapId",element:t?re.jsx(VN,{user:t}):re.jsx(fc,{})})]})})}function zN(){return re.jsx(FN,{})}const UN=RE(document.getElementById("root"));UN.render(re.jsx(zN,{}));
